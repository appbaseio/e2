webpackJsonp([0xdf3b13a9c01a],{438:function(e,a){e.exports={data:{markdownRemark:{html:'<p>This article is a part of the series on <a href="https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html"><strong>how to build a search bar</strong></a>.</p>\n<h2 id="how-to-build-a-multi-match-search"><a href="#how-to-build-a-multi-match-search" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How To Build A Multi Match Search</h2>\n<p>It’s not uncommon to come across scenarios where we want to apply a search query across multiple fields. Take an e-commerce search experience for instance, here we would want to show our users results that match either the product name or its description.</p>\n<p>In this post, we will go through the process of building a multi match search experience (i.e. across multiple fields) using Elasticsearch.</p>\n<h2 id="defining-mappings"><a href="#defining-mappings" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>Being a NoSQL document store that works with JSON data, it comes with a convenient default for dynamic mappings. And we will exploit that to index our first data.</p>\n<h2 id="indexing-data"><a href="#indexing-data" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Indexing Data</h2>\n<div class="gatsby-highlight">\n      <pre class="gatsby-code-jsxon"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d \'{\n  "city": "New York",\n  "country": "United States"\n}\'</code></pre>\n      </div>\n<p>If we look back at our data mappings, they should now look like as follows</p>\n<div class="gatsby-highlight">\n      <pre class="gatsby-code-jsxon"><code>curl $host/normal_searchbar/_mapping?pretty</code></pre>\n      </div>\n<div class="gatsby-highlight">\n      <pre class="gatsby-code-jsxon"><code>"normal_searchbar" : {\n  "mappings" : {\n    "searchbar" : {\n      "properties" : {\n        "city" : {\n          "type" : "text",\n          "fields" : {\n            "keyword" : {\n              "type" : "keyword",\n              "ignore_above" : 256\n            }\n          }\n        },\n        "country" : {\n          "type" : "text",\n          "fields" : {\n            "keyword" : {\n              "type" : "keyword",\n              "ignore_above" : 256\n            }\n          }\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>\n<p>Elasticsearch created these mappings dynamically based on our indexed data.</p>\n<h2 id="data-browser-view"><a href="#data-browser-view" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~15,000 data points that can be viewed in the data browser <a href="https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAAKUAQAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdZF4_hjSV7EdPDTy97DMkG9PlZFBp_bLIhTq50OaXXwxPtBuMRIcPoLj3jT4xckRg5gb7pSiw9fFAJoH5HAeiXsya9za62wB2R_mv16L4HlA_xHvdGfdp0418nmqFUmW6PphBtnkRfvGlb2yeCvcT6ZS5VZTHbbm30EuT94MJLydUHyurtrtMNZaLDIZ8fEM2COgl1-0zP_-F7ACg&#x26;editable=false">here. <img src="https://i.imgur.com/rHOEixS.png"></a></p>\n<h2 id="query"><a href="#query" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query</h2>\n<p>Now we will write the search query for <strong>multi match</strong>.</p>\n<div class="gatsby-highlight">\n      <pre class="gatsby-code-jsxon"><code>curl "$host/normal_searchbar/searchbar/_search?pretty" -d \'{\n  "query": {\n    "multi_match": {\n      "query": "United States",\n      "fields": ["city", "country"]\n    }\n  }\n}\'</code></pre>\n      </div>\n<p>A <strong>multi_match</strong> query is very similar to a <strong>match</strong> query, except it has a convenient way of searching across multiple <code>fields</code>.</p>\n<p>Response:</p>\n<div class="gatsby-highlight">\n      <pre class="gatsby-code-jsxon"><code>{\n  "took" : 15,\n  "timed_out" : false,\n  "_shards" : {\n    "total" : 1,\n    "successful" : 1,\n    "failed" : 0\n  },\n  "hits" : {\n    "total" : 20,\n    "max_score" : 5.8896313,\n    "hits" : [ {\n      "_index" : "normal_searchbar",\n      "_type" : "searchbar",\n      "_id" : "1",\n      "_score" : 5.8896313,\n      "_source" : {\n        "city" : "New York",\n        "country" : "United States"\n      }\n    }, ... ]\n  }\n}</code></pre>\n      </div>\n<p>In the response, you will get the list of all the cities whos <code>country</code> field matches with <code>United States</code>.</p>\n<p>You can try out this query interactively <a href="https://opensource.appbase.io/mirage/#?input_state=XQAAAAK0BQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmIMRwpW8tLJEeyKCwoHzPOkL9M0KdbHLZtMVPxIPMlh7YYAQinNjBTPX006UGzGERYNqNYjacxklVFkEoKyx2zaubRUqhqxScMG9gD-h7bDyj7ZQ6VU2Kj2rkJ1mds7BRVYkDfAHTEbtNa5GW20cp1fus1prbJbNXISvUEQNnPsDOsiH93N8mrqk4ZUuFt9U-a6lycH_ep550RD_dqNp8O-_A9qC47n_yrU_BAyybWtYEqbqRubgwH5baTC-QSqOaNVNANksc4-2BgClNbtmRec6DIggUIQApnQW6Ka43GNQq1VJspFdL6BLifAI_I-zupa4IFDLS-eq3oykTMVHE9e6IrKvHb6vbhP8saKnhS2CQ_qXkx0ckZvsg4eCPzeCWx35T2MqDCqRc_8schvvRofTxHNCKHQ4ziO5mson_yplVSlGqxmKIc3ZjYBcBkOWNDwGomNYQzguPGCc0pV8IBHXRIUZBhplz_Fg146eLXsFr7__5mfaXglRnlw8k8SEgxCXeQRDByqHthvrhtqHBxwQLZcDckQuuwOc-DvMrqUauiIvXXmpg2s62fIQHu7PeB63NkcE_elwz5DoAqJwgtnm9GSN_cgn7UJLTscZO85i41qOLF0pCCCmeqp38E9Ich-tipAfgkk5wLmKaEuhNn_8PccSA">here. <img src="https://i.imgur.com/Z4Vt76n.png"></a></p>\n<hr>\n<p>Next, you should read about <a href="https://appbaseio.gitbooks.io/esc/content/searchbar/auto-complete.html"><strong>auto completion</strong></a>.</p>',frontmatter:{title:"Multi Match",next:"auto-complete.html",prev:"simple-match.html",nextTitle:"Auto Complete",prevTitle:"Simple Match"},fields:{path:"docs/searchbar/multi-match.md",slug:"searchbar/multi-match.html"}}},pathContext:{slug:"searchbar/multi-match.html"}}}});
//# sourceMappingURL=path---searchbar-multi-match-html-089864905a5f9d1d4a03.js.map