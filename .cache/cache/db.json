{"keys":[{"id":"transformer-remark-markdown-ast-62f4cf02d1bf243899519ae1b5b3c728-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}}},{"id":"transformer-remark-markdown-ast-ec720f820046df4580b11a1d8faa0f1f-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"layout: hero\ntitle: Appbase.io Docs Reference\nid: home","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":62},"indent":[1,1,1,1]}},{"type":"html","value":"<section class=\"light home-section\">","position":{"start":{"line":7,"column":1,"offset":64},"end":{"line":7,"column":37,"offset":100},"indent":[]}},{"type":"html","value":"  <div class=\"marketing-row\">\n    <div class=\"marketing-col\">\n      <h3>Javascript Quick Start</h3>\n      <p><a href=\"/javascript/quickstart.html\">Quick start with the Javascript APIs</a> for indexing, querying and streaming data.</p>\n    </div>\n    <div class=\"marketing-col\">\n      <h3>REST API Quick Start</h3>\n      <p><a href=\"/rest/getting-started.html\">Get started with the REST APIs</a> for indexing, querying and streaming data.</p>\n    </div>\n    <div class=\"marketing-col\">\n      <h3>REST API Reference</h3>\n      <p>Read the <a href=\"https://rest.appbase.io\">complete API reference</a>.</p>\n    </div>\n  </div>\n  <div class=\"marketing-row\">\n    <div class=\"marketing-col\">\n      <h3>Concepts</h3>\n      <p>Learn about <a href=\"/concepts/datamodel.html\">organizing data with appbase.io</a>.</p>\n    </div>\n    <div class=\"marketing-col\">\n      <h3>UI Components</h3>\n      <p>Build data-driven UI components with our <a href=\"https://opensource.appbase.io/reactive-manual\">Reactive UI Libraries</a> <i class=\"fa fa-external-link\"></i>.</p>\n    </div>\n  </div>\n</section>","position":{"start":{"line":9,"column":1,"offset":102},"end":{"line":33,"column":11,"offset":1183},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":34,"column":1,"offset":1184}}}},{"id":"transformer-remark-markdown-ast-1998c614db255f0fe5b37efa24198822-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"layout: single\ntitle: Page Not Found\npermalink: 404.html","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":64},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We couldn’t find what you were looking for.","position":{"start":{"line":7,"column":1,"offset":66},"end":{"line":7,"column":44,"offset":109},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":66},"end":{"line":7,"column":44,"offset":109},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":8,"column":1,"offset":110}}}},{"id":"transformer-remark-markdown-ast-92bf4ddd3513c61504f61961769ebaa6-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"link","url":"#building-a-search-engine-introduction","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Building a Search Engine: Introduction","position":{"start":{"line":1,"column":4,"offset":3},"end":{"line":1,"column":42,"offset":41},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":42,"offset":41},"indent":[]},"data":{"id":"building-a-search-engine-introduction","htmlAttributes":{"id":"building-a-search-engine-introduction"},"hProperties":{"id":"building-a-search-engine-introduction"}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-build-phrase-search-engine-using-elasticsearch","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to build phrase search engine using Elasticsearch?","position":{"start":{"line":3,"column":5,"offset":49},"end":{"line":3,"column":59,"offset":103},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":45},"end":{"line":3,"column":59,"offset":103},"indent":[]},"data":{"id":"how-to-build-phrase-search-engine-using-elasticsearch","htmlAttributes":{"id":"how-to-build-phrase-search-engine-using-elasticsearch"},"hProperties":{"id":"how-to-build-phrase-search-engine-using-elasticsearch"}}},{"type":"paragraph","children":[{"type":"text","value":"While building a search engine for your e-commerce app, user data, or any structured data set many times you need to match all the query terms in their relative position. This is the case where entities like “quick brown dog”, where the three terms individually don’t convey the same meaning as the three of them concatenated in this order.","position":{"start":{"line":5,"column":1,"offset":107},"end":{"line":5,"column":341,"offset":447},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":107},"end":{"line":5,"column":341,"offset":447},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this chapter we’re going to build phrase search engine using Hackernews dataset.","position":{"start":{"line":7,"column":1,"offset":451},"end":{"line":7,"column":84,"offset":534},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":451},"end":{"line":7,"column":84,"offset":534},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will use ","position":{"start":{"line":9,"column":1,"offset":538},"end":{"line":9,"column":13,"offset":550},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/products/elasticsearch","children":[{"type":"text","value":"Elasticsearch","position":{"start":{"line":9,"column":14,"offset":551},"end":{"line":9,"column":27,"offset":564},"indent":[]}}],"position":{"start":{"line":9,"column":13,"offset":550},"end":{"line":9,"column":75,"offset":612},"indent":[]}},{"type":"text","value":" as our search engine and the index (and dataset) is hosted on an ","position":{"start":{"line":9,"column":75,"offset":612},"end":{"line":9,"column":141,"offset":678},"indent":[]}},{"type":"link","title":null,"url":"https://appbase.io","children":[{"type":"text","value":"appbase.io","position":{"start":{"line":9,"column":142,"offset":679},"end":{"line":9,"column":152,"offset":689},"indent":[]}}],"position":{"start":{"line":9,"column":141,"offset":678},"end":{"line":9,"column":173,"offset":710},"indent":[]}},{"type":"text","value":" app.","position":{"start":{"line":9,"column":173,"offset":710},"end":{"line":9,"column":178,"offset":715},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":538},"end":{"line":9,"column":178,"offset":715},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#table-of-contents","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Table of Contents","position":{"start":{"line":11,"column":5,"offset":723},"end":{"line":11,"column":22,"offset":740},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":719},"end":{"line":11,"column":22,"offset":740},"indent":[]},"data":{"id":"table-of-contents","htmlAttributes":{"id":"table-of-contents"},"hProperties":{"id":"table-of-contents"}}},{"type":"table","align":[null,null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Index","position":{"start":{"line":13,"column":3,"offset":746},"end":{"line":13,"column":8,"offset":751},"indent":[]}}],"position":{"start":{"line":13,"column":3,"offset":746},"end":{"line":13,"column":12,"offset":755},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Title","position":{"start":{"line":13,"column":15,"offset":758},"end":{"line":13,"column":20,"offset":763},"indent":[]}}],"position":{"start":{"line":13,"column":15,"offset":758},"end":{"line":13,"column":23,"offset":766},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Description","position":{"start":{"line":13,"column":26,"offset":769},"end":{"line":13,"column":37,"offset":780},"indent":[]}}],"position":{"start":{"line":13,"column":26,"offset":769},"end":{"line":13,"column":37,"offset":780},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":744},"end":{"line":13,"column":39,"offset":782},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"1","position":{"start":{"line":15,"column":3,"offset":825},"end":{"line":15,"column":4,"offset":826},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":825},"end":{"line":15,"column":13,"offset":835},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/phrase-search/phrase_match.html","children":[{"type":"text","value":"Phrase Search","position":{"start":{"line":15,"column":17,"offset":839},"end":{"line":15,"column":30,"offset":852},"indent":[]}}],"position":{"start":{"line":15,"column":16,"offset":838},"end":{"line":15,"column":106,"offset":928},"indent":[]}}],"position":{"start":{"line":15,"column":16,"offset":838},"end":{"line":15,"column":106,"offset":928},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to use Elasticsearch phrase_match query.","position":{"start":{"line":15,"column":109,"offset":931},"end":{"line":15,"column":153,"offset":975},"indent":[]}}],"position":{"start":{"line":15,"column":109,"offset":931},"end":{"line":15,"column":153,"offset":975},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":823},"end":{"line":15,"column":155,"offset":977},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":744},"end":{"line":15,"column":155,"offset":977},"indent":[1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":16,"column":1,"offset":979}}}},{"id":"transformer-remark-markdown-ast-ce12cf0cf7706bd2fed6c602e17590c0-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: multiple-tag-match\ntitle: \"Multiple Tag Match\"\nlayout: tutorial\nsectionid: multiple-tag-match\npermalink: tagwise-search/multiple-tag-match.html\nprev: arrays.html\nprevTitle: \"Array Datatype\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":9,"column":4,"offset":209},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":11,"column":1,"offset":213},"end":{"line":11,"column":41,"offset":253},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"How to build tag wise search with Elasticsearch","position":{"start":{"line":11,"column":44,"offset":256},"end":{"line":11,"column":91,"offset":303},"indent":[]}}],"position":{"start":{"line":11,"column":42,"offset":254},"end":{"line":11,"column":93,"offset":305},"indent":[]}}],"position":{"start":{"line":11,"column":41,"offset":253},"end":{"line":11,"column":170,"offset":382},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":11,"column":170,"offset":382},"end":{"line":11,"column":171,"offset":383},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":213},"end":{"line":11,"column":171,"offset":383},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#how-to-find-multiple-exact-values","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to find multiple exact values","position":{"start":{"line":13,"column":4,"offset":390},"end":{"line":13,"column":37,"offset":423},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":387},"end":{"line":13,"column":37,"offset":423},"indent":[]},"data":{"id":"how-to-find-multiple-exact-values","htmlAttributes":{"id":"how-to-find-multiple-exact-values"},"hProperties":{"id":"how-to-find-multiple-exact-values"}}},{"type":"paragraph","children":[{"type":"text","value":"A major use-case of tags in apps is to associate a content with one or more labels, it is then but natural that a tagwise search feature should be able to retrieve the matching content by user specifying either just one or more than one tag labels in union or intersection output modes.","position":{"start":{"line":15,"column":1,"offset":427},"end":{"line":15,"column":287,"offset":713},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":427},"end":{"line":15,"column":287,"offset":713},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this chapter, we will be using an Array data structure to store more than one label with a content document. For making the exact lookups for multiple tagwise, we will be applying a term query along with boolean clause on the dataset.","position":{"start":{"line":17,"column":1,"offset":717},"end":{"line":17,"column":238,"offset":954},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":717},"end":{"line":17,"column":238,"offset":954},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-store-data-using-elasticsearch-arrays","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to store data using Elasticsearch arrays","position":{"start":{"line":19,"column":5,"offset":962},"end":{"line":19,"column":49,"offset":1006},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":958},"end":{"line":19,"column":49,"offset":1006},"indent":[]},"data":{"id":"how-to-store-data-using-elasticsearch-arrays","htmlAttributes":{"id":"how-to-store-data-using-elasticsearch-arrays"},"hProperties":{"id":"how-to-store-data-using-elasticsearch-arrays"}}},{"type":"paragraph","children":[{"type":"text","value":"For one or more then one inputs elasticsearch by default considers that field as an array type. However, all values in the array must be of the same datatype. If you create a new field by indexing an array, Elasticsearch will use the datatype of the first value in the array to determine the type of the new field. We can create array of strings, integers, objects or array of arrays to store the data.","position":{"start":{"line":21,"column":1,"offset":1010},"end":{"line":21,"column":403,"offset":1412},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1010},"end":{"line":21,"column":403,"offset":1412},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Default array does not support querying each object independently of the other objects in the array. To distinguish objects stored in array from each other we need to use ","position":{"start":{"line":23,"column":1,"offset":1416},"end":{"line":23,"column":172,"offset":1587},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Nested datatype","position":{"start":{"line":23,"column":174,"offset":1589},"end":{"line":23,"column":189,"offset":1604},"indent":[]}}],"position":{"start":{"line":23,"column":172,"offset":1587},"end":{"line":23,"column":191,"offset":1606},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":23,"column":191,"offset":1606},"end":{"line":23,"column":192,"offset":1607},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1416},"end":{"line":23,"column":192,"offset":1607},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Note:","position":{"start":{"line":25,"column":1,"offset":1611},"end":{"line":25,"column":8,"offset":1618},"indent":[]}},{"type":"text","value":" You can read more about nested datatype over ","position":{"start":{"line":25,"column":8,"offset":1618},"end":{"line":25,"column":54,"offset":1664},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html","children":[{"type":"text","value":"here","position":{"start":{"line":25,"column":55,"offset":1665},"end":{"line":25,"column":59,"offset":1669},"indent":[]}}],"position":{"start":{"line":25,"column":54,"offset":1664},"end":{"line":25,"column":137,"offset":1747},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":25,"column":137,"offset":1747},"end":{"line":25,"column":138,"offset":1748},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1611},"end":{"line":25,"column":138,"offset":1748},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":27,"column":4,"offset":1755},"end":{"line":27,"column":21,"offset":1772},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1752},"end":{"line":27,"column":21,"offset":1772},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":29,"column":1,"offset":1776},"end":{"line":29,"column":171,"offset":1946},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1776},"end":{"line":29,"column":171,"offset":1946},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By default Elasticsearch analyzes the data before storing it on disk. However, since we require an exact match of the data for repository tags, we will apply a ","position":{"start":{"line":31,"column":1,"offset":1950},"end":{"line":31,"column":161,"offset":2110},"indent":[]}},{"type":"inlineCode","value":"index: not_analyzed","position":{"start":{"line":31,"column":161,"offset":2110},"end":{"line":31,"column":182,"offset":2131},"indent":[]}},{"type":"text","value":" setting to prevent the tag field from being analyzed.","position":{"start":{"line":31,"column":182,"offset":2131},"end":{"line":31,"column":236,"offset":2185},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1950},"end":{"line":31,"column":236,"offset":2185},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will only specify the mapping for the tags field. Elasticsearch will create mappings dynamically for the rest of the fields.","position":{"start":{"line":33,"column":1,"offset":2189},"end":{"line":33,"column":128,"offset":2316},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2189},"end":{"line":33,"column":128,"offset":2316},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#disable-analyzers-on-tags-field","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Disable analyzers on ","position":{"start":{"line":35,"column":5,"offset":2324},"end":{"line":35,"column":26,"offset":2345},"indent":[]}},{"type":"inlineCode","value":"tags","position":{"start":{"line":35,"column":26,"offset":2345},"end":{"line":35,"column":32,"offset":2351},"indent":[]}},{"type":"text","value":" field","position":{"start":{"line":35,"column":32,"offset":2351},"end":{"line":35,"column":38,"offset":2357},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2320},"end":{"line":35,"column":38,"offset":2357},"indent":[]},"data":{"id":"disable-analyzers-on-tags-field","htmlAttributes":{"id":"disable-analyzers-on-tags-field"},"hProperties":{"id":"disable-analyzers-on-tags-field"}}},{"type":"paragraph","children":[{"type":"text","value":"To store the data without analyzing it, we have to make ","position":{"start":{"line":37,"column":1,"offset":2361},"end":{"line":37,"column":57,"offset":2417},"indent":[]}},{"type":"inlineCode","value":"tags","position":{"start":{"line":37,"column":57,"offset":2417},"end":{"line":37,"column":63,"offset":2423},"indent":[]}},{"type":"text","value":" field ","position":{"start":{"line":37,"column":63,"offset":2423},"end":{"line":37,"column":70,"offset":2430},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"not","position":{"start":{"line":37,"column":72,"offset":2432},"end":{"line":37,"column":75,"offset":2435},"indent":[]}},{"type":"text","value":"_","position":{"start":{"line":37,"column":75,"offset":2435},"end":{"line":37,"column":77,"offset":2437},"indent":[]}},{"type":"text","value":"analyzed","position":{"start":{"line":37,"column":77,"offset":2437},"end":{"line":37,"column":85,"offset":2445},"indent":[]}}],"position":{"start":{"line":37,"column":70,"offset":2430},"end":{"line":37,"column":87,"offset":2447},"indent":[]}},{"type":"text","value":". By doing this Elasticsearch will store the data as usual without any modifications.","position":{"start":{"line":37,"column":87,"offset":2447},"end":{"line":37,"column":172,"offset":2532},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2361},"end":{"line":37,"column":172,"offset":2532},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/_mapping/search -d '{\n  \"properties\": {\n    \"tags\": {\n      \"type\": \"keyword\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":39,"column":1,"offset":2536},"end":{"line":47,"column":4,"offset":2671},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We just put ","position":{"start":{"line":49,"column":1,"offset":2675},"end":{"line":49,"column":13,"offset":2687},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"mapping","position":{"start":{"line":49,"column":15,"offset":2689},"end":{"line":49,"column":22,"offset":2696},"indent":[]}}],"position":{"start":{"line":49,"column":13,"offset":2687},"end":{"line":49,"column":24,"offset":2698},"indent":[]}},{"type":"text","value":" on ","position":{"start":{"line":49,"column":24,"offset":2698},"end":{"line":49,"column":28,"offset":2702},"indent":[]}},{"type":"inlineCode","value":"search","position":{"start":{"line":49,"column":28,"offset":2702},"end":{"line":49,"column":36,"offset":2710},"indent":[]}},{"type":"text","value":" type of ","position":{"start":{"line":49,"column":36,"offset":2710},"end":{"line":49,"column":45,"offset":2719},"indent":[]}},{"type":"inlineCode","value":"tagwise","position":{"start":{"line":49,"column":45,"offset":2719},"end":{"line":49,"column":54,"offset":2728},"indent":[]}},{"type":"text","value":" index. Now, let’s index some data.","position":{"start":{"line":49,"column":54,"offset":2728},"end":{"line":49,"column":89,"offset":2763},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2675},"end":{"line":49,"column":89,"offset":2763},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#indexing-data","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Indexing Data","position":{"start":{"line":51,"column":4,"offset":2770},"end":{"line":51,"column":17,"offset":2783},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2767},"end":{"line":51,"column":17,"offset":2783},"indent":[]},"data":{"id":"indexing-data","htmlAttributes":{"id":"indexing-data"},"hProperties":{"id":"indexing-data"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/search/1 -d '{\n  \"repo\" : \"reddit\",\n  \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n  \"owner\" : \"reddit\",\n  \"url\" : \"https://github.com/reddit/reddit\",\n  \"stars\" : 13053,\n  \"language\" : \"Python\",\n  \"created-on\" : \"2008-06-18T23:30:53Z\"\n}'</code></pre>\n      </div>","position":{"start":{"line":53,"column":1,"offset":2787},"end":{"line":63,"column":4,"offset":3073},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If we look back at our data mappings, they should now look like as follows","position":{"start":{"line":65,"column":1,"offset":3077},"end":{"line":65,"column":75,"offset":3151},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":3077},"end":{"line":65,"column":75,"offset":3151},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/_mapping?pretty</code></pre>\n      </div>","position":{"start":{"line":67,"column":1,"offset":3155},"end":{"line":69,"column":4,"offset":3203},"indent":[1,1]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"tagwise\": {\n    \"mappings\": {\n      \"search\": {\n        \"properties\": {\n          \"owner\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"repo\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"tags\": {\n            \"type\": \"keyword\"\n          },\n          \"url\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"stars\": {\n            \"type\": \"long\"\n          },\n          \"language\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"created-on\": {\n            \"type\": \"date\"\n          }\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":71,"column":1,"offset":3207},"end":{"line":127,"column":4,"offset":4450},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.","position":{"start":{"line":129,"column":1,"offset":4454},"end":{"line":129,"column":123,"offset":4576},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":4454},"end":{"line":129,"column":123,"offset":4576},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":131,"column":4,"offset":4583},"end":{"line":131,"column":21,"offset":4600},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":4580},"end":{"line":131,"column":21,"offset":4600},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser ","position":{"start":{"line":133,"column":1,"offset":4604},"end":{"line":133,"column":108,"offset":4711},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA","children":[{"type":"text","value":"here. ","position":{"start":{"line":133,"column":109,"offset":4712},"end":{"line":133,"column":115,"offset":4718},"indent":[]}},{"type":"image","title":null,"url":"http://i.imgur.com/x7nLB9s.png","alt":null,"position":{"start":{"line":133,"column":115,"offset":4718},"end":{"line":133,"column":150,"offset":4753},"indent":[]}}],"position":{"start":{"line":133,"column":108,"offset":4711},"end":{"line":133,"column":492,"offset":5095},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":4604},"end":{"line":133,"column":492,"offset":5095},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":135,"column":4,"offset":5102},"end":{"line":135,"column":9,"offset":5107},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":5099},"end":{"line":135,"column":9,"offset":5107},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Elasticsearch provides a way through bool query to combine the multiple query types into a single query with ","position":{"start":{"line":137,"column":1,"offset":5111},"end":{"line":137,"column":110,"offset":5220},"indent":[]}},{"type":"inlineCode","value":"and","position":{"start":{"line":137,"column":110,"offset":5220},"end":{"line":137,"column":115,"offset":5225},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":137,"column":115,"offset":5225},"end":{"line":137,"column":117,"offset":5227},"indent":[]}},{"type":"inlineCode","value":"or","position":{"start":{"line":137,"column":117,"offset":5227},"end":{"line":137,"column":121,"offset":5231},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":137,"column":121,"offset":5231},"end":{"line":137,"column":127,"offset":5237},"indent":[]}},{"type":"inlineCode","value":"not","position":{"start":{"line":137,"column":127,"offset":5237},"end":{"line":137,"column":132,"offset":5242},"indent":[]}},{"type":"text","value":" logic.","position":{"start":{"line":137,"column":132,"offset":5242},"end":{"line":137,"column":139,"offset":5249},"indent":[]}}],"position":{"start":{"line":137,"column":1,"offset":5111},"end":{"line":137,"column":139,"offset":5249},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#bool-query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Bool Query","position":{"start":{"line":139,"column":5,"offset":5257},"end":{"line":139,"column":15,"offset":5267},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":5253},"end":{"line":139,"column":15,"offset":5267},"indent":[]},"data":{"id":"bool-query","htmlAttributes":{"id":"bool-query"},"hProperties":{"id":"bool-query"}}},{"type":"paragraph","children":[{"type":"text","value":"The bool query is composed of four clauses","position":{"start":{"line":141,"column":1,"offset":5271},"end":{"line":141,"column":43,"offset":5313},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":141,"column":43,"offset":5313},"end":{"line":141,"column":45,"offset":5315},"indent":[]}},{"type":"text","value":"query","position":{"start":{"line":141,"column":45,"offset":5315},"end":{"line":141,"column":50,"offset":5320},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":141,"column":50,"offset":5320},"end":{"line":141,"column":52,"offset":5322},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":141,"column":52,"offset":5322},"end":{"line":141,"column":53,"offset":5323},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":5271},"end":{"line":141,"column":53,"offset":5323},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"must","position":{"start":{"line":143,"column":3,"offset":5329},"end":{"line":143,"column":9,"offset":5335},"indent":[]}},{"type":"text","value":": All of these clauses must match. The equivalent of ","position":{"start":{"line":143,"column":9,"offset":5335},"end":{"line":143,"column":62,"offset":5388},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"AND","position":{"start":{"line":143,"column":64,"offset":5390},"end":{"line":143,"column":67,"offset":5393},"indent":[]}}],"position":{"start":{"line":143,"column":62,"offset":5388},"end":{"line":143,"column":69,"offset":5395},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":143,"column":69,"offset":5395},"end":{"line":143,"column":70,"offset":5396},"indent":[]}}],"position":{"start":{"line":143,"column":3,"offset":5329},"end":{"line":143,"column":70,"offset":5396},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":5327},"end":{"line":143,"column":70,"offset":5396},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"must_not","position":{"start":{"line":144,"column":3,"offset":5400},"end":{"line":144,"column":13,"offset":5410},"indent":[]}},{"type":"text","value":": All of these clauses must not match. The equivalent of ","position":{"start":{"line":144,"column":13,"offset":5410},"end":{"line":144,"column":70,"offset":5467},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"NOT","position":{"start":{"line":144,"column":72,"offset":5469},"end":{"line":144,"column":75,"offset":5472},"indent":[]}}],"position":{"start":{"line":144,"column":70,"offset":5467},"end":{"line":144,"column":77,"offset":5474},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":144,"column":77,"offset":5474},"end":{"line":144,"column":78,"offset":5475},"indent":[]}}],"position":{"start":{"line":144,"column":3,"offset":5400},"end":{"line":144,"column":78,"offset":5475},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":5398},"end":{"line":144,"column":78,"offset":5475},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"should","position":{"start":{"line":145,"column":3,"offset":5479},"end":{"line":145,"column":11,"offset":5487},"indent":[]}},{"type":"text","value":": At least one of these clauses must match. The equivalent of ","position":{"start":{"line":145,"column":11,"offset":5487},"end":{"line":145,"column":73,"offset":5549},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"OR","position":{"start":{"line":145,"column":75,"offset":5551},"end":{"line":145,"column":77,"offset":5553},"indent":[]}}],"position":{"start":{"line":145,"column":73,"offset":5549},"end":{"line":145,"column":79,"offset":5555},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":145,"column":79,"offset":5555},"end":{"line":145,"column":80,"offset":5556},"indent":[]}}],"position":{"start":{"line":145,"column":3,"offset":5479},"end":{"line":145,"column":80,"offset":5556},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":5477},"end":{"line":145,"column":80,"offset":5556},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"filter","position":{"start":{"line":146,"column":3,"offset":5560},"end":{"line":146,"column":11,"offset":5568},"indent":[]}},{"type":"text","value":": The query must appear in matching documents. This query ignores the score and executes it in filter context.","position":{"start":{"line":146,"column":11,"offset":5568},"end":{"line":146,"column":121,"offset":5678},"indent":[]}}],"position":{"start":{"line":146,"column":3,"offset":5560},"end":{"line":146,"column":121,"offset":5678},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":5558},"end":{"line":146,"column":121,"offset":5678},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":5327},"end":{"line":146,"column":121,"offset":5678},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We will execute bool queries in non-scoring mode since we have disabled analyzer on ","position":{"start":{"line":148,"column":1,"offset":5682},"end":{"line":148,"column":85,"offset":5766},"indent":[]}},{"type":"inlineCode","value":"tags","position":{"start":{"line":148,"column":85,"offset":5766},"end":{"line":148,"column":91,"offset":5772},"indent":[]}},{"type":"text","value":" field. We will use ","position":{"start":{"line":148,"column":91,"offset":5772},"end":{"line":148,"column":111,"offset":5792},"indent":[]}},{"type":"inlineCode","value":"constant_score","position":{"start":{"line":148,"column":111,"offset":5792},"end":{"line":148,"column":127,"offset":5808},"indent":[]}},{"type":"text","value":" query to wrap everything with its filter clause.","position":{"start":{"line":148,"column":127,"offset":5808},"end":{"line":148,"column":176,"offset":5857},"indent":[]}}],"position":{"start":{"line":148,"column":1,"offset":5682},"end":{"line":148,"column":176,"offset":5857},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So our basic query json structure looks like this:","position":{"start":{"line":150,"column":1,"offset":5861},"end":{"line":150,"column":51,"offset":5911},"indent":[]}}],"position":{"start":{"line":150,"column":1,"offset":5861},"end":{"line":150,"column":51,"offset":5911},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n   \"query\" : {\n      \"constant_score\" : {\n         \"filter\" : {\n            \"bool\" : {\n              \"should\" : [...],\n              \"must_not\" : [...],\n              \"must\": [...],\n              \"filter\": [...]\n           }\n         }\n      }\n   }\n}</code></pre>\n      </div>","position":{"start":{"line":152,"column":1,"offset":5915},"end":{"line":167,"column":4,"offset":6194},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We will use ","position":{"start":{"line":169,"column":1,"offset":6198},"end":{"line":169,"column":13,"offset":6210},"indent":[]}},{"type":"inlineCode","value":"must","position":{"start":{"line":169,"column":13,"offset":6210},"end":{"line":169,"column":19,"offset":6216},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":169,"column":19,"offset":6216},"end":{"line":169,"column":24,"offset":6221},"indent":[]}},{"type":"inlineCode","value":"should","position":{"start":{"line":169,"column":24,"offset":6221},"end":{"line":169,"column":32,"offset":6229},"indent":[]}},{"type":"text","value":" clauses to filter the data. Through ","position":{"start":{"line":169,"column":32,"offset":6229},"end":{"line":169,"column":69,"offset":6266},"indent":[]}},{"type":"inlineCode","value":"must","position":{"start":{"line":169,"column":69,"offset":6266},"end":{"line":169,"column":75,"offset":6272},"indent":[]}},{"type":"text","value":" clause we can get the results which contain all the mentioned tags and through ","position":{"start":{"line":169,"column":75,"offset":6272},"end":{"line":169,"column":155,"offset":6352},"indent":[]}},{"type":"inlineCode","value":"should","position":{"start":{"line":169,"column":155,"offset":6352},"end":{"line":169,"column":163,"offset":6360},"indent":[]}},{"type":"text","value":" clause we can get the results which contain either of the mentioned tags.","position":{"start":{"line":169,"column":163,"offset":6360},"end":{"line":169,"column":237,"offset":6434},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":6198},"end":{"line":169,"column":237,"offset":6434},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#must-query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Must Query","position":{"start":{"line":171,"column":5,"offset":6442},"end":{"line":171,"column":15,"offset":6452},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":6438},"end":{"line":171,"column":15,"offset":6452},"indent":[]},"data":{"id":"must-query","htmlAttributes":{"id":"must-query"},"hProperties":{"id":"must-query"}}},{"type":"paragraph","children":[{"type":"text","value":"We will use ","position":{"start":{"line":173,"column":1,"offset":6456},"end":{"line":173,"column":13,"offset":6468},"indent":[]}},{"type":"inlineCode","value":"term","position":{"start":{"line":173,"column":13,"offset":6468},"end":{"line":173,"column":19,"offset":6474},"indent":[]}},{"type":"text","value":" query inside ","position":{"start":{"line":173,"column":19,"offset":6474},"end":{"line":173,"column":33,"offset":6488},"indent":[]}},{"type":"inlineCode","value":"must","position":{"start":{"line":173,"column":33,"offset":6488},"end":{"line":173,"column":39,"offset":6494},"indent":[]}},{"type":"text","value":" clause. The ","position":{"start":{"line":173,"column":39,"offset":6494},"end":{"line":173,"column":52,"offset":6507},"indent":[]}},{"type":"inlineCode","value":"term","position":{"start":{"line":173,"column":52,"offset":6507},"end":{"line":173,"column":58,"offset":6513},"indent":[]}},{"type":"text","value":" query finds documents that contain the exact term specified at the index time and ","position":{"start":{"line":173,"column":58,"offset":6513},"end":{"line":173,"column":141,"offset":6596},"indent":[]}},{"type":"inlineCode","value":"must","position":{"start":{"line":173,"column":141,"offset":6596},"end":{"line":173,"column":147,"offset":6602},"indent":[]}},{"type":"text","value":" query take ","position":{"start":{"line":173,"column":147,"offset":6602},"end":{"line":173,"column":159,"offset":6614},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"AND","position":{"start":{"line":173,"column":161,"offset":6616},"end":{"line":173,"column":164,"offset":6619},"indent":[]}}],"position":{"start":{"line":173,"column":159,"offset":6614},"end":{"line":173,"column":166,"offset":6621},"indent":[]}},{"type":"text","value":" of all the results.","position":{"start":{"line":173,"column":166,"offset":6621},"end":{"line":173,"column":186,"offset":6641},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":6456},"end":{"line":173,"column":186,"offset":6641},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n   \"query\" : {\n      \"constant_score\" : {\n         \"filter\" : {\n            \"bool\" : {\n              \"must\": [\n                {\n                  \"term\": {\n                    \"tags\": \"reddit\"\n                  }\n                },\n                {\n                  \"term\": {\n                    \"tags\": \"python\"\n                  }\n                }\n              ]\n           }\n         }\n      }\n   }\n}'</code></pre>\n      </div>","position":{"start":{"line":175,"column":1,"offset":6645},"end":{"line":198,"column":4,"offset":7136},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response","position":{"start":{"line":200,"column":6,"offset":7145},"end":{"line":200,"column":14,"offset":7153},"indent":[]}}],"position":{"start":{"line":200,"column":1,"offset":7140},"end":{"line":200,"column":14,"offset":7153},"indent":[]},"data":{"id":"response","htmlAttributes":{"id":"response"},"hProperties":{"id":"response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\": 20,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 1,\n    \"max_score\": 1,\n    \"hits\": [\n      {\n        \"_index\": \"tagwise\",\n        \"_type\": \"search\",\n        \"_id\": \"AVvR1yM3gPzdwFFNDvs7\",\n        \"_score\": 1,\n        \"_source\": {\n          \"repo\": \"reddit\",\n          \"tags\": [\n            \"javascript\",\n            \"python\",\n            \"reddit\"\n          ],\n          \"owner\": \"reddit\",\n          \"url\": \"https://github.com/reddit/reddit\",\n          \"stars\": 13053,\n          \"language\": \"Python\",\n          \"created-on\": \"2008-06-18T23:30:53Z\"\n        }\n      }\n    ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":202,"column":1,"offset":7157},"end":{"line":237,"column":4,"offset":7868},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#should-query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Should Query","position":{"start":{"line":239,"column":5,"offset":7876},"end":{"line":239,"column":17,"offset":7888},"indent":[]}}],"position":{"start":{"line":239,"column":1,"offset":7872},"end":{"line":239,"column":17,"offset":7888},"indent":[]},"data":{"id":"should-query","htmlAttributes":{"id":"should-query"},"hProperties":{"id":"should-query"}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":241,"column":1,"offset":7892},"end":{"line":241,"column":5,"offset":7896},"indent":[]}},{"type":"inlineCode","value":"should","position":{"start":{"line":241,"column":5,"offset":7896},"end":{"line":241,"column":13,"offset":7904},"indent":[]}},{"type":"text","value":" query in filter context fetches documents which match with at least one of the mentioned should queries.","position":{"start":{"line":241,"column":13,"offset":7904},"end":{"line":241,"column":118,"offset":8009},"indent":[]}}],"position":{"start":{"line":241,"column":1,"offset":7892},"end":{"line":241,"column":118,"offset":8009},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n   \"query\" : {\n      \"constant_score\" : {\n         \"filter\" : {\n            \"bool\" : {\n              \"should\": [\n                {\n                  \"term\": {\n                    \"tags\": \"reddit\"\n                  }\n                },\n                {\n                  \"term\": {\n                    \"tags\": \"python\"\n                  }\n                }\n              ]\n           }\n         }\n      }\n   }\n}'</code></pre>\n      </div>","position":{"start":{"line":243,"column":1,"offset":8013},"end":{"line":266,"column":4,"offset":8506},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#response-1","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response:","position":{"start":{"line":268,"column":6,"offset":8515},"end":{"line":268,"column":15,"offset":8524},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":8510},"end":{"line":268,"column":15,"offset":8524},"indent":[]},"data":{"id":"response-1","htmlAttributes":{"id":"response-1"},"hProperties":{"id":"response-1"}}},{"type":"paragraph","children":[{"type":"text","value":"As you can see in the response the first result contains only one of the mentioned tag - ","position":{"start":{"line":270,"column":1,"offset":8528},"end":{"line":270,"column":90,"offset":8617},"indent":[]}},{"type":"inlineCode","value":"python","position":{"start":{"line":270,"column":90,"offset":8617},"end":{"line":270,"column":98,"offset":8625},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":270,"column":98,"offset":8625},"end":{"line":270,"column":99,"offset":8626},"indent":[]}}],"position":{"start":{"line":270,"column":1,"offset":8528},"end":{"line":270,"column":99,"offset":8626},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\": 28,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 51,\n    \"max_score\": 1,\n    \"hits\": [\n      {\n        \"_index\": \"tagwise\",\n        \"_type\": \"search\",\n        \"_id\": \"AVvR1yI5hvsk2FETc3bb\",\n        \"_score\": 1,\n        \"_source\": {\n          \"repo\": \"awesome-python\",\n          \"tags\": [\n            \"awesome\",\n            \"collections\",\n            \"python\"\n          ],\n          \"owner\": \"vinta\",\n          \"url\": \"https://github.com/vinta/awesome-python\",\n          \"stars\": 33500,\n          \"language\": \"Python\",\n          \"created-on\": \"2014-06-27T21:00:06Z\"\n        }\n      }\n    ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":272,"column":1,"offset":8630},"end":{"line":307,"column":4,"offset":9358},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can also try out this query interactively  ","position":{"start":{"line":309,"column":1,"offset":9362},"end":{"line":309,"column":48,"offset":9409},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/mirage/#?input_state=XQAAAAIqBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmHCrDFs7iDKutPu_ClxcjCYOqUqELVPJ0G6sKj4u2r8c-T_5P6GlG49XYgfc2GYuMMRuSumifCxuSSCXtOAxs6Hde1p2VgSpnD3tfQtwbKtmlUV9FWFj1xXnSypOS15FxHENksJUxXCtYmd4iVjGL1bowAxrWfOuw1nuIcWHek4srAs1sTP0SOd6XPS6-blE0WjAQt4ce9B23dy_19xYCecMoWthMwrwWTFypBAO8Vcd9w4VuVo1KU8LBRzuRLhDL0KvF_VG62ehVISj4Ty-MiHt6Wpb2oKqBeU0_RAvNWfU1QZMs-TXvpXEXsEaIoh-foBQR6mza5cKEG3-8vZnMLBXW2J5sjEUeM7tqfjdgcDJCjC3ICatsg2wVEme8RVF3cFkkDDX0MTi9_t1eIrq8yU3AHAMZqvAUb5mkmRVWPKetqsE-i4GQyerYVnSY-EJXAPnnip8IXLbYRM8d4ocCXD3R20C7ZwGFGG0MuPIwmzwrf6hStk8ddjvTn81vDwIPDnr91ov42AvY0-7Kb5CpGG6dF2kFR7xcKxyVCxYfbE8Wl2f0RTH6jk-GS7HuqFdz4MEIWS63yeqQ-jajHPetrQP81BisYnXF281pV7ajxzqx8kkTagiyRT9mQsOR_oMVCT63LKNBeCSnffodl6mf_7Qo1M","children":[{"type":"text","value":"here. ","position":{"start":{"line":309,"column":49,"offset":9410},"end":{"line":309,"column":55,"offset":9416},"indent":[]}},{"type":"image","title":null,"url":"http://i.imgur.com/9bg2TMJ.png","alt":null,"position":{"start":{"line":309,"column":55,"offset":9416},"end":{"line":309,"column":90,"offset":9451},"indent":[]}}],"position":{"start":{"line":309,"column":48,"offset":9409},"end":{"line":309,"column":864,"offset":10225},"indent":[]}}],"position":{"start":{"line":309,"column":1,"offset":9362},"end":{"line":309,"column":864,"offset":10225},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":311,"column":1,"offset":10229},"end":{"line":311,"column":4,"offset":10232},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You should next read about ","position":{"start":{"line":313,"column":1,"offset":10236},"end":{"line":313,"column":28,"offset":10263},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/partial-tag-match-tbd.html","children":[{"type":"strong","children":[{"type":"text","value":"partial tag match","position":{"start":{"line":313,"column":31,"offset":10266},"end":{"line":313,"column":48,"offset":10283},"indent":[]}}],"position":{"start":{"line":313,"column":29,"offset":10264},"end":{"line":313,"column":50,"offset":10285},"indent":[]}}],"position":{"start":{"line":313,"column":28,"offset":10263},"end":{"line":313,"column":136,"offset":10371},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":313,"column":136,"offset":10371},"end":{"line":313,"column":137,"offset":10372},"indent":[]}}],"position":{"start":{"line":313,"column":1,"offset":10236},"end":{"line":313,"column":137,"offset":10372},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":314,"column":1,"offset":10374}}}},{"id":"transformer-remark-markdown-ast-c2fba23ef833908338da8c003d1c10dd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: tagwise-search-introduction\ntitle: \"Tagwise search: Introduction\"\nlayout: tutorial\nsectionid: tagwise-search-introduction\npermalink: tagwise-search/introduction.html\nnext: exact-match.html\nnextTitle: \"Exact Tag Match\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":9,"column":4,"offset":237},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-build-tag-wise-search-with-elasticsearch","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to build tag wise search with Elasticsearch?","position":{"start":{"line":11,"column":5,"offset":245},"end":{"line":11,"column":53,"offset":293},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":241},"end":{"line":11,"column":53,"offset":293},"indent":[]},"data":{"id":"how-to-build-tag-wise-search-with-elasticsearch","htmlAttributes":{"id":"how-to-build-tag-wise-search-with-elasticsearch"},"hProperties":{"id":"how-to-build-tag-wise-search-with-elasticsearch"}}},{"type":"paragraph","children":[{"type":"text","value":"A tag is a label or metadata used on social networks and blogging services which makes it easier for users to find the data with a specific theme or content. Also, it can be useful to filter data according to single or multiple categories.","position":{"start":{"line":13,"column":1,"offset":297},"end":{"line":13,"column":240,"offset":536},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":297},"end":{"line":13,"column":240,"offset":536},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this chapter, we’re going to build tag wise search very similar to Github’s. We will also show you how to do multiple tag searching and partial tag match.","position":{"start":{"line":15,"column":1,"offset":540},"end":{"line":15,"column":158,"offset":697},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":540},"end":{"line":15,"column":158,"offset":697},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will use ","position":{"start":{"line":17,"column":1,"offset":701},"end":{"line":17,"column":13,"offset":713},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/products/elasticsearch","children":[{"type":"text","value":"Elasticsearch","position":{"start":{"line":17,"column":14,"offset":714},"end":{"line":17,"column":27,"offset":727},"indent":[]}}],"position":{"start":{"line":17,"column":13,"offset":713},"end":{"line":17,"column":75,"offset":775},"indent":[]}},{"type":"text","value":" as our search engine and the index (and dataset) is hosted on an ","position":{"start":{"line":17,"column":75,"offset":775},"end":{"line":17,"column":141,"offset":841},"indent":[]}},{"type":"link","title":null,"url":"https://appbase.io","children":[{"type":"text","value":"appbase.io","position":{"start":{"line":17,"column":142,"offset":842},"end":{"line":17,"column":152,"offset":852},"indent":[]}}],"position":{"start":{"line":17,"column":141,"offset":841},"end":{"line":17,"column":173,"offset":873},"indent":[]}},{"type":"text","value":" app.","position":{"start":{"line":17,"column":173,"offset":873},"end":{"line":17,"column":178,"offset":878},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":701},"end":{"line":17,"column":178,"offset":878},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#table-of-contents","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Table of Contents","position":{"start":{"line":19,"column":5,"offset":886},"end":{"line":19,"column":22,"offset":903},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":882},"end":{"line":19,"column":22,"offset":903},"indent":[]},"data":{"id":"table-of-contents","htmlAttributes":{"id":"table-of-contents"},"hProperties":{"id":"table-of-contents"}}},{"type":"table","align":[null,null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Index","position":{"start":{"line":21,"column":3,"offset":909},"end":{"line":21,"column":8,"offset":914},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":909},"end":{"line":21,"column":12,"offset":918},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Title","position":{"start":{"line":21,"column":15,"offset":921},"end":{"line":21,"column":20,"offset":926},"indent":[]}}],"position":{"start":{"line":21,"column":15,"offset":921},"end":{"line":21,"column":23,"offset":929},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Description","position":{"start":{"line":21,"column":26,"offset":932},"end":{"line":21,"column":37,"offset":943},"indent":[]}}],"position":{"start":{"line":21,"column":26,"offset":932},"end":{"line":21,"column":37,"offset":943},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":907},"end":{"line":21,"column":39,"offset":945},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"1","position":{"start":{"line":23,"column":3,"offset":988},"end":{"line":23,"column":4,"offset":989},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":988},"end":{"line":23,"column":10,"offset":995},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/exact-match.html","children":[{"type":"text","value":"Exact Match","position":{"start":{"line":23,"column":14,"offset":999},"end":{"line":23,"column":25,"offset":1010},"indent":[]}}],"position":{"start":{"line":23,"column":13,"offset":998},"end":{"line":23,"column":101,"offset":1086},"indent":[]}}],"position":{"start":{"line":23,"column":13,"offset":998},"end":{"line":23,"column":101,"offset":1086},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to build a tag wise search similar to Github’s.","position":{"start":{"line":23,"column":104,"offset":1089},"end":{"line":23,"column":155,"offset":1140},"indent":[]}}],"position":{"start":{"line":23,"column":104,"offset":1089},"end":{"line":23,"column":155,"offset":1140},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":986},"end":{"line":23,"column":157,"offset":1142},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"2","position":{"start":{"line":24,"column":3,"offset":1146},"end":{"line":24,"column":4,"offset":1147},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":1146},"end":{"line":24,"column":10,"offset":1153},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/exact-match.html","children":[{"type":"text","value":"Multiple Tag Match","position":{"start":{"line":24,"column":14,"offset":1157},"end":{"line":24,"column":32,"offset":1175},"indent":[]}}],"position":{"start":{"line":24,"column":13,"offset":1156},"end":{"line":24,"column":108,"offset":1251},"indent":[]}}],"position":{"start":{"line":24,"column":13,"offset":1156},"end":{"line":24,"column":108,"offset":1251},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to find multiple exact values.","position":{"start":{"line":24,"column":111,"offset":1254},"end":{"line":24,"column":145,"offset":1288},"indent":[]}}],"position":{"start":{"line":24,"column":111,"offset":1254},"end":{"line":24,"column":145,"offset":1288},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1144},"end":{"line":24,"column":145,"offset":1288},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"3","position":{"start":{"line":25,"column":3,"offset":1292},"end":{"line":25,"column":4,"offset":1293},"indent":[]}}],"position":{"start":{"line":25,"column":3,"offset":1292},"end":{"line":25,"column":10,"offset":1299},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/partial-tag-match-tbh.html","children":[{"type":"text","value":"Partial Tag Match","position":{"start":{"line":25,"column":14,"offset":1303},"end":{"line":25,"column":31,"offset":1320},"indent":[]}}],"position":{"start":{"line":25,"column":13,"offset":1302},"end":{"line":25,"column":117,"offset":1406},"indent":[]}}],"position":{"start":{"line":25,"column":13,"offset":1302},"end":{"line":25,"column":117,"offset":1406},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to provide tag suggestions based on prefix.","position":{"start":{"line":25,"column":120,"offset":1409},"end":{"line":25,"column":167,"offset":1456},"indent":[]}}],"position":{"start":{"line":25,"column":120,"offset":1409},"end":{"line":25,"column":167,"offset":1456},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1290},"end":{"line":25,"column":169,"offset":1458},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":907},"end":{"line":25,"column":169,"offset":1458},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#live-demo","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Live Demo","position":{"start":{"line":27,"column":5,"offset":1466},"end":{"line":27,"column":14,"offset":1475},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1462},"end":{"line":27,"column":14,"offset":1475},"indent":[]},"data":{"id":"live-demo","htmlAttributes":{"id":"live-demo"},"hProperties":{"id":"live-demo"}}},{"type":"html","value":"<script async src=\"//jsfiddle.net/1b8tcxs4/3/embed/\"></script>","position":{"start":{"line":28,"column":1,"offset":1477},"end":{"line":28,"column":63,"offset":1539},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://jsfiddle.net/1b8tcxs4/3/","children":[{"type":"text","value":"code","position":{"start":{"line":29,"column":2,"offset":1542},"end":{"line":29,"column":6,"offset":1546},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1541},"end":{"line":29,"column":41,"offset":1581},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":29,"column":41,"offset":1581},"end":{"line":30,"column":1,"offset":1583},"indent":[1]}},{"type":"strong","children":[{"type":"text","value":"TODO:","position":{"start":{"line":30,"column":3,"offset":1585},"end":{"line":30,"column":8,"offset":1590},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1583},"end":{"line":30,"column":10,"offset":1592},"indent":[]}},{"type":"text","value":" Embed JSFiddle demo","position":{"start":{"line":30,"column":10,"offset":1592},"end":{"line":30,"column":30,"offset":1612},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1541},"end":{"line":30,"column":30,"offset":1612},"indent":[1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":31,"column":1,"offset":1614}}}},{"id":"transformer-remark-markdown-ast-9dd5164528026bdddfb9b384a6b02626-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: auto-complete\ntitle: \"Auto Complete\"\nlayout: tutorial\nsectionid: auto-complete\npermalink: searchbar/auto-complete.html\nnext: suggestions.html\nnextTitle: \"Suggestions\"\nprev: multi-match.html\nprevTitle: \"Multi Match\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":11,"column":4,"offset":236},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":13,"column":1,"offset":240},"end":{"line":13,"column":41,"offset":280},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"how to build a search bar","position":{"start":{"line":13,"column":44,"offset":283},"end":{"line":13,"column":69,"offset":308},"indent":[]}}],"position":{"start":{"line":13,"column":42,"offset":281},"end":{"line":13,"column":71,"offset":310},"indent":[]}}],"position":{"start":{"line":13,"column":41,"offset":280},"end":{"line":13,"column":143,"offset":382},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":13,"column":143,"offset":382},"end":{"line":13,"column":144,"offset":383},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":240},"end":{"line":13,"column":144,"offset":383},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-build-a-search-as-you-type-autocompletion-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to build a search-as-you-type autocompletion view","position":{"start":{"line":15,"column":5,"offset":391},"end":{"line":15,"column":58,"offset":444},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":387},"end":{"line":15,"column":58,"offset":444},"indent":[]},"data":{"id":"how-to-build-a-search-as-you-type-autocompletion-view","htmlAttributes":{"id":"how-to-build-a-search-as-you-type-autocompletion-view"},"hProperties":{"id":"how-to-build-a-search-as-you-type-autocompletion-view"}}},{"type":"paragraph","children":[{"type":"text","value":"In this post, we will show how to provide an auto-completion of the inputs ","position":{"start":{"line":17,"column":1,"offset":448},"end":{"line":17,"column":76,"offset":523},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"as the user types","position":{"start":{"line":17,"column":78,"offset":525},"end":{"line":17,"column":95,"offset":542},"indent":[]}}],"position":{"start":{"line":17,"column":76,"offset":523},"end":{"line":17,"column":97,"offset":544},"indent":[]}},{"type":"text","value":" in a searchbar. We will be using a dataset containing a list of cities and countries and we will be building this feature using Elasticsearch’s ","position":{"start":{"line":17,"column":97,"offset":544},"end":{"line":17,"column":242,"offset":689},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"completion","position":{"start":{"line":17,"column":244,"offset":691},"end":{"line":17,"column":254,"offset":701},"indent":[]}}],"position":{"start":{"line":17,"column":242,"offset":689},"end":{"line":17,"column":256,"offset":703},"indent":[]}},{"type":"text","value":" type ","position":{"start":{"line":17,"column":256,"offset":703},"end":{"line":17,"column":262,"offset":709},"indent":[]}},{"type":"inlineCode","value":"field","position":{"start":{"line":17,"column":262,"offset":709},"end":{"line":17,"column":269,"offset":716},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":17,"column":269,"offset":716},"end":{"line":17,"column":270,"offset":717},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":448},"end":{"line":17,"column":270,"offset":717},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Note:","position":{"start":{"line":19,"column":1,"offset":721},"end":{"line":19,"column":8,"offset":728},"indent":[]}},{"type":"text","value":" Alternate approaches can be implemented using n-grams and prefix suggester algorithms. But speed is the most important aspect for this feature. We’re making suggestions while the user types, so results need to be shown to the user within milliseconds. When using the completion type, Elasticsearch indexes data into a trie like data structure ","position":{"start":{"line":19,"column":8,"offset":728},"end":{"line":19,"column":352,"offset":1072},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":19,"column":352,"offset":1072},"end":{"line":19,"column":354,"offset":1074},"indent":[]}},{"type":"text","value":"called FST","position":{"start":{"line":19,"column":354,"offset":1074},"end":{"line":19,"column":364,"offset":1084},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":19,"column":364,"offset":1084},"end":{"line":19,"column":366,"offset":1086},"indent":[]}},{"type":"text","value":" which is optimized for fast retrieval and memory usage.","position":{"start":{"line":19,"column":366,"offset":1086},"end":{"line":19,"column":422,"offset":1142},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":721},"end":{"line":19,"column":422,"offset":1142},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":21,"column":4,"offset":1149},"end":{"line":21,"column":21,"offset":1166},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1146},"end":{"line":21,"column":21,"offset":1166},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":23,"column":1,"offset":1170},"end":{"line":23,"column":171,"offset":1340},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1170},"end":{"line":23,"column":171,"offset":1340},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this section, we will specify the mappings for our two fields: city and country, with the necessary settings to enable auto-complete functionality.","position":{"start":{"line":25,"column":1,"offset":1344},"end":{"line":25,"column":151,"offset":1494},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1344},"end":{"line":25,"column":151,"offset":1494},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#updating-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Updating Mappings","position":{"start":{"line":27,"column":5,"offset":1502},"end":{"line":27,"column":22,"offset":1519},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1498},"end":{"line":27,"column":22,"offset":1519},"indent":[]},"data":{"id":"updating-mappings","htmlAttributes":{"id":"updating-mappings"},"hProperties":{"id":"updating-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"Next, we will update the mapping for the ","position":{"start":{"line":29,"column":1,"offset":1523},"end":{"line":29,"column":42,"offset":1564},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"city","position":{"start":{"line":29,"column":44,"offset":1566},"end":{"line":29,"column":48,"offset":1570},"indent":[]}}],"position":{"start":{"line":29,"column":42,"offset":1564},"end":{"line":29,"column":50,"offset":1572},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":29,"column":50,"offset":1572},"end":{"line":29,"column":55,"offset":1577},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"country","position":{"start":{"line":29,"column":57,"offset":1579},"end":{"line":29,"column":64,"offset":1586},"indent":[]}}],"position":{"start":{"line":29,"column":55,"offset":1577},"end":{"line":29,"column":66,"offset":1588},"indent":[]}},{"type":"text","value":" fields. We will exploit a very cool feature of Elasticsearch called ","position":{"start":{"line":29,"column":66,"offset":1588},"end":{"line":29,"column":135,"offset":1657},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/multi-fields.html","children":[{"type":"strong","children":[{"type":"text","value":"multi-fields","position":{"start":{"line":29,"column":138,"offset":1660},"end":{"line":29,"column":150,"offset":1672},"indent":[]}}],"position":{"start":{"line":29,"column":136,"offset":1658},"end":{"line":29,"column":152,"offset":1674},"indent":[]}}],"position":{"start":{"line":29,"column":135,"offset":1657},"end":{"line":29,"column":236,"offset":1758},"indent":[]}},{"type":"text","value":" in doing so. Multi-fields enable indexing the same field in different ways, thus allowing for multiple ways of querying without requiring any additional effort in indexing of the data.","position":{"start":{"line":29,"column":236,"offset":1758},"end":{"line":29,"column":421,"offset":1943},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1523},"end":{"line":29,"column":421,"offset":1943},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/_mapping/searchbar -d '{\n  \"properties\": {\n    \"city\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"city_autocomplete\": {\n          \"type\": \"completion\",\n          \"analyzer\": \"simple\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    },\n    \"country\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"country_autocomplete\": {\n          \"type\": \"completion\",\n          \"analyzer\": \"simple\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":31,"column":1,"offset":1947},"end":{"line":56,"column":4,"offset":2496},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Here, we have defined a multi-field for both ","position":{"start":{"line":58,"column":1,"offset":2500},"end":{"line":58,"column":46,"offset":2545},"indent":[]}},{"type":"inlineCode","value":"city","position":{"start":{"line":58,"column":46,"offset":2545},"end":{"line":58,"column":52,"offset":2551},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":58,"column":52,"offset":2551},"end":{"line":58,"column":57,"offset":2556},"indent":[]}},{"type":"inlineCode","value":"country","position":{"start":{"line":58,"column":57,"offset":2556},"end":{"line":58,"column":66,"offset":2565},"indent":[]}},{"type":"text","value":" fields. The ","position":{"start":{"line":58,"column":66,"offset":2565},"end":{"line":58,"column":79,"offset":2578},"indent":[]}},{"type":"inlineCode","value":"city_autocomplete","position":{"start":{"line":58,"column":79,"offset":2578},"end":{"line":58,"column":98,"offset":2597},"indent":[]}},{"type":"text","value":" field ","position":{"start":{"line":58,"column":98,"offset":2597},"end":{"line":58,"column":105,"offset":2604},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":58,"column":105,"offset":2604},"end":{"line":58,"column":107,"offset":2606},"indent":[]}},{"type":"text","value":"inner field","position":{"start":{"line":58,"column":107,"offset":2606},"end":{"line":58,"column":118,"offset":2617},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":58,"column":118,"offset":2617},"end":{"line":58,"column":120,"offset":2619},"indent":[]}},{"type":"text","value":" has a type ","position":{"start":{"line":58,"column":120,"offset":2619},"end":{"line":58,"column":132,"offset":2631},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"completion","position":{"start":{"line":58,"column":134,"offset":2633},"end":{"line":58,"column":144,"offset":2643},"indent":[]}}],"position":{"start":{"line":58,"column":132,"offset":2631},"end":{"line":58,"column":146,"offset":2645},"indent":[]}},{"type":"text","value":" while the ","position":{"start":{"line":58,"column":146,"offset":2645},"end":{"line":58,"column":157,"offset":2656},"indent":[]}},{"type":"inlineCode","value":"city","position":{"start":{"line":58,"column":157,"offset":2656},"end":{"line":58,"column":163,"offset":2662},"indent":[]}},{"type":"text","value":" field ","position":{"start":{"line":58,"column":163,"offset":2662},"end":{"line":58,"column":170,"offset":2669},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":58,"column":170,"offset":2669},"end":{"line":58,"column":172,"offset":2671},"indent":[]}},{"type":"text","value":"outer field","position":{"start":{"line":58,"column":172,"offset":2671},"end":{"line":58,"column":183,"offset":2682},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":58,"column":183,"offset":2682},"end":{"line":58,"column":185,"offset":2684},"indent":[]}},{"type":"text","value":" has a type ","position":{"start":{"line":58,"column":185,"offset":2684},"end":{"line":58,"column":197,"offset":2696},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"text","position":{"start":{"line":58,"column":199,"offset":2698},"end":{"line":58,"column":203,"offset":2702},"indent":[]}}],"position":{"start":{"line":58,"column":197,"offset":2696},"end":{"line":58,"column":205,"offset":2704},"indent":[]}},{"type":"text","value":" and both are indexed simultaneously. We also use the ","position":{"start":{"line":58,"column":205,"offset":2704},"end":{"line":58,"column":259,"offset":2758},"indent":[]}},{"type":"inlineCode","value":"simple","position":{"start":{"line":58,"column":259,"offset":2758},"end":{"line":58,"column":267,"offset":2766},"indent":[]}},{"type":"text","value":" analyzer that tokenizes the text as is ","position":{"start":{"line":58,"column":267,"offset":2766},"end":{"line":58,"column":307,"offset":2806},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":58,"column":307,"offset":2806},"end":{"line":58,"column":309,"offset":2808},"indent":[]}},{"type":"text","value":"i.e. no white space splitting","position":{"start":{"line":58,"column":309,"offset":2808},"end":{"line":58,"column":338,"offset":2837},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":58,"column":338,"offset":2837},"end":{"line":58,"column":340,"offset":2839},"indent":[]}},{"type":"text","value":" and applies a lowercase filter for both indexing and searching on the ","position":{"start":{"line":58,"column":340,"offset":2839},"end":{"line":58,"column":411,"offset":2910},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":58,"column":411,"offset":2910},"end":{"line":58,"column":413,"offset":2912},"indent":[]}},{"type":"text","value":"_","position":{"start":{"line":58,"column":413,"offset":2912},"end":{"line":58,"column":415,"offset":2914},"indent":[]}},{"type":"text","value":"autocomplete inner fields.","position":{"start":{"line":58,"column":415,"offset":2914},"end":{"line":58,"column":441,"offset":2940},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2500},"end":{"line":58,"column":441,"offset":2940},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-indexing","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Indexing","position":{"start":{"line":60,"column":4,"offset":2947},"end":{"line":60,"column":17,"offset":2960},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":2944},"end":{"line":60,"column":17,"offset":2960},"indent":[]},"data":{"id":"data-indexing","htmlAttributes":{"id":"data-indexing"},"hProperties":{"id":"data-indexing"}}},{"type":"paragraph","children":[{"type":"text","value":"As you can see, while indexing the data, we only need to insert the ","position":{"start":{"line":62,"column":1,"offset":2964},"end":{"line":62,"column":69,"offset":3032},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"city","position":{"start":{"line":62,"column":71,"offset":3034},"end":{"line":62,"column":75,"offset":3038},"indent":[]}}],"position":{"start":{"line":62,"column":69,"offset":3032},"end":{"line":62,"column":77,"offset":3040},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":62,"column":77,"offset":3040},"end":{"line":62,"column":82,"offset":3045},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"country","position":{"start":{"line":62,"column":84,"offset":3047},"end":{"line":62,"column":91,"offset":3054},"indent":[]}}],"position":{"start":{"line":62,"column":82,"offset":3045},"end":{"line":62,"column":93,"offset":3056},"indent":[]}},{"type":"text","value":" fields.","position":{"start":{"line":62,"column":93,"offset":3056},"end":{"line":62,"column":101,"offset":3064},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2964},"end":{"line":62,"column":101,"offset":3064},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>","position":{"start":{"line":64,"column":1,"offset":3068},"end":{"line":69,"column":4,"offset":3190},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":71,"column":4,"offset":3197},"end":{"line":71,"column":21,"offset":3214},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":3194},"end":{"line":71,"column":21,"offset":3214},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For better accessibility, we have indexed ~15,000 data points that can be viewed in the data browser ","position":{"start":{"line":73,"column":1,"offset":3218},"end":{"line":73,"column":102,"offset":3319},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&editable=false","children":[{"type":"text","value":"here. ","position":{"start":{"line":73,"column":103,"offset":3320},"end":{"line":73,"column":109,"offset":3326},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/rHOEixS.png","alt":null,"position":{"start":{"line":73,"column":109,"offset":3326},"end":{"line":73,"column":145,"offset":3362},"indent":[]}}],"position":{"start":{"line":73,"column":102,"offset":3319},"end":{"line":73,"column":498,"offset":3715},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":3218},"end":{"line":73,"column":498,"offset":3715},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":75,"column":4,"offset":3722},"end":{"line":75,"column":9,"offset":3727},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":3719},"end":{"line":75,"column":9,"offset":3727},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Next, we will move to the queries section. Here, we will be using the ","position":{"start":{"line":77,"column":1,"offset":3731},"end":{"line":77,"column":71,"offset":3801},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"completion","position":{"start":{"line":77,"column":73,"offset":3803},"end":{"line":77,"column":83,"offset":3813},"indent":[]}}],"position":{"start":{"line":77,"column":71,"offset":3801},"end":{"line":77,"column":85,"offset":3815},"indent":[]}},{"type":"text","value":" suggestor query for getting the autocomplete suggestions. You can read more about it ","position":{"start":{"line":77,"column":85,"offset":3815},"end":{"line":77,"column":171,"offset":3901},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters-completion.html","children":[{"type":"text","value":"here","position":{"start":{"line":77,"column":172,"offset":3902},"end":{"line":77,"column":176,"offset":3906},"indent":[]}}],"position":{"start":{"line":77,"column":171,"offset":3901},"end":{"line":77,"column":276,"offset":4006},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":77,"column":276,"offset":4006},"end":{"line":77,"column":277,"offset":4007},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":3731},"end":{"line":77,"column":277,"offset":4007},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?size=0&pretty\" -d '{\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"new y\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":79,"column":1,"offset":4011},"end":{"line":90,"column":4,"offset":4246},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Here, ","position":{"start":{"line":92,"column":1,"offset":4250},"end":{"line":92,"column":7,"offset":4256},"indent":[]}},{"type":"inlineCode","value":"text","position":{"start":{"line":92,"column":7,"offset":4256},"end":{"line":92,"column":13,"offset":4262},"indent":[]}},{"type":"text","value":" is the actual text that the user has typed so far and ","position":{"start":{"line":92,"column":13,"offset":4262},"end":{"line":92,"column":68,"offset":4317},"indent":[]}},{"type":"inlineCode","value":"completion","position":{"start":{"line":92,"column":68,"offset":4317},"end":{"line":92,"column":80,"offset":4329},"indent":[]}},{"type":"text","value":" contains the field in which Elasticsearch will look for completion suggestions.","position":{"start":{"line":92,"column":80,"offset":4329},"end":{"line":92,"column":160,"offset":4409},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":4250},"end":{"line":92,"column":160,"offset":4409},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response","position":{"start":{"line":94,"column":7,"offset":4419},"end":{"line":94,"column":15,"offset":4427},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":4413},"end":{"line":94,"column":15,"offset":4427},"indent":[]},"data":{"id":"response","htmlAttributes":{"id":"response"},"hProperties":{"id":"response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 20,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 15506,\n    \"max_score\" : 0.0,\n    \"hits\" : [ ]\n  },\n  \"suggest\" : {\n    \"city-suggest\" : [ {\n      \"text\" : \"new y\",\n      \"offset\" : 0,\n      \"length\" : 5,\n      \"options\" : [ {\n        \"text\" : \"New York\",\n        \"score\" : 1.0\n      } ]\n    } ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":96,"column":1,"offset":4431},"end":{"line":122,"column":4,"offset":4866},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Voila! We can see “New York” as the suggestion which we can now display in the search box.","position":{"start":{"line":124,"column":1,"offset":4870},"end":{"line":124,"column":91,"offset":4960},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":4870},"end":{"line":124,"column":91,"offset":4960},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#query-on-country","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query on Country","position":{"start":{"line":126,"column":6,"offset":4969},"end":{"line":126,"column":22,"offset":4985},"indent":[]}}],"position":{"start":{"line":126,"column":1,"offset":4964},"end":{"line":126,"column":22,"offset":4985},"indent":[]},"data":{"id":"query-on-country","htmlAttributes":{"id":"query-on-country"},"hProperties":{"id":"query-on-country"}}},{"type":"paragraph","children":[{"type":"text","value":"A similar query for suggestions on the ","position":{"start":{"line":128,"column":1,"offset":4989},"end":{"line":128,"column":40,"offset":5028},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"country","position":{"start":{"line":128,"column":42,"offset":5030},"end":{"line":128,"column":49,"offset":5037},"indent":[]}}],"position":{"start":{"line":128,"column":40,"offset":5028},"end":{"line":128,"column":51,"offset":5039},"indent":[]}},{"type":"text","value":" field would look like this:","position":{"start":{"line":128,"column":51,"offset":5039},"end":{"line":128,"column":79,"offset":5067},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":4989},"end":{"line":128,"column":79,"offset":5067},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?size=0&pretty\" -d '{\n  \"suggest\": {\n    \"country-suggest\": {\n      \"text\": \"united st\",\n      \"completion\": {\n        \"field\": \"country.country_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":130,"column":1,"offset":5071},"end":{"line":141,"column":4,"offset":5319},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#query-on-both-city-and-country","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query on both City and Country","position":{"start":{"line":143,"column":6,"offset":5328},"end":{"line":143,"column":36,"offset":5358},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":5323},"end":{"line":143,"column":36,"offset":5358},"indent":[]},"data":{"id":"query-on-both-city-and-country","htmlAttributes":{"id":"query-on-both-city-and-country"},"hProperties":{"id":"query-on-both-city-and-country"}}},{"type":"paragraph","children":[{"type":"text","value":"What if we wanted to provide autocompletion on both ","position":{"start":{"line":145,"column":1,"offset":5362},"end":{"line":145,"column":53,"offset":5414},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"city","position":{"start":{"line":145,"column":55,"offset":5416},"end":{"line":145,"column":59,"offset":5420},"indent":[]}}],"position":{"start":{"line":145,"column":53,"offset":5414},"end":{"line":145,"column":61,"offset":5422},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":145,"column":61,"offset":5422},"end":{"line":145,"column":66,"offset":5427},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"country","position":{"start":{"line":145,"column":68,"offset":5429},"end":{"line":145,"column":75,"offset":5436},"indent":[]}}],"position":{"start":{"line":145,"column":66,"offset":5427},"end":{"line":145,"column":77,"offset":5438},"indent":[]}},{"type":"text","value":" fields at the same time?","position":{"start":{"line":145,"column":77,"offset":5438},"end":{"line":145,"column":102,"offset":5463},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":5362},"end":{"line":145,"column":102,"offset":5463},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?size=0&pretty\" -d '{\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"Chi\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    },\n    \"country-suggest\": {\n      \"text\": \"Chi\",\n      \"completion\": {\n        \"field\": \"country.country_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":147,"column":1,"offset":5467},"end":{"line":164,"column":4,"offset":5837},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#response-1","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response","position":{"start":{"line":166,"column":7,"offset":5847},"end":{"line":166,"column":15,"offset":5855},"indent":[]}}],"position":{"start":{"line":166,"column":1,"offset":5841},"end":{"line":166,"column":15,"offset":5855},"indent":[]},"data":{"id":"response-1","htmlAttributes":{"id":"response-1"},"hProperties":{"id":"response-1"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 49,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 2,\n    \"successful\" : 2,\n    \"skipped\" : 0,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 0,\n    \"max_score\" : 0.0,\n    \"hits\" : [ ]\n  },\n  \"suggest\" : {\n    \"city-suggest\" : [\n      {\n        \"text\" : \"Chi\",\n        \"offset\" : 0,\n        \"length\" : 3,\n        \"options\" : [\n          {\n            \"text\" : \"Chiajna\",\n            \"_index\" : \"normal_searchbar\",\n            \"_type\" : \"searchbar\",\n            \"_id\" : \"AWDMLdpE5Q83Zq9GY7SX\",\n            \"_score\" : 1.0,\n            \"_source\" : {\n              \"city\" : \"Chiajna\",\n              \"country\" : \"Romania\"\n            }\n          }\n        ]\n      }\n    ],\n    \"country-suggest\" : [\n      {\n        \"text\" : \"Chi\",\n        \"offset\" : 0,\n        \"length\" : 3,\n        \"options\" : [\n          {\n            \"text\" : \"Chile\",\n            \"_index\" : \"normal_searchbar\",\n            \"_type\" : \"searchbar\",\n            \"_id\" : \"AWDMLep65Q83Zq9GY7hi\",\n            \"_score\" : 1.0,\n            \"_source\" : {\n              \"city\" : \"ViÃÂÃÂ±a del Mar\",\n              \"country\" : \"Chile\"\n            }\n          }\n        ]\n      }\n    ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":168,"column":1,"offset":5859},"end":{"line":226,"column":4,"offset":7095},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We can then pick the item with the highest score value: “China” in this case, and display it in the searchbox’s input section.","position":{"start":{"line":228,"column":1,"offset":7099},"end":{"line":228,"column":127,"offset":7225},"indent":[]}}],"position":{"start":{"line":228,"column":1,"offset":7099},"end":{"line":228,"column":127,"offset":7225},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can also use the suggest query for building a search as-you-type suggestions feature by arranging the other items in a dropdown list. However, doing so has some limitations.","position":{"start":{"line":230,"column":1,"offset":7229},"end":{"line":230,"column":177,"offset":7405},"indent":[]}}],"position":{"start":{"line":230,"column":1,"offset":7229},"end":{"line":230,"column":177,"offset":7405},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"We can’t detect suggestions on a full-text phrase if the user starts typing from the middle of the phrase or even the middle of the word.","position":{"start":{"line":232,"column":4,"offset":7412},"end":{"line":232,"column":141,"offset":7549},"indent":[]}}],"position":{"start":{"line":232,"column":4,"offset":7412},"end":{"line":232,"column":141,"offset":7549},"indent":[]}}],"position":{"start":{"line":232,"column":1,"offset":7409},"end":{"line":232,"column":141,"offset":7549},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Prior to v5 of Elasticsearch, we couldn’t show additional fields of the document as a part of the suggestion UI ","position":{"start":{"line":233,"column":4,"offset":7554},"end":{"line":233,"column":116,"offset":7666},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":233,"column":116,"offset":7666},"end":{"line":233,"column":118,"offset":7668},"indent":[]}},{"type":"text","value":"like images","position":{"start":{"line":233,"column":118,"offset":7668},"end":{"line":233,"column":129,"offset":7679},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":233,"column":129,"offset":7679},"end":{"line":233,"column":131,"offset":7681},"indent":[]}},{"type":"text","value":" since the ","position":{"start":{"line":233,"column":131,"offset":7681},"end":{"line":233,"column":142,"offset":7692},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"completion suggest","position":{"start":{"line":233,"column":144,"offset":7694},"end":{"line":233,"column":162,"offset":7712},"indent":[]}}],"position":{"start":{"line":233,"column":142,"offset":7692},"end":{"line":233,"column":164,"offset":7714},"indent":[]}},{"type":"text","value":" query only returns the field in question.","position":{"start":{"line":233,"column":164,"offset":7714},"end":{"line":233,"column":206,"offset":7756},"indent":[]}}],"position":{"start":{"line":233,"column":4,"offset":7554},"end":{"line":233,"column":206,"offset":7756},"indent":[]}}],"position":{"start":{"line":233,"column":1,"offset":7551},"end":{"line":233,"column":206,"offset":7756},"indent":[]}}],"position":{"start":{"line":232,"column":1,"offset":7409},"end":{"line":233,"column":206,"offset":7756},"indent":[1]}},{"type":"thematicBreak","position":{"start":{"line":235,"column":1,"offset":7760},"end":{"line":235,"column":4,"offset":7763},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Next, we talk about building a ","position":{"start":{"line":237,"column":1,"offset":7767},"end":{"line":237,"column":32,"offset":7798},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/suggestions.html","children":[{"type":"strong","children":[{"type":"text","value":"search as-you-type suggestions","position":{"start":{"line":237,"column":35,"offset":7801},"end":{"line":237,"column":65,"offset":7831},"indent":[]}}],"position":{"start":{"line":237,"column":33,"offset":7799},"end":{"line":237,"column":67,"offset":7833},"indent":[]}}],"position":{"start":{"line":237,"column":32,"offset":7798},"end":{"line":237,"column":138,"offset":7904},"indent":[]}},{"type":"text","value":" feature using n-grams.","position":{"start":{"line":237,"column":138,"offset":7904},"end":{"line":237,"column":161,"offset":7927},"indent":[]}}],"position":{"start":{"line":237,"column":1,"offset":7767},"end":{"line":237,"column":161,"offset":7927},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":238,"column":1,"offset":7929}}}},{"id":"transformer-remark-markdown-ast-b0fa67b023409f6f52a954cbb77abdb9-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: introduction\ntitle: \"Introduction\"\nlayout: tutorial\nsectionid: introduction\npermalink: searchbar/introduction.html\nnext: simple-match.html\nnextTitle: \"Simple Match\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":9,"column":4,"offset":184},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-build-a-search-bar-with-elasticsearch","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to build a search bar with Elasticsearch?","position":{"start":{"line":11,"column":5,"offset":192},"end":{"line":11,"column":50,"offset":237},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":188},"end":{"line":11,"column":50,"offset":237},"indent":[]},"data":{"id":"how-to-build-a-search-bar-with-elasticsearch","htmlAttributes":{"id":"how-to-build-a-search-bar-with-elasticsearch"},"hProperties":{"id":"how-to-build-a-search-bar-with-elasticsearch"}}},{"type":"paragraph","children":[{"type":"text","value":"This chapter provides a simple introduction and guide to building a search bar for your e-commerce app, user data, or any structured data set that is meant for keyword based queries.","position":{"start":{"line":13,"column":1,"offset":241},"end":{"line":13,"column":183,"offset":423},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":241},"end":{"line":13,"column":183,"offset":423},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will use ","position":{"start":{"line":15,"column":1,"offset":427},"end":{"line":15,"column":13,"offset":439},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/products/elasticsearch","children":[{"type":"text","value":"Elasticsearch","position":{"start":{"line":15,"column":14,"offset":440},"end":{"line":15,"column":27,"offset":453},"indent":[]}}],"position":{"start":{"line":15,"column":13,"offset":439},"end":{"line":15,"column":75,"offset":501},"indent":[]}},{"type":"text","value":" as our search engine and the index (and dataset) is hosted on an ","position":{"start":{"line":15,"column":75,"offset":501},"end":{"line":15,"column":141,"offset":567},"indent":[]}},{"type":"link","title":null,"url":"https://appbase.io","children":[{"type":"text","value":"appbase.io","position":{"start":{"line":15,"column":142,"offset":568},"end":{"line":15,"column":152,"offset":578},"indent":[]}}],"position":{"start":{"line":15,"column":141,"offset":567},"end":{"line":15,"column":173,"offset":599},"indent":[]}},{"type":"text","value":" app.","position":{"start":{"line":15,"column":173,"offset":599},"end":{"line":15,"column":178,"offset":604},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":427},"end":{"line":15,"column":178,"offset":604},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"https://i.imgur.com/UNkzVkU.jpg","alt":null,"position":{"start":{"line":17,"column":1,"offset":608},"end":{"line":17,"column":37,"offset":644},"indent":[]}},{"type":"break","position":{"start":{"line":17,"column":37,"offset":644},"end":{"line":18,"column":1,"offset":648},"indent":[1]}},{"type":"strong","children":[{"type":"text","value":"Image:","position":{"start":{"line":18,"column":3,"offset":650},"end":{"line":18,"column":9,"offset":656},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":648},"end":{"line":18,"column":11,"offset":658},"indent":[]}},{"type":"text","value":" Search bars from popular websites","position":{"start":{"line":18,"column":11,"offset":658},"end":{"line":18,"column":45,"offset":692},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":608},"end":{"line":18,"column":45,"offset":692},"indent":[1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#table-of-contents","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Table of Contents","position":{"start":{"line":20,"column":5,"offset":700},"end":{"line":20,"column":22,"offset":717},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":696},"end":{"line":20,"column":22,"offset":717},"indent":[]},"data":{"id":"table-of-contents","htmlAttributes":{"id":"table-of-contents"},"hProperties":{"id":"table-of-contents"}}},{"type":"table","align":[null,null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Index","position":{"start":{"line":23,"column":3,"offset":725},"end":{"line":23,"column":8,"offset":730},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":725},"end":{"line":23,"column":12,"offset":734},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Title","position":{"start":{"line":23,"column":15,"offset":737},"end":{"line":23,"column":20,"offset":742},"indent":[]}}],"position":{"start":{"line":23,"column":15,"offset":737},"end":{"line":23,"column":23,"offset":745},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Description","position":{"start":{"line":23,"column":26,"offset":748},"end":{"line":23,"column":37,"offset":759},"indent":[]}}],"position":{"start":{"line":23,"column":26,"offset":748},"end":{"line":23,"column":37,"offset":759},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":723},"end":{"line":23,"column":39,"offset":761},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"1","position":{"start":{"line":25,"column":3,"offset":804},"end":{"line":25,"column":4,"offset":805},"indent":[]}}],"position":{"start":{"line":25,"column":3,"offset":804},"end":{"line":25,"column":13,"offset":814},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/simple-match.html","children":[{"type":"text","value":"Simple Match","position":{"start":{"line":25,"column":17,"offset":818},"end":{"line":25,"column":29,"offset":830},"indent":[]}}],"position":{"start":{"line":25,"column":16,"offset":817},"end":{"line":25,"column":101,"offset":902},"indent":[]}}],"position":{"start":{"line":25,"column":16,"offset":817},"end":{"line":25,"column":101,"offset":902},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to build a simple match based search.","position":{"start":{"line":25,"column":104,"offset":905},"end":{"line":25,"column":145,"offset":946},"indent":[]}}],"position":{"start":{"line":25,"column":104,"offset":905},"end":{"line":25,"column":145,"offset":946},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":802},"end":{"line":25,"column":147,"offset":948},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"2","position":{"start":{"line":26,"column":3,"offset":952},"end":{"line":26,"column":4,"offset":953},"indent":[]}}],"position":{"start":{"line":26,"column":3,"offset":952},"end":{"line":26,"column":10,"offset":959},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/multi-match.html","children":[{"type":"text","value":"Multi Match","position":{"start":{"line":26,"column":14,"offset":963},"end":{"line":26,"column":25,"offset":974},"indent":[]}}],"position":{"start":{"line":26,"column":13,"offset":962},"end":{"line":26,"column":96,"offset":1045},"indent":[]}}],"position":{"start":{"line":26,"column":13,"offset":962},"end":{"line":26,"column":96,"offset":1045},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to search on multiple fields.","position":{"start":{"line":26,"column":99,"offset":1048},"end":{"line":26,"column":132,"offset":1081},"indent":[]}}],"position":{"start":{"line":26,"column":99,"offset":1048},"end":{"line":26,"column":132,"offset":1081},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":950},"end":{"line":26,"column":134,"offset":1083},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"3","position":{"start":{"line":27,"column":3,"offset":1087},"end":{"line":27,"column":4,"offset":1088},"indent":[]}}],"position":{"start":{"line":27,"column":3,"offset":1087},"end":{"line":27,"column":10,"offset":1094},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/auto-complete.html","children":[{"type":"text","value":"Auto Completion","position":{"start":{"line":27,"column":14,"offset":1098},"end":{"line":27,"column":29,"offset":1113},"indent":[]}}],"position":{"start":{"line":27,"column":13,"offset":1097},"end":{"line":27,"column":102,"offset":1186},"indent":[]}}],"position":{"start":{"line":27,"column":13,"offset":1097},"end":{"line":27,"column":102,"offset":1186},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to add a search-as-you-type autocompletion view.","position":{"start":{"line":27,"column":105,"offset":1189},"end":{"line":27,"column":157,"offset":1241},"indent":[]}}],"position":{"start":{"line":27,"column":105,"offset":1189},"end":{"line":27,"column":157,"offset":1241},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1085},"end":{"line":27,"column":159,"offset":1243},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"4","position":{"start":{"line":28,"column":3,"offset":1247},"end":{"line":28,"column":4,"offset":1248},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":1247},"end":{"line":28,"column":10,"offset":1254},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/suggestions.html","children":[{"type":"text","value":"Suggestions","position":{"start":{"line":28,"column":14,"offset":1258},"end":{"line":28,"column":25,"offset":1269},"indent":[]}}],"position":{"start":{"line":28,"column":13,"offset":1257},"end":{"line":28,"column":96,"offset":1340},"indent":[]}}],"position":{"start":{"line":28,"column":13,"offset":1257},"end":{"line":28,"column":96,"offset":1340},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"How to add a search-as-you-type suggestions view.","position":{"start":{"line":28,"column":99,"offset":1343},"end":{"line":28,"column":148,"offset":1392},"indent":[]}}],"position":{"start":{"line":28,"column":99,"offset":1343},"end":{"line":28,"column":148,"offset":1392},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1245},"end":{"line":28,"column":150,"offset":1394},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"5","position":{"start":{"line":29,"column":3,"offset":1398},"end":{"line":29,"column":4,"offset":1399},"indent":[]}}],"position":{"start":{"line":29,"column":3,"offset":1398},"end":{"line":29,"column":10,"offset":1405},"indent":[]}},{"type":"tableCell","children":[{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/searchbar.html","children":[{"type":"text","value":"Searchbar","position":{"start":{"line":29,"column":14,"offset":1409},"end":{"line":29,"column":23,"offset":1418},"indent":[]}}],"position":{"start":{"line":29,"column":13,"offset":1408},"end":{"line":29,"column":92,"offset":1487},"indent":[]}}],"position":{"start":{"line":29,"column":13,"offset":1408},"end":{"line":29,"column":92,"offset":1487},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Combining all the above steps to build the search bar functionality.","position":{"start":{"line":29,"column":95,"offset":1490},"end":{"line":29,"column":163,"offset":1558},"indent":[]}}],"position":{"start":{"line":29,"column":95,"offset":1490},"end":{"line":29,"column":163,"offset":1558},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1396},"end":{"line":29,"column":165,"offset":1560},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":723},"end":{"line":29,"column":165,"offset":1560},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#live-demo","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Live Demo","position":{"start":{"line":31,"column":5,"offset":1568},"end":{"line":31,"column":14,"offset":1577},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1564},"end":{"line":31,"column":14,"offset":1577},"indent":[]},"data":{"id":"live-demo","htmlAttributes":{"id":"live-demo"},"hProperties":{"id":"live-demo"}}},{"type":"html","value":"<script async src=\"//jsfiddle.net/1b8tcxs4/3/embed/\"></script>","position":{"start":{"line":32,"column":1,"offset":1579},"end":{"line":32,"column":63,"offset":1641},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://jsfiddle.net/1b8tcxs4/3/","children":[{"type":"text","value":"code","position":{"start":{"line":33,"column":2,"offset":1644},"end":{"line":33,"column":6,"offset":1648},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1643},"end":{"line":33,"column":41,"offset":1683},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":33,"column":41,"offset":1683},"end":{"line":34,"column":1,"offset":1685},"indent":[1]}},{"type":"strong","children":[{"type":"text","value":"TODO:","position":{"start":{"line":34,"column":3,"offset":1687},"end":{"line":34,"column":8,"offset":1692},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1685},"end":{"line":34,"column":10,"offset":1694},"indent":[]}},{"type":"text","value":" Embed JSFiddle demo","position":{"start":{"line":34,"column":10,"offset":1694},"end":{"line":34,"column":30,"offset":1714},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1643},"end":{"line":34,"column":30,"offset":1714},"indent":[1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":35,"column":1,"offset":1716}}}},{"id":"transformer-remark-markdown-ast-cc730ce79af2ec4a4c92eefbb267d6cd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: exact-tag-match\ntitle: \"Exact Tag Match\"\nlayout: tutorial\nsectionid: exact-tag-match\npermalink: tagwise-search/exact-match.html\nnext: arrays.html\nnextTitle: \"Arrays Datatype\"\nprev: introduction.html\nprevTitle: \"Tagwise search: Introduction\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":11,"column":4,"offset":262},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":13,"column":1,"offset":266},"end":{"line":13,"column":41,"offset":306},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"How to build tag wise search engine with Elasticsearch?","position":{"start":{"line":13,"column":44,"offset":309},"end":{"line":13,"column":99,"offset":364},"indent":[]}}],"position":{"start":{"line":13,"column":42,"offset":307},"end":{"line":13,"column":101,"offset":366},"indent":[]}}],"position":{"start":{"line":13,"column":41,"offset":306},"end":{"line":13,"column":178,"offset":443},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":266},"end":{"line":13,"column":178,"offset":443},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-do-a-tag-wise-search","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to do a tag wise search","position":{"start":{"line":15,"column":5,"offset":451},"end":{"line":15,"column":32,"offset":478},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":447},"end":{"line":15,"column":32,"offset":478},"indent":[]},"data":{"id":"how-to-do-a-tag-wise-search","htmlAttributes":{"id":"how-to-do-a-tag-wise-search"},"hProperties":{"id":"how-to-do-a-tag-wise-search"}}},{"type":"paragraph","children":[{"type":"text","value":"Elasticsearch supports queries and filters. Queries are useful within full-text search, where results depend on a relevance score. In general, filters are used for binary yes/no searches or within queries for exact value match. Think of filters as an equivalent to the WHERE clause in SQL. Filters are faster than queries because they do not calculate the relevance score and can be easily cached.","position":{"start":{"line":17,"column":1,"offset":482},"end":{"line":17,"column":398,"offset":879},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":482},"end":{"line":17,"column":398,"offset":879},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will be using a sample dataset containing the Github repository info, and we will be using a ","position":{"start":{"line":19,"column":1,"offset":883},"end":{"line":19,"column":97,"offset":979},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"term","position":{"start":{"line":19,"column":99,"offset":981},"end":{"line":19,"column":103,"offset":985},"indent":[]}}],"position":{"start":{"line":19,"column":97,"offset":979},"end":{"line":19,"column":105,"offset":987},"indent":[]}},{"type":"text","value":" query to perform a tag wise search.","position":{"start":{"line":19,"column":105,"offset":987},"end":{"line":19,"column":141,"offset":1023},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":883},"end":{"line":19,"column":141,"offset":1023},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":21,"column":5,"offset":1031},"end":{"line":21,"column":22,"offset":1048},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1027},"end":{"line":21,"column":22,"offset":1048},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":23,"column":1,"offset":1052},"end":{"line":23,"column":171,"offset":1222},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1052},"end":{"line":23,"column":171,"offset":1222},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By default Elasticsearch analyzes the data before storing it on disk. However, since we require an exact match of the data for repository tags, we will apply a ","position":{"start":{"line":25,"column":1,"offset":1226},"end":{"line":25,"column":161,"offset":1386},"indent":[]}},{"type":"inlineCode","value":"index: not_analyzed","position":{"start":{"line":25,"column":161,"offset":1386},"end":{"line":25,"column":182,"offset":1407},"indent":[]}},{"type":"text","value":" setting to prevent the tag field from being analyzed.","position":{"start":{"line":25,"column":182,"offset":1407},"end":{"line":25,"column":236,"offset":1461},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1226},"end":{"line":25,"column":236,"offset":1461},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will only specify the mapping for the ","position":{"start":{"line":27,"column":1,"offset":1465},"end":{"line":27,"column":42,"offset":1506},"indent":[]}},{"type":"inlineCode","value":"tags","position":{"start":{"line":27,"column":42,"offset":1506},"end":{"line":27,"column":48,"offset":1512},"indent":[]}},{"type":"text","value":" field. Elasticsearch will create mappings dynamically for the rest of the fields.","position":{"start":{"line":27,"column":48,"offset":1512},"end":{"line":27,"column":130,"offset":1594},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1465},"end":{"line":27,"column":130,"offset":1594},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#disable-analyzers-on-tags-field","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Disable analyzers on ","position":{"start":{"line":29,"column":5,"offset":1602},"end":{"line":29,"column":26,"offset":1623},"indent":[]}},{"type":"inlineCode","value":"tags","position":{"start":{"line":29,"column":26,"offset":1623},"end":{"line":29,"column":32,"offset":1629},"indent":[]}},{"type":"text","value":" field","position":{"start":{"line":29,"column":32,"offset":1629},"end":{"line":29,"column":38,"offset":1635},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1598},"end":{"line":29,"column":38,"offset":1635},"indent":[]},"data":{"id":"disable-analyzers-on-tags-field","htmlAttributes":{"id":"disable-analyzers-on-tags-field"},"hProperties":{"id":"disable-analyzers-on-tags-field"}}},{"type":"paragraph","children":[{"type":"text","value":"// TODO: Use Keyword and also explain the difference wrt Text.","position":{"start":{"line":31,"column":1,"offset":1639},"end":{"line":31,"column":63,"offset":1701},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1639},"end":{"line":31,"column":63,"offset":1701},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To store the data without analyzing it, we have to make ","position":{"start":{"line":33,"column":1,"offset":1705},"end":{"line":33,"column":57,"offset":1761},"indent":[]}},{"type":"inlineCode","value":"tags","position":{"start":{"line":33,"column":57,"offset":1761},"end":{"line":33,"column":63,"offset":1767},"indent":[]}},{"type":"text","value":" field ","position":{"start":{"line":33,"column":63,"offset":1767},"end":{"line":33,"column":70,"offset":1774},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"not","position":{"start":{"line":33,"column":72,"offset":1776},"end":{"line":33,"column":75,"offset":1779},"indent":[]}},{"type":"text","value":"_","position":{"start":{"line":33,"column":75,"offset":1779},"end":{"line":33,"column":77,"offset":1781},"indent":[]}},{"type":"text","value":"analyzed","position":{"start":{"line":33,"column":77,"offset":1781},"end":{"line":33,"column":85,"offset":1789},"indent":[]}}],"position":{"start":{"line":33,"column":70,"offset":1774},"end":{"line":33,"column":87,"offset":1791},"indent":[]}},{"type":"text","value":". By doing this, Elasticsearch will store the data as usual without any modifications.","position":{"start":{"line":33,"column":87,"offset":1791},"end":{"line":33,"column":173,"offset":1877},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1705},"end":{"line":33,"column":173,"offset":1877},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/_mapping/tagwise -d '{\n  \"properties\": {\n    \"tags\": {\n      \"type\": \"keyword\",\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":35,"column":1,"offset":1881},"end":{"line":43,"column":4,"offset":2018},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now, let’s index some data.","position":{"start":{"line":45,"column":1,"offset":2022},"end":{"line":45,"column":28,"offset":2049},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2022},"end":{"line":45,"column":28,"offset":2049},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-indexing","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Indexing","position":{"start":{"line":47,"column":4,"offset":2056},"end":{"line":47,"column":17,"offset":2069},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2053},"end":{"line":47,"column":17,"offset":2069},"indent":[]},"data":{"id":"data-indexing","htmlAttributes":{"id":"data-indexing"},"hProperties":{"id":"data-indexing"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/tagwise/1 -d '{\n  \"repo\" : \"reddit\",\n  \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n  \"owner\" : \"reddit\",\n  \"url\" : \"https://github.com/reddit/reddit\",\n  \"stars\" : 13053,\n  \"language\" : \"Python\",\n  \"created-on\" : \"2008-06-18T23:30:53Z\"\n}'</code></pre>\n      </div>","position":{"start":{"line":49,"column":1,"offset":2073},"end":{"line":59,"column":4,"offset":2360},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Voila! We indexed our first document with id ","position":{"start":{"line":61,"column":1,"offset":2364},"end":{"line":61,"column":46,"offset":2409},"indent":[]}},{"type":"inlineCode","value":"1","position":{"start":{"line":61,"column":46,"offset":2409},"end":{"line":61,"column":49,"offset":2412},"indent":[]}},{"type":"text","value":". We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.","position":{"start":{"line":61,"column":49,"offset":2412},"end":{"line":61,"column":173,"offset":2536},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":2364},"end":{"line":61,"column":173,"offset":2536},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":63,"column":4,"offset":2543},"end":{"line":63,"column":21,"offset":2560},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2540},"end":{"line":63,"column":21,"offset":2560},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser ","position":{"start":{"line":65,"column":1,"offset":2564},"end":{"line":65,"column":108,"offset":2671},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA","children":[{"type":"text","value":"here. ","position":{"start":{"line":65,"column":109,"offset":2672},"end":{"line":65,"column":115,"offset":2678},"indent":[]}},{"type":"image","title":null,"url":"http://i.imgur.com/x7nLB9s.png","alt":null,"position":{"start":{"line":65,"column":115,"offset":2678},"end":{"line":65,"column":150,"offset":2713},"indent":[]}}],"position":{"start":{"line":65,"column":108,"offset":2671},"end":{"line":65,"column":492,"offset":3055},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2564},"end":{"line":65,"column":492,"offset":3055},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":67,"column":4,"offset":3062},"end":{"line":67,"column":9,"offset":3067},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":3059},"end":{"line":67,"column":9,"offset":3067},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":69,"column":1,"offset":3071},"end":{"line":69,"column":5,"offset":3075},"indent":[]}},{"type":"inlineCode","value":"term","position":{"start":{"line":69,"column":5,"offset":3075},"end":{"line":69,"column":11,"offset":3081},"indent":[]}},{"type":"text","value":" query will look for the exact value that we specify. By itself, a ","position":{"start":{"line":69,"column":11,"offset":3081},"end":{"line":69,"column":78,"offset":3148},"indent":[]}},{"type":"inlineCode","value":"term","position":{"start":{"line":69,"column":78,"offset":3148},"end":{"line":69,"column":84,"offset":3154},"indent":[]}},{"type":"text","value":" query is simple. It accepts a field name and the value that we wish to find. Usually, when looking for an exact value, we don’t want to score the query. We just want to include/exclude documents, so we will use a ","position":{"start":{"line":69,"column":84,"offset":3154},"end":{"line":69,"column":298,"offset":3368},"indent":[]}},{"type":"inlineCode","value":"constant_score","position":{"start":{"line":69,"column":298,"offset":3368},"end":{"line":69,"column":314,"offset":3384},"indent":[]}},{"type":"text","value":" query to execute the term query in a non-scoring mode and apply a uniform score of one.","position":{"start":{"line":69,"column":314,"offset":3384},"end":{"line":69,"column":402,"offset":3472},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":3071},"end":{"line":69,"column":402,"offset":3472},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The final combination of a ","position":{"start":{"line":71,"column":1,"offset":3476},"end":{"line":71,"column":28,"offset":3503},"indent":[]}},{"type":"inlineCode","value":"constant_score","position":{"start":{"line":71,"column":28,"offset":3503},"end":{"line":71,"column":44,"offset":3519},"indent":[]}},{"type":"text","value":" query which contains a ","position":{"start":{"line":71,"column":44,"offset":3519},"end":{"line":71,"column":68,"offset":3543},"indent":[]}},{"type":"inlineCode","value":"term","position":{"start":{"line":71,"column":68,"offset":3543},"end":{"line":71,"column":74,"offset":3549},"indent":[]}},{"type":"text","value":" query will look like this:","position":{"start":{"line":71,"column":74,"offset":3549},"end":{"line":71,"column":101,"offset":3576},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":3476},"end":{"line":71,"column":101,"offset":3576},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/tagwise/_search?pretty -d '{\n  \"query\": {\n    \"constant_score\" : {\n      \"filter\" : {\n        \"term\" : {\n          \"tags\" : \"reddit\"\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":73,"column":1,"offset":3580},"end":{"line":85,"column":4,"offset":3786},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We used a ","position":{"start":{"line":87,"column":1,"offset":3790},"end":{"line":87,"column":11,"offset":3800},"indent":[]}},{"type":"inlineCode","value":"constant_score","position":{"start":{"line":87,"column":11,"offset":3800},"end":{"line":87,"column":27,"offset":3816},"indent":[]}},{"type":"text","value":" to use the ","position":{"start":{"line":87,"column":27,"offset":3816},"end":{"line":87,"column":39,"offset":3828},"indent":[]}},{"type":"inlineCode","value":"term","position":{"start":{"line":87,"column":39,"offset":3828},"end":{"line":87,"column":45,"offset":3834},"indent":[]}},{"type":"text","value":" query with a filter context. We could also have written the same query as below:","position":{"start":{"line":87,"column":45,"offset":3834},"end":{"line":87,"column":126,"offset":3915},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":3790},"end":{"line":87,"column":126,"offset":3915},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/tagwise/_search?pretty -d '{\n  \"query\": {\n    \"term\": {\n      \"tags\": \"reddit\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":89,"column":1,"offset":3919},"end":{"line":97,"column":4,"offset":4049},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"While the latter query looks much simpler, the above query is marked by Elasticsearch for caching because of the filter context. This helps speed up subsequent searches of the same request type.","position":{"start":{"line":99,"column":1,"offset":4053},"end":{"line":99,"column":195,"offset":4247},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":4053},"end":{"line":99,"column":195,"offset":4247},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response","position":{"start":{"line":101,"column":5,"offset":4255},"end":{"line":101,"column":13,"offset":4263},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":4251},"end":{"line":101,"column":13,"offset":4263},"indent":[]},"data":{"id":"response","htmlAttributes":{"id":"response"},"hProperties":{"id":"response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 8,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"tagwise\",\n      \"_type\" : \"search\",\n      \"_id\" : \"AVvR1yM3gPzdwFFNDvs7\",\n      \"_score\" : 1.0,\n      \"_source\" : {\n        \"repo\" : \"reddit\",\n        \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n        \"owner\" : \"reddit\",\n        \"url\" : \"https://github.com/reddit/reddit\",\n        \"stars\" : 13053,\n        \"language\" : \"Python\",\n        \"created-on\" : \"2008-06-18T23:30:53Z\"\n      }\n    } ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":103,"column":1,"offset":4267},"end":{"line":132,"column":4,"offset":4913},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"As we can see in the above response object, we found a hit containing the “reddit” tag.","position":{"start":{"line":134,"column":1,"offset":4917},"end":{"line":134,"column":88,"offset":5004},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":4917},"end":{"line":134,"column":88,"offset":5004},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"However, we might often want to either index multiple tags with a document or search documents by more than one tags. We talk about this in the next article on ","position":{"start":{"line":136,"column":1,"offset":5008},"end":{"line":136,"column":161,"offset":5168},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/multiple-tag-match.html","children":[{"type":"text","value":"multiple tag match","position":{"start":{"line":136,"column":162,"offset":5169},"end":{"line":136,"column":180,"offset":5187},"indent":[]}}],"position":{"start":{"line":136,"column":161,"offset":5168},"end":{"line":136,"column":263,"offset":5270},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":136,"column":263,"offset":5270},"end":{"line":136,"column":264,"offset":5271},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":5008},"end":{"line":136,"column":264,"offset":5271},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":137,"column":1,"offset":5273}}}},{"id":"transformer-remark-markdown-ast-c210ec55fcf2bf48cc13510a7d2c4c2b-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"link","url":"#phrase-search","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Phrase Search","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":16,"offset":15},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":16,"offset":15},"indent":[]},"data":{"id":"phrase-search","htmlAttributes":{"id":"phrase-search"},"hProperties":{"id":"phrase-search"}}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":3,"column":1,"offset":19},"end":{"line":3,"column":41,"offset":59},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/phrase-search/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"How to build phrase search engine using Elasticsearch?","position":{"start":{"line":3,"column":44,"offset":62},"end":{"line":3,"column":98,"offset":116},"indent":[]}}],"position":{"start":{"line":3,"column":42,"offset":60},"end":{"line":3,"column":100,"offset":118},"indent":[]}}],"position":{"start":{"line":3,"column":41,"offset":59},"end":{"line":3,"column":176,"offset":194},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":19},"end":{"line":3,"column":176,"offset":194},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Phrase search is useful when the order of the keywords in our query matter. Using ","position":{"start":{"line":5,"column":1,"offset":198},"end":{"line":5,"column":83,"offset":280},"indent":[]}},{"type":"inlineCode","value":"match_phrase","position":{"start":{"line":5,"column":83,"offset":280},"end":{"line":5,"column":97,"offset":294},"indent":[]}},{"type":"text","value":" query of Elasticsearch users can easily provide the list of keywords in some specific order to search for documents containing an exact sentence or phrase which contains those keywords in the same order rather than comparing a set of keywords in random order.","position":{"start":{"line":5,"column":97,"offset":294},"end":{"line":5,"column":357,"offset":554},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":198},"end":{"line":5,"column":357,"offset":554},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-do-phrase-search","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to do phrase search","position":{"start":{"line":7,"column":5,"offset":562},"end":{"line":7,"column":28,"offset":585},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":558},"end":{"line":7,"column":28,"offset":585},"indent":[]},"data":{"id":"how-to-do-phrase-search","htmlAttributes":{"id":"how-to-do-phrase-search"},"hProperties":{"id":"how-to-do-phrase-search"}}},{"type":"paragraph","children":[{"type":"text","value":"Like the ","position":{"start":{"line":9,"column":1,"offset":589},"end":{"line":9,"column":10,"offset":598},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/simple-match.html","children":[{"type":"text","value":"match query","position":{"start":{"line":9,"column":11,"offset":599},"end":{"line":9,"column":22,"offset":610},"indent":[]}}],"position":{"start":{"line":9,"column":10,"offset":598},"end":{"line":9,"column":94,"offset":682},"indent":[]}},{"type":"text","value":", the ","position":{"start":{"line":9,"column":94,"offset":682},"end":{"line":9,"column":100,"offset":688},"indent":[]}},{"type":"inlineCode","value":"match_phrase","position":{"start":{"line":9,"column":100,"offset":688},"end":{"line":9,"column":114,"offset":702},"indent":[]}},{"type":"text","value":" query first analyzes the query string according to the defined analyzer to produce a list of terms. It then searches for all the terms, but keeps only documents that contain all of the search terms, in the same positions relative to each other. Our sample dataset contains comments, posts etc. Elasticsearch provides special analyzers to deal with language specific texts.","position":{"start":{"line":9,"column":114,"offset":702},"end":{"line":9,"column":487,"offset":1075},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":589},"end":{"line":9,"column":487,"offset":1075},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the following sections, we will go through the process of building a very simple phrase search for the Hackernews dataset.","position":{"start":{"line":11,"column":1,"offset":1079},"end":{"line":11,"column":126,"offset":1204},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":1079},"end":{"line":11,"column":126,"offset":1204},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":13,"column":4,"offset":1211},"end":{"line":13,"column":21,"offset":1228},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":1208},"end":{"line":13,"column":21,"offset":1228},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":15,"column":1,"offset":1232},"end":{"line":15,"column":171,"offset":1402},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1232},"end":{"line":15,"column":171,"offset":1402},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By default, Elasticsearch analyzes the data before storing it on disk. It has different tokenizer, analyzer and filters to modify the data. Mappings are useful to attach these analyzers with specific fields. At index time, by default Elasticsearch uses the standard analyzer. Standard analyzer tokenizes the strings and converts it to the lower case tokens.","position":{"start":{"line":17,"column":1,"offset":1406},"end":{"line":17,"column":358,"offset":1763},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":1406},"end":{"line":17,"column":358,"offset":1763},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will use default English analyzer at the index time which can apply stemming, remove stop words, add synonyms to give us better results.","position":{"start":{"line":19,"column":1,"offset":1767},"end":{"line":19,"column":140,"offset":1906},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1767},"end":{"line":19,"column":140,"offset":1906},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#english-analyzer","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"English Analyzer","position":{"start":{"line":21,"column":5,"offset":1914},"end":{"line":21,"column":21,"offset":1930},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1910},"end":{"line":21,"column":21,"offset":1930},"indent":[]},"data":{"id":"english-analyzer","htmlAttributes":{"id":"english-analyzer"},"hProperties":{"id":"english-analyzer"}}},{"type":"paragraph","children":[{"type":"text","value":"The default analyzer of Elasticsearch contains following components:","position":{"start":{"line":22,"column":1,"offset":1932},"end":{"line":22,"column":69,"offset":2000},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1932},"end":{"line":22,"column":69,"offset":2000},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Tokenizer","position":{"start":{"line":23,"column":5,"offset":2006},"end":{"line":23,"column":14,"offset":2015},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":2004},"end":{"line":23,"column":16,"offset":2017},"indent":[]}},{"type":"text","value":": Splits the text into individual words by space or defined grammar.","position":{"start":{"line":23,"column":16,"offset":2017},"end":{"line":23,"column":84,"offset":2085},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":2004},"end":{"line":23,"column":84,"offset":2085},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":2002},"end":{"line":23,"column":84,"offset":2085},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"TokenFilters","position":{"start":{"line":24,"column":5,"offset":2091},"end":{"line":24,"column":17,"offset":2103},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":2089},"end":{"line":24,"column":19,"offset":2105},"indent":[]}},{"type":"text","value":": Filters the tokenized words. It lowercases all tokens, removes stop words, removes redundant tokens etc.","position":{"start":{"line":24,"column":19,"offset":2105},"end":{"line":24,"column":125,"offset":2211},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":2089},"end":{"line":24,"column":125,"offset":2211},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2087},"end":{"line":24,"column":125,"offset":2211},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":2002},"end":{"line":24,"column":125,"offset":2211},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"English analyzer analyzes the text in the following way. Example text - “I’m not happy about the foxes\n“.","position":{"start":{"line":26,"column":1,"offset":2215},"end":{"line":27,"column":3,"offset":2321},"indent":[1]}}],"position":{"start":{"line":26,"column":1,"offset":2215},"end":{"line":27,"column":3,"offset":2321},"indent":[1]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"First it tokenizes the text into words - ","position":{"start":{"line":28,"column":3,"offset":2325},"end":{"line":28,"column":44,"offset":2366},"indent":[]}},{"type":"linkReference","identifier":"i'm, not, happy, about, the, foxes","referenceType":"shortcut","children":[{"type":"text","value":"I’m, not, happy, about, the, foxes","position":{"start":{"line":28,"column":45,"offset":2367},"end":{"line":28,"column":79,"offset":2401},"indent":[]}}],"position":{"start":{"line":28,"column":44,"offset":2366},"end":{"line":28,"column":80,"offset":2402},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":2325},"end":{"line":28,"column":80,"offset":2402},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2323},"end":{"line":28,"column":80,"offset":2402},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Lowercases tokens: ","position":{"start":{"line":29,"column":3,"offset":2406},"end":{"line":29,"column":22,"offset":2425},"indent":[]}},{"type":"linkReference","identifier":"i'm, not, happy, about, the, foxes","referenceType":"shortcut","children":[{"type":"text","value":"i’m, not, happy, about, the, foxes","position":{"start":{"line":29,"column":23,"offset":2426},"end":{"line":29,"column":57,"offset":2460},"indent":[]}}],"position":{"start":{"line":29,"column":22,"offset":2425},"end":{"line":29,"column":58,"offset":2461},"indent":[]}}],"position":{"start":{"line":29,"column":3,"offset":2406},"end":{"line":29,"column":58,"offset":2461},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":2404},"end":{"line":29,"column":58,"offset":2461},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Removes stopwords: ","position":{"start":{"line":30,"column":3,"offset":2465},"end":{"line":30,"column":22,"offset":2484},"indent":[]}},{"type":"linkReference","identifier":"i'm, happy, about, foxes","referenceType":"shortcut","children":[{"type":"text","value":"i’m, happy, about, foxes","position":{"start":{"line":30,"column":23,"offset":2485},"end":{"line":30,"column":47,"offset":2509},"indent":[]}}],"position":{"start":{"line":30,"column":22,"offset":2484},"end":{"line":30,"column":48,"offset":2510},"indent":[]}}],"position":{"start":{"line":30,"column":3,"offset":2465},"end":{"line":30,"column":48,"offset":2510},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":2463},"end":{"line":30,"column":48,"offset":2510},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Stems tokens to their root form: ","position":{"start":{"line":31,"column":3,"offset":2514},"end":{"line":31,"column":36,"offset":2547},"indent":[]}},{"type":"linkReference","identifier":"i'm, happi, about, fox","referenceType":"shortcut","children":[{"type":"text","value":"i’m, happi, about, fox","position":{"start":{"line":31,"column":37,"offset":2548},"end":{"line":31,"column":59,"offset":2570},"indent":[]}}],"position":{"start":{"line":31,"column":36,"offset":2547},"end":{"line":31,"column":60,"offset":2571},"indent":[]}}],"position":{"start":{"line":31,"column":3,"offset":2514},"end":{"line":31,"column":60,"offset":2571},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":2512},"end":{"line":31,"column":60,"offset":2571},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2323},"end":{"line":31,"column":60,"offset":2571},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"By using the english analyzer, we can match text more loosely. By default Elasticsearch uses same analyzer at index time and search time to ensure that the terms in the query are in the same format as the terms in the index.","position":{"start":{"line":33,"column":1,"offset":2575},"end":{"line":33,"column":225,"offset":2799},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2575},"end":{"line":33,"column":225,"offset":2799},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now, we will specify the mappings for our ","position":{"start":{"line":35,"column":1,"offset":2803},"end":{"line":35,"column":43,"offset":2845},"indent":[]}},{"type":"inlineCode","value":"text","position":{"start":{"line":35,"column":43,"offset":2845},"end":{"line":35,"column":49,"offset":2851},"indent":[]}},{"type":"text","value":" field. Elasticsearch will create mappings dynamically for the rest of the fields.","position":{"start":{"line":35,"column":49,"offset":2851},"end":{"line":35,"column":131,"offset":2933},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2803},"end":{"line":35,"column":131,"offset":2933},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#put-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Put Mappings","position":{"start":{"line":37,"column":5,"offset":2941},"end":{"line":37,"column":17,"offset":2953},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2937},"end":{"line":37,"column":17,"offset":2953},"indent":[]},"data":{"id":"put-mappings","htmlAttributes":{"id":"put-mappings"},"hProperties":{"id":"put-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"Define the English analyzer on the ","position":{"start":{"line":39,"column":1,"offset":2957},"end":{"line":39,"column":36,"offset":2992},"indent":[]}},{"type":"inlineCode","value":"text","position":{"start":{"line":39,"column":36,"offset":2992},"end":{"line":39,"column":42,"offset":2998},"indent":[]}},{"type":"text","value":" field to analyze it at index time.","position":{"start":{"line":39,"column":42,"offset":2998},"end":{"line":39,"column":77,"offset":3033},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2957},"end":{"line":39,"column":77,"offset":3033},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/hackernews/_mapping/post -d '{\n  \"properties\": {\n    \"text\": {\n      \"type\": \"string\",\n      \"analyzer\": \"english\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":41,"column":1,"offset":3037},"end":{"line":50,"column":4,"offset":3202},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We just put ","position":{"start":{"line":51,"column":1,"offset":3204},"end":{"line":51,"column":13,"offset":3216},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"mapping","position":{"start":{"line":51,"column":15,"offset":3218},"end":{"line":51,"column":22,"offset":3225},"indent":[]}}],"position":{"start":{"line":51,"column":13,"offset":3216},"end":{"line":51,"column":24,"offset":3227},"indent":[]}},{"type":"text","value":" on ","position":{"start":{"line":51,"column":24,"offset":3227},"end":{"line":51,"column":28,"offset":3231},"indent":[]}},{"type":"inlineCode","value":"post","position":{"start":{"line":51,"column":28,"offset":3231},"end":{"line":51,"column":34,"offset":3237},"indent":[]}},{"type":"text","value":" type of ","position":{"start":{"line":51,"column":34,"offset":3237},"end":{"line":51,"column":43,"offset":3246},"indent":[]}},{"type":"inlineCode","value":"hackernews","position":{"start":{"line":51,"column":43,"offset":3246},"end":{"line":51,"column":55,"offset":3258},"indent":[]}},{"type":"text","value":" index. Now, let’s index some data.","position":{"start":{"line":51,"column":55,"offset":3258},"end":{"line":51,"column":90,"offset":3293},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":3204},"end":{"line":51,"column":90,"offset":3293},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-indexing","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Indexing","position":{"start":{"line":53,"column":4,"offset":3300},"end":{"line":53,"column":17,"offset":3313},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":3297},"end":{"line":53,"column":17,"offset":3313},"indent":[]},"data":{"id":"data-indexing","htmlAttributes":{"id":"data-indexing"},"hProperties":{"id":"data-indexing"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/hackernews/_mapping/post -d '{\n  \"by\": \"dmihal\",\n  \"id\": 13102152,\n  \"parent\": 13101870,\n  \"text\": \"Cool library! I&#x27;m a huge fan of Meteor.js, which provides a similar isomorphic database. Cool to see this implemented in such a lightweight package!\",\n  \"time\": 1480890919,\n  \"p_type\": \"comment\",\n  \"score\": 0\n}'</code></pre>\n      </div>","position":{"start":{"line":55,"column":1,"offset":3317},"end":{"line":65,"column":4,"offset":3672},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We just indexed our first document. We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.","position":{"start":{"line":66,"column":1,"offset":3674},"end":{"line":66,"column":159,"offset":3832},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":3674},"end":{"line":66,"column":159,"offset":3832},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":68,"column":4,"offset":3839},"end":{"line":68,"column":21,"offset":3856},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":3836},"end":{"line":68,"column":21,"offset":3856},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For accessibility, we have indexed ~6000 data points of Github repos that can be viewed in the data browser ","position":{"start":{"line":70,"column":1,"offset":3860},"end":{"line":70,"column":109,"offset":3968},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALxAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsyS2qaEZIwD-J9none24PyYH8yBXUWZ1fjjzdmdQqiDSYIwX4TuBH3IQtfCk1YLwT0kR9-r0YWMhn1GxDTldPTCD836HnpPYGINlfz27teRoEy1L78YMlLzUoLIYWjaUV04UwEet4YmZw_ADbiLDT1RhM_1XOaFqFsgEhHTBnHFMCY5VI4poDJz0BABqDSKR5qF76qvBs6Smde9lws1D6g_epJiEVMK0611dw8BoWkl1yP-N1SAA","children":[{"type":"text","value":"here. ","position":{"start":{"line":70,"column":110,"offset":3969},"end":{"line":70,"column":116,"offset":3975},"indent":[]}},{"type":"image","title":null,"url":"http://i.imgur.com/x7nLB9s.png","alt":null,"position":{"start":{"line":70,"column":116,"offset":3975},"end":{"line":70,"column":151,"offset":4010},"indent":[]}}],"position":{"start":{"line":70,"column":109,"offset":3968},"end":{"line":70,"column":494,"offset":4353},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3860},"end":{"line":70,"column":494,"offset":4353},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":72,"column":4,"offset":4360},"end":{"line":72,"column":9,"offset":4365},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":4357},"end":{"line":72,"column":9,"offset":4365},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Next, we will move to the queries section. Here, we will be using ","position":{"start":{"line":74,"column":1,"offset":4369},"end":{"line":74,"column":67,"offset":4435},"indent":[]}},{"type":"inlineCode","value":"match_phrase","position":{"start":{"line":74,"column":67,"offset":4435},"end":{"line":74,"column":81,"offset":4449},"indent":[]}},{"type":"text","value":" query to match the phrases. ","position":{"start":{"line":74,"column":81,"offset":4449},"end":{"line":74,"column":110,"offset":4478},"indent":[]}},{"type":"inlineCode","value":"match_phrase","position":{"start":{"line":74,"column":110,"offset":4478},"end":{"line":74,"column":124,"offset":4492},"indent":[]}},{"type":"text","value":" query first analyze the provided text using the explicit defined analyzer, or using the default search analyzer and produces a list of terms.","position":{"start":{"line":74,"column":124,"offset":4492},"end":{"line":74,"column":266,"offset":4634},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":4369},"end":{"line":74,"column":266,"offset":4634},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#exact-phrase-match","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Exact-phrase match","position":{"start":{"line":76,"column":5,"offset":4642},"end":{"line":76,"column":23,"offset":4660},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":4638},"end":{"line":76,"column":23,"offset":4660},"indent":[]},"data":{"id":"exact-phrase-match","htmlAttributes":{"id":"exact-phrase-match"},"hProperties":{"id":"exact-phrase-match"}}},{"type":"paragraph","children":[{"type":"text","value":"In order to match all the terms consecutively in the same order relative to each other use default ","position":{"start":{"line":78,"column":1,"offset":4664},"end":{"line":78,"column":100,"offset":4763},"indent":[]}},{"type":"inlineCode","value":"match_phrase","position":{"start":{"line":78,"column":100,"offset":4763},"end":{"line":78,"column":114,"offset":4777},"indent":[]}},{"type":"text","value":" query.","position":{"start":{"line":78,"column":114,"offset":4777},"end":{"line":78,"column":121,"offset":4784},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":4664},"end":{"line":78,"column":121,"offset":4784},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/hackernews/post/_search?pretty -d '{\n  \"query\": {\n    \"match_phrase\" : {\n      \"text\": \"Cool library\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":80,"column":1,"offset":4788},"end":{"line":88,"column":4,"offset":4933},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Here, ","position":{"start":{"line":90,"column":1,"offset":4937},"end":{"line":90,"column":7,"offset":4943},"indent":[]}},{"type":"inlineCode","value":"text","position":{"start":{"line":90,"column":7,"offset":4943},"end":{"line":90,"column":13,"offset":4949},"indent":[]}},{"type":"text","value":" is the Elasticsearch field against which we performed the phrase match query.","position":{"start":{"line":90,"column":13,"offset":4949},"end":{"line":90,"column":91,"offset":5027},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":4937},"end":{"line":90,"column":91,"offset":5027},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#mix-search","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Mix Search","position":{"start":{"line":92,"column":5,"offset":5035},"end":{"line":92,"column":15,"offset":5045},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":5031},"end":{"line":92,"column":15,"offset":5045},"indent":[]},"data":{"id":"mix-search","htmlAttributes":{"id":"mix-search"},"hProperties":{"id":"mix-search"}}},{"type":"paragraph","children":[{"type":"text","value":"Every time we can’t expect that users will provide the exact query terms with the proper order. Elasticsearch provides a way to match the documents even though the term’s positions aren’t exactly equivalent.","position":{"start":{"line":94,"column":1,"offset":5049},"end":{"line":94,"column":208,"offset":5256},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":5049},"end":{"line":94,"column":208,"offset":5256},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can pass the ","position":{"start":{"line":96,"column":1,"offset":5260},"end":{"line":96,"column":17,"offset":5276},"indent":[]}},{"type":"inlineCode","value":"slop","position":{"start":{"line":96,"column":17,"offset":5276},"end":{"line":96,"column":23,"offset":5282},"indent":[]}},{"type":"text","value":" parameter in the following way to match the documents which contain all the query terms but in a different order or may be with the distance between them.","position":{"start":{"line":96,"column":23,"offset":5282},"end":{"line":96,"column":178,"offset":5437},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":5260},"end":{"line":96,"column":178,"offset":5437},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/hackernews/post/_search?pretty -d '{\n  \"query\": {\n    \"match_phrase\": {\n      \"text\": {\n        \"query\": \"Cool library Meteor.js\",\n        \"slop\": 7\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":98,"column":1,"offset":5441},"end":{"line":109,"column":4,"offset":5644},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can run above query and can get the matched document. If you check out the inserted document, the difference between the position of ","position":{"start":{"line":111,"column":1,"offset":5648},"end":{"line":111,"column":138,"offset":5785},"indent":[]}},{"type":"inlineCode","value":"\"Cool library\"","position":{"start":{"line":111,"column":138,"offset":5785},"end":{"line":111,"column":154,"offset":5801},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":111,"column":154,"offset":5801},"end":{"line":111,"column":159,"offset":5806},"indent":[]}},{"type":"inlineCode","value":"\"Meteor.js\"","position":{"start":{"line":111,"column":159,"offset":5806},"end":{"line":111,"column":172,"offset":5819},"indent":[]}},{"type":"text","value":" will be the 7 words.","position":{"start":{"line":111,"column":172,"offset":5819},"end":{"line":111,"column":193,"offset":5840},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":5648},"end":{"line":111,"column":193,"offset":5840},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response","position":{"start":{"line":113,"column":6,"offset":5849},"end":{"line":113,"column":14,"offset":5857},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":5844},"end":{"line":113,"column":14,"offset":5857},"indent":[]},"data":{"id":"response","htmlAttributes":{"id":"response"},"hProperties":{"id":"response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 21,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.5155549,\n    \"hits\" : [ {\n      \"_index\" : \"hackernews\",\n      \"_type\" : \"post\",\n      \"_id\" : \"AVtNnwdOtBk7_I4P_hnC\",\n      \"_score\" : 1.5155549,\n      \"_source\" : {\n        \"by\" : \"dmihal\",\n        \"id\" : 13102152,\n        \"parent\" : 13101870,\n        \"text\" : \"Cool library! I&#x27;m a huge fan of Meteor.js, which provides a similar isomorphic database. Cool to see this implemented in such a lightweight package!\",\n        \"time\" : 1480890919,\n        \"p_type\" : \"comment\",\n        \"score\" : 0\n      }\n    } ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":115,"column":1,"offset":5861},"end":{"line":144,"column":4,"offset":6589},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":145,"column":1,"offset":6591}}}},{"id":"transformer-remark-markdown-ast-b8d10660f78f9d110b691144220e54ea-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: multi-match\ntitle: \"Multi Match\"\nlayout: tutorial\nsectionid: multi-match\npermalink: searchbar/multi-match.html\nnext: auto-complete.html\nnextTitle: \"Auto Complete\"\nprev: simple-match.html\nprevTitle: \"Simple Match\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":11,"column":4,"offset":234},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":13,"column":1,"offset":238},"end":{"line":13,"column":41,"offset":278},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"how to build a search bar","position":{"start":{"line":13,"column":44,"offset":281},"end":{"line":13,"column":69,"offset":306},"indent":[]}}],"position":{"start":{"line":13,"column":42,"offset":279},"end":{"line":13,"column":71,"offset":308},"indent":[]}}],"position":{"start":{"line":13,"column":41,"offset":278},"end":{"line":13,"column":143,"offset":380},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":13,"column":143,"offset":380},"end":{"line":13,"column":144,"offset":381},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":238},"end":{"line":13,"column":144,"offset":381},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#how-to-build-a-multi-match-search","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How To Build A Multi Match Search","position":{"start":{"line":15,"column":4,"offset":388},"end":{"line":15,"column":37,"offset":421},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":385},"end":{"line":15,"column":37,"offset":421},"indent":[]},"data":{"id":"how-to-build-a-multi-match-search","htmlAttributes":{"id":"how-to-build-a-multi-match-search"},"hProperties":{"id":"how-to-build-a-multi-match-search"}}},{"type":"paragraph","children":[{"type":"text","value":"It’s not uncommon to come across scenarios where we want to apply a search query across multiple fields. Take an e-commerce search experience for instance, here we would want to show our users results that match either the product name or its description.","position":{"start":{"line":17,"column":1,"offset":425},"end":{"line":17,"column":256,"offset":680},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":425},"end":{"line":17,"column":256,"offset":680},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this post, we will go through the process of building a multi match search experience (i.e. across multiple fields) using Elasticsearch.","position":{"start":{"line":19,"column":1,"offset":684},"end":{"line":19,"column":140,"offset":823},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":684},"end":{"line":19,"column":140,"offset":823},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":22,"column":4,"offset":832},"end":{"line":22,"column":21,"offset":849},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":829},"end":{"line":22,"column":21,"offset":849},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":24,"column":1,"offset":853},"end":{"line":24,"column":171,"offset":1023},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":853},"end":{"line":24,"column":171,"offset":1023},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Being a NoSQL document store that works with JSON data, it comes with a convenient default for dynamic mappings. And we will exploit that to index our first data.","position":{"start":{"line":26,"column":1,"offset":1027},"end":{"line":26,"column":163,"offset":1189},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1027},"end":{"line":26,"column":163,"offset":1189},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#indexing-data","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Indexing Data","position":{"start":{"line":28,"column":4,"offset":1196},"end":{"line":28,"column":17,"offset":1209},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1193},"end":{"line":28,"column":17,"offset":1209},"indent":[]},"data":{"id":"indexing-data","htmlAttributes":{"id":"indexing-data"},"hProperties":{"id":"indexing-data"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>","position":{"start":{"line":30,"column":1,"offset":1213},"end":{"line":35,"column":4,"offset":1335},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If we look back at our data mappings, they should now look like as follows","position":{"start":{"line":37,"column":1,"offset":1339},"end":{"line":37,"column":75,"offset":1413},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1339},"end":{"line":37,"column":75,"offset":1413},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/_mapping?pretty</code></pre>\n      </div>","position":{"start":{"line":39,"column":1,"offset":1417},"end":{"line":41,"column":4,"offset":1474},"indent":[1,1]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>\"normal_searchbar\" : {\n  \"mappings\" : {\n    \"searchbar\" : {\n      \"properties\" : {\n        \"city\" : {\n          \"type\" : \"text\",\n          \"fields\" : {\n            \"keyword\" : {\n              \"type\" : \"keyword\",\n              \"ignore_above\" : 256\n            }\n          }\n        },\n        \"country\" : {\n          \"type\" : \"text\",\n          \"fields\" : {\n            \"keyword\" : {\n              \"type\" : \"keyword\",\n              \"ignore_above\" : 256\n            }\n          }\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":43,"column":1,"offset":1478},"end":{"line":70,"column":4,"offset":2023},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Elasticsearch created these mappings dynamically based on our indexed data.","position":{"start":{"line":72,"column":1,"offset":2027},"end":{"line":72,"column":76,"offset":2102},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2027},"end":{"line":72,"column":76,"offset":2102},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":74,"column":4,"offset":2109},"end":{"line":74,"column":21,"offset":2126},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2106},"end":{"line":74,"column":21,"offset":2126},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For accessibility, we have indexed ~15,000 data points that can be viewed in the data browser ","position":{"start":{"line":76,"column":1,"offset":2130},"end":{"line":76,"column":95,"offset":2224},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAAKUAQAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdZF4_hjSV7EdPDTy97DMkG9PlZFBp_bLIhTq50OaXXwxPtBuMRIcPoLj3jT4xckRg5gb7pSiw9fFAJoH5HAeiXsya9za62wB2R_mv16L4HlA_xHvdGfdp0418nmqFUmW6PphBtnkRfvGlb2yeCvcT6ZS5VZTHbbm30EuT94MJLydUHyurtrtMNZaLDIZ8fEM2COgl1-0zP_-F7ACg&editable=false","children":[{"type":"text","value":"here. ","position":{"start":{"line":76,"column":96,"offset":2225},"end":{"line":76,"column":102,"offset":2231},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/rHOEixS.png","alt":null,"position":{"start":{"line":76,"column":102,"offset":2231},"end":{"line":76,"column":138,"offset":2267},"indent":[]}}],"position":{"start":{"line":76,"column":95,"offset":2224},"end":{"line":76,"column":606,"offset":2735},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2130},"end":{"line":76,"column":606,"offset":2735},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":78,"column":4,"offset":2742},"end":{"line":78,"column":9,"offset":2747},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":2739},"end":{"line":78,"column":9,"offset":2747},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Now we will write the search query for ","position":{"start":{"line":80,"column":1,"offset":2751},"end":{"line":80,"column":40,"offset":2790},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"multi match","position":{"start":{"line":80,"column":42,"offset":2792},"end":{"line":80,"column":53,"offset":2803},"indent":[]}}],"position":{"start":{"line":80,"column":40,"offset":2790},"end":{"line":80,"column":55,"offset":2805},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":80,"column":55,"offset":2805},"end":{"line":80,"column":56,"offset":2806},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":2751},"end":{"line":80,"column":56,"offset":2806},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?pretty\" -d '{\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"United States\",\n      \"fields\": [\"city\", \"country\"]\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":82,"column":1,"offset":2810},"end":{"line":91,"column":4,"offset":3006},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":93,"column":1,"offset":3010},"end":{"line":93,"column":3,"offset":3012},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"multi_match","position":{"start":{"line":93,"column":5,"offset":3014},"end":{"line":93,"column":16,"offset":3025},"indent":[]}}],"position":{"start":{"line":93,"column":3,"offset":3012},"end":{"line":93,"column":18,"offset":3027},"indent":[]}},{"type":"text","value":" query is very similar to a ","position":{"start":{"line":93,"column":18,"offset":3027},"end":{"line":93,"column":46,"offset":3055},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"match","position":{"start":{"line":93,"column":48,"offset":3057},"end":{"line":93,"column":53,"offset":3062},"indent":[]}}],"position":{"start":{"line":93,"column":46,"offset":3055},"end":{"line":93,"column":55,"offset":3064},"indent":[]}},{"type":"text","value":" query, except it has a convenient way of searching across multiple ","position":{"start":{"line":93,"column":55,"offset":3064},"end":{"line":93,"column":123,"offset":3132},"indent":[]}},{"type":"inlineCode","value":"fields","position":{"start":{"line":93,"column":123,"offset":3132},"end":{"line":93,"column":131,"offset":3140},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":93,"column":131,"offset":3140},"end":{"line":93,"column":132,"offset":3141},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":3010},"end":{"line":93,"column":132,"offset":3141},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Response:","position":{"start":{"line":95,"column":1,"offset":3145},"end":{"line":95,"column":10,"offset":3154},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":3145},"end":{"line":95,"column":10,"offset":3154},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 15,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 20,\n    \"max_score\" : 5.8896313,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"1\",\n      \"_score\" : 5.8896313,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, ... ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":96,"column":1,"offset":3156},"end":{"line":120,"column":4,"offset":3610},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In the response, you will get the list of all the cities whos ","position":{"start":{"line":122,"column":1,"offset":3614},"end":{"line":122,"column":63,"offset":3676},"indent":[]}},{"type":"inlineCode","value":"country","position":{"start":{"line":122,"column":63,"offset":3676},"end":{"line":122,"column":72,"offset":3685},"indent":[]}},{"type":"text","value":" field matches with ","position":{"start":{"line":122,"column":72,"offset":3685},"end":{"line":122,"column":92,"offset":3705},"indent":[]}},{"type":"inlineCode","value":"United States","position":{"start":{"line":122,"column":92,"offset":3705},"end":{"line":122,"column":107,"offset":3720},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":122,"column":107,"offset":3720},"end":{"line":122,"column":108,"offset":3721},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":3614},"end":{"line":122,"column":108,"offset":3721},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can try out this query interactively ","position":{"start":{"line":124,"column":1,"offset":3725},"end":{"line":124,"column":42,"offset":3766},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/mirage/#?input_state=XQAAAAK0BQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmIMRwpW8tLJEeyKCwoHzPOkL9M0KdbHLZtMVPxIPMlh7YYAQinNjBTPX006UGzGERYNqNYjacxklVFkEoKyx2zaubRUqhqxScMG9gD-h7bDyj7ZQ6VU2Kj2rkJ1mds7BRVYkDfAHTEbtNa5GW20cp1fus1prbJbNXISvUEQNnPsDOsiH93N8mrqk4ZUuFt9U-a6lycH_ep550RD_dqNp8O-_A9qC47n_yrU_BAyybWtYEqbqRubgwH5baTC-QSqOaNVNANksc4-2BgClNbtmRec6DIggUIQApnQW6Ka43GNQq1VJspFdL6BLifAI_I-zupa4IFDLS-eq3oykTMVHE9e6IrKvHb6vbhP8saKnhS2CQ_qXkx0ckZvsg4eCPzeCWx35T2MqDCqRc_8schvvRofTxHNCKHQ4ziO5mson_yplVSlGqxmKIc3ZjYBcBkOWNDwGomNYQzguPGCc0pV8IBHXRIUZBhplz_Fg146eLXsFr7__5mfaXglRnlw8k8SEgxCXeQRDByqHthvrhtqHBxwQLZcDckQuuwOc-DvMrqUauiIvXXmpg2s62fIQHu7PeB63NkcE_elwz5DoAqJwgtnm9GSN_cgn7UJLTscZO85i41qOLF0pCCCmeqp38E9Ich-tipAfgkk5wLmKaEuhNn_8PccSA","children":[{"type":"text","value":"here. ","position":{"start":{"line":124,"column":43,"offset":3767},"end":{"line":124,"column":49,"offset":3773},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/Z4Vt76n.png","alt":null,"position":{"start":{"line":124,"column":49,"offset":3773},"end":{"line":124,"column":85,"offset":3809},"indent":[]}}],"position":{"start":{"line":124,"column":42,"offset":3766},"end":{"line":124,"column":861,"offset":4585},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":3725},"end":{"line":124,"column":861,"offset":4585},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":126,"column":1,"offset":4589},"end":{"line":126,"column":4,"offset":4592},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Next, you should read about ","position":{"start":{"line":128,"column":1,"offset":4596},"end":{"line":128,"column":29,"offset":4624},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/auto-complete.html","children":[{"type":"strong","children":[{"type":"text","value":"auto completion","position":{"start":{"line":128,"column":32,"offset":4627},"end":{"line":128,"column":47,"offset":4642},"indent":[]}}],"position":{"start":{"line":128,"column":30,"offset":4625},"end":{"line":128,"column":49,"offset":4644},"indent":[]}}],"position":{"start":{"line":128,"column":29,"offset":4624},"end":{"line":128,"column":122,"offset":4717},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":128,"column":122,"offset":4717},"end":{"line":128,"column":123,"offset":4718},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":4596},"end":{"line":128,"column":123,"offset":4718},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":129,"column":1,"offset":4720}}}},{"id":"transformer-remark-markdown-ast-1cc76fcc4c0de6ca6f91a6b743d0b2a8-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: simple-match\ntitle: \"Simple Match\"\nlayout: tutorial\nsectionid: simple-match\npermalink: searchbar/simple-match.html\nnext: multi-match.html\nnextTitle: \"Multi Match\"\nprev: introduction.html\nprevTitle: \"Searchbar: Introduction\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":11,"column":4,"offset":245},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":13,"column":1,"offset":249},"end":{"line":13,"column":41,"offset":289},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"how to build a search bar","position":{"start":{"line":13,"column":44,"offset":292},"end":{"line":13,"column":69,"offset":317},"indent":[]}}],"position":{"start":{"line":13,"column":42,"offset":290},"end":{"line":13,"column":71,"offset":319},"indent":[]}}],"position":{"start":{"line":13,"column":41,"offset":289},"end":{"line":13,"column":143,"offset":391},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":13,"column":143,"offset":391},"end":{"line":13,"column":144,"offset":392},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":249},"end":{"line":13,"column":144,"offset":392},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#how-to-build-a-simple-match-search","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How To Build A Simple Match Search","position":{"start":{"line":15,"column":4,"offset":399},"end":{"line":15,"column":38,"offset":433},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":396},"end":{"line":15,"column":38,"offset":433},"indent":[]},"data":{"id":"how-to-build-a-simple-match-search","htmlAttributes":{"id":"how-to-build-a-simple-match-search"},"hProperties":{"id":"how-to-build-a-simple-match-search"}}},{"type":"paragraph","children":[{"type":"text","value":"Every complex search begins its journey with simplicity.","position":{"start":{"line":17,"column":1,"offset":437},"end":{"line":17,"column":57,"offset":493},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":437},"end":{"line":17,"column":57,"offset":493},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this post, we will go through the process of building a very simple search experience using Elasticsearch.","position":{"start":{"line":19,"column":1,"offset":497},"end":{"line":19,"column":110,"offset":606},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":497},"end":{"line":19,"column":110,"offset":606},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":21,"column":4,"offset":613},"end":{"line":21,"column":21,"offset":630},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":610},"end":{"line":21,"column":21,"offset":630},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":23,"column":1,"offset":634},"end":{"line":23,"column":171,"offset":804},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":634},"end":{"line":23,"column":171,"offset":804},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Being a NoSQL document store that works with JSON data, it comes with a convenient default for dynamic mappings. And we will exploit that to index our first data.","position":{"start":{"line":25,"column":1,"offset":808},"end":{"line":25,"column":163,"offset":970},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":808},"end":{"line":25,"column":163,"offset":970},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#indexing-data","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Indexing Data","position":{"start":{"line":27,"column":4,"offset":977},"end":{"line":27,"column":17,"offset":990},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":974},"end":{"line":27,"column":17,"offset":990},"indent":[]},"data":{"id":"indexing-data","htmlAttributes":{"id":"indexing-data"},"hProperties":{"id":"indexing-data"}}},{"type":"html","lang":"bash","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code>curl -XPUT <span class=\"token variable\">$host</span>/normal_searchbar/searchbar/1 -d <span class=\"token string\">'{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</span>\n</code></pre>\n      </div>","position":{"start":{"line":29,"column":1,"offset":994},"end":{"line":34,"column":4,"offset":1116},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If we look back at our data mappings, they should now look like as follows","position":{"start":{"line":36,"column":1,"offset":1120},"end":{"line":36,"column":75,"offset":1194},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1120},"end":{"line":36,"column":75,"offset":1194},"indent":[]}},{"type":"html","lang":"bash","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code>curl <span class=\"token variable\">$host</span>/normal_searchbar/_mapping?pretty\n</code></pre>\n      </div>","position":{"start":{"line":38,"column":1,"offset":1198},"end":{"line":40,"column":4,"offset":1255},"indent":[1,1]}},{"type":"html","lang":"jsx","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsx\"><code><span class=\"token string\">\"normal_searchbar\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"mappings\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"searchbar\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"properties\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"city\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"fields\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"keyword\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"keyword\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"ignore_above\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">256</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"country\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"fields\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"keyword\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"keyword\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"ignore_above\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">256</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n      </div>","position":{"start":{"line":42,"column":1,"offset":1259},"end":{"line":69,"column":4,"offset":1802},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Elasticsearch created these mappings dynamically based on our indexed data.","position":{"start":{"line":71,"column":1,"offset":1806},"end":{"line":71,"column":76,"offset":1881},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":1806},"end":{"line":71,"column":76,"offset":1881},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":73,"column":4,"offset":1888},"end":{"line":73,"column":21,"offset":1905},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":1885},"end":{"line":73,"column":21,"offset":1905},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For accessibility, we have indexed ~15,000 data points that can be viewed in the data browser ","position":{"start":{"line":75,"column":1,"offset":1909},"end":{"line":75,"column":95,"offset":2003},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&editable=false","children":[{"type":"text","value":"here. ","position":{"start":{"line":75,"column":96,"offset":2004},"end":{"line":75,"column":102,"offset":2010},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/gCu8brp.png","alt":null,"position":{"start":{"line":75,"column":102,"offset":2010},"end":{"line":75,"column":138,"offset":2046},"indent":[]}}],"position":{"start":{"line":75,"column":95,"offset":2003},"end":{"line":75,"column":491,"offset":2399},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":1909},"end":{"line":75,"column":491,"offset":2399},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":77,"column":4,"offset":2406},"end":{"line":77,"column":9,"offset":2411},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":2403},"end":{"line":77,"column":9,"offset":2411},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Now we will write our first search query, ","position":{"start":{"line":79,"column":1,"offset":2415},"end":{"line":79,"column":43,"offset":2457},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"match","position":{"start":{"line":79,"column":45,"offset":2459},"end":{"line":79,"column":50,"offset":2464},"indent":[]}}],"position":{"start":{"line":79,"column":43,"offset":2457},"end":{"line":79,"column":52,"offset":2466},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":79,"column":52,"offset":2466},"end":{"line":79,"column":53,"offset":2467},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":2415},"end":{"line":79,"column":53,"offset":2467},"indent":[]}},{"type":"html","lang":"bash{3-5}","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code>curl <span class=\"token string\">\"<span class=\"token variable\">$host</span>/normal_searchbar/searchbar/_search?pretty\"</span> -d <span class=\"token string\">'{\n  \"query\": {\n<span class=\"gatsby-highlight-code-line\">    \"match\": {\n</span><span class=\"gatsby-highlight-code-line\">      \"city\": \"New York\"\n</span><span class=\"gatsby-highlight-code-line\">    }\n</span>  }\n}'</span>\n</code></pre>\n      </div>","position":{"start":{"line":81,"column":1,"offset":2471},"end":{"line":89,"column":4,"offset":2622},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Response:","position":{"start":{"line":91,"column":1,"offset":2626},"end":{"line":91,"column":10,"offset":2635},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":2626},"end":{"line":91,"column":10,"offset":2635},"indent":[]}},{"type":"html","lang":"jsx","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsx\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"took\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"timed_out\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"_shards\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"total\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"successful\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"failed\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"hits\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"total\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"max_score\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">7.445813</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"hits\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"_index\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"normal_searchbar\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"searchbar\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_id\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_score\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">7.445813</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_source\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"city\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"New York\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"country\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"United States\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n      </div>","position":{"start":{"line":93,"column":1,"offset":2639},"end":{"line":117,"column":4,"offset":3083},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can also try out this query interactively  ","position":{"start":{"line":119,"column":1,"offset":3087},"end":{"line":119,"column":48,"offset":3134},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/mirage/#?input_state=XQAAAAJeBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmIMRwpW8tLJEeyKCwoHzPOkL9M0KdbHLZtMVPxIPMlh7YYAQinNjBTPX006UGzGERYNqNYjacxklVFkEoKyx2zaubRUqhqxScMG9gD-h7bDyj7ZQ6VU2Kj2rkJ1mds7BRVYkDfAHTEbtNa5GW20cp1fus1prbJbNXISvUEQNnPsDOsiH93N8mrqk4ZUuFt9U-a6lycH_ep550RD_dqNp8O-_A9qC47n_yrU_BAyybWtYEqbqRubgwH5baTC-QR8cqtVNANksc4-2BgClNbtmRec6DIggUIQApnQW6Ka43GNQq1VJspFdL6BLiepaIvHsDim4UET7rm6-S-XBuAgmxwXg3uRZWbHsh2dXJc7OFlkkJ5ya2vtztZPA8jbWub8fNumuGGaas26ulK15v1eC6OvUVIizE6-4gA5Hf2VtlzBtduJrH6OUSJpSwOEThH8-2BKVYsJC11RK1IZz_CfkD1pl9s6Krlk6IjK2dlIIoqFy3S5dN5Z77hoOOVGDCTlDFL450xutJaPdENBxXQP4p98KwkK4Ph6fLGgTL7c5MY7Oqgd9P-tqeiPkaYCzZ9h4OQUqcxCn6MrWlo-g3XhMAmDaXD1N8VLhNAic0F2XkN1MLisvMMdHftDHr6zn96c6i4T_5fw9rw","children":[{"type":"text","value":"here. ","position":{"start":{"line":119,"column":49,"offset":3135},"end":{"line":119,"column":55,"offset":3141},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/Z4Vt76n.png","alt":null,"position":{"start":{"line":119,"column":55,"offset":3141},"end":{"line":119,"column":91,"offset":3177},"indent":[]}}],"position":{"start":{"line":119,"column":48,"offset":3134},"end":{"line":119,"column":848,"offset":3934},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":3087},"end":{"line":119,"column":848,"offset":3934},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":121,"column":1,"offset":3938},"end":{"line":121,"column":4,"offset":3941},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You should next read about ","position":{"start":{"line":123,"column":1,"offset":3945},"end":{"line":123,"column":28,"offset":3972},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/multi-match.html","children":[{"type":"strong","children":[{"type":"text","value":"multi match","position":{"start":{"line":123,"column":31,"offset":3975},"end":{"line":123,"column":42,"offset":3986},"indent":[]}}],"position":{"start":{"line":123,"column":29,"offset":3973},"end":{"line":123,"column":44,"offset":3988},"indent":[]}}],"position":{"start":{"line":123,"column":28,"offset":3972},"end":{"line":123,"column":115,"offset":4059},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":123,"column":115,"offset":4059},"end":{"line":123,"column":116,"offset":4060},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":3945},"end":{"line":123,"column":116,"offset":4060},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":124,"column":1,"offset":4062}}}},{"id":"transformer-remark-markdown-ast-9ff00e8d02edc8d003f68d9e06304236-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: arrays\ntitle: \"Arrays Datatype\"\nlayout: tutorial\nsectionid: arrays\npermalink: tagwise-search/arrays.html\nnext: multiple-tag-match.html\nnextTitle: \"Multiple Tag Match\"\nprev: exact-match.html\nprevTitle: \"Exact Tag Match\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":11,"column":4,"offset":240},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":13,"column":1,"offset":244},"end":{"line":13,"column":41,"offset":284},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"How to build tag wise search with Elasticsearch","position":{"start":{"line":13,"column":44,"offset":287},"end":{"line":13,"column":91,"offset":334},"indent":[]}}],"position":{"start":{"line":13,"column":42,"offset":285},"end":{"line":13,"column":93,"offset":336},"indent":[]}}],"position":{"start":{"line":13,"column":41,"offset":284},"end":{"line":13,"column":170,"offset":413},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":13,"column":170,"offset":413},"end":{"line":13,"column":171,"offset":414},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":244},"end":{"line":13,"column":171,"offset":414},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#how-to-store-data-using-elasticsearch-arrays","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to store data using Elasticsearch arrays","position":{"start":{"line":15,"column":4,"offset":421},"end":{"line":15,"column":48,"offset":465},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":418},"end":{"line":15,"column":48,"offset":465},"indent":[]},"data":{"id":"how-to-store-data-using-elasticsearch-arrays","htmlAttributes":{"id":"how-to-store-data-using-elasticsearch-arrays"},"hProperties":{"id":"how-to-store-data-using-elasticsearch-arrays"}}},{"type":"paragraph","children":[{"type":"text","value":"A major use-case of tags in apps is to associate a content with one or more labels, it is then but natural that a tagwise search feature should be able to retrieve the marching content by user specifying either just one or more than one tag labels. A tag wise search is also fundamentally different from a full-text search as here, we are finding an exact match of a tag with a content item.","position":{"start":{"line":17,"column":1,"offset":469},"end":{"line":17,"column":392,"offset":860},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":469},"end":{"line":17,"column":392,"offset":860},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this post, we will be using an Array datastructure to store labels with a content document. For making the exact lookups, we will be applying  a term query on the dataset.","position":{"start":{"line":19,"column":1,"offset":864},"end":{"line":19,"column":175,"offset":1038},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":864},"end":{"line":19,"column":175,"offset":1038},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Elasticsearch, there is no dedicated array type. Any field can contain zero or more values by default, however, all values in the array must be of the same datatype. If you create a new field by indexing an array, Elasticsearch will use the datatype of the first value in the array to determine the type of the new field. We can create array of strings, integers, objects or array of arrays to store the data.","position":{"start":{"line":21,"column":1,"offset":1042},"end":{"line":21,"column":413,"offset":1454},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1042},"end":{"line":21,"column":413,"offset":1454},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Elasticsearch can also supports empty array or null array values.","position":{"start":{"line":23,"column":1,"offset":1458},"end":{"line":23,"column":66,"offset":1523},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1458},"end":{"line":23,"column":66,"offset":1523},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Default array does not support quering each object independently of the other objects in the array. To distinguish objects stored in array from each other we need to use ","position":{"start":{"line":25,"column":1,"offset":1527},"end":{"line":25,"column":171,"offset":1697},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Nested datatype","position":{"start":{"line":25,"column":173,"offset":1699},"end":{"line":25,"column":188,"offset":1714},"indent":[]}}],"position":{"start":{"line":25,"column":171,"offset":1697},"end":{"line":25,"column":190,"offset":1716},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":25,"column":190,"offset":1716},"end":{"line":25,"column":191,"offset":1717},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1527},"end":{"line":25,"column":191,"offset":1717},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Note:","position":{"start":{"line":27,"column":1,"offset":1721},"end":{"line":27,"column":8,"offset":1728},"indent":[]}},{"type":"text","value":" Read more about nested datatype over ","position":{"start":{"line":27,"column":8,"offset":1728},"end":{"line":27,"column":46,"offset":1766},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html","children":[{"type":"text","value":"here","position":{"start":{"line":27,"column":47,"offset":1767},"end":{"line":27,"column":51,"offset":1771},"indent":[]}}],"position":{"start":{"line":27,"column":46,"offset":1766},"end":{"line":27,"column":129,"offset":1849},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":27,"column":129,"offset":1849},"end":{"line":27,"column":130,"offset":1850},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1721},"end":{"line":27,"column":130,"offset":1850},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":29,"column":4,"offset":1857},"end":{"line":29,"column":21,"offset":1874},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1854},"end":{"line":29,"column":21,"offset":1874},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":31,"column":1,"offset":1878},"end":{"line":31,"column":171,"offset":2048},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1878},"end":{"line":31,"column":171,"offset":2048},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There is no special mapping required for arrays. You can store multiple values with single field without predefining schema.","position":{"start":{"line":33,"column":1,"offset":2052},"end":{"line":33,"column":125,"offset":2176},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2052},"end":{"line":33,"column":125,"offset":2176},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#indexing-data","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Indexing Data","position":{"start":{"line":35,"column":4,"offset":2183},"end":{"line":35,"column":17,"offset":2196},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2180},"end":{"line":35,"column":17,"offset":2196},"indent":[]},"data":{"id":"indexing-data","htmlAttributes":{"id":"indexing-data"},"hProperties":{"id":"indexing-data"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/search/1 -d '{\n  \"repo\" : \"reddit\",\n  \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n  \"owner\" : \"reddit\",\n  \"url\" : \"https://github.com/reddit/reddit\",\n  \"stars\" : 13053,\n  \"language\" : \"Python\",\n  \"created-on\" : \"2008-06-18T23:30:53Z\"\n}'</code></pre>\n      </div>","position":{"start":{"line":37,"column":1,"offset":2200},"end":{"line":47,"column":4,"offset":2486},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Here document is indexed under the ","position":{"start":{"line":49,"column":1,"offset":2490},"end":{"line":49,"column":36,"offset":2525},"indent":[]}},{"type":"inlineCode","value":"tagwise","position":{"start":{"line":49,"column":36,"offset":2525},"end":{"line":49,"column":45,"offset":2534},"indent":[]}},{"type":"text","value":" index and ","position":{"start":{"line":49,"column":45,"offset":2534},"end":{"line":49,"column":56,"offset":2545},"indent":[]}},{"type":"inlineCode","value":"search","position":{"start":{"line":49,"column":56,"offset":2545},"end":{"line":49,"column":64,"offset":2553},"indent":[]}},{"type":"text","value":" type.","position":{"start":{"line":49,"column":64,"offset":2553},"end":{"line":49,"column":70,"offset":2559},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2490},"end":{"line":49,"column":70,"offset":2559},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If we look back at our data mappings, they should now look like as follows","position":{"start":{"line":51,"column":1,"offset":2563},"end":{"line":51,"column":75,"offset":2637},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2563},"end":{"line":51,"column":75,"offset":2637},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/_mapping?pretty</code></pre>\n      </div>","position":{"start":{"line":53,"column":1,"offset":2641},"end":{"line":55,"column":4,"offset":2689},"indent":[1,1]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"tagwise\": {\n    \"mappings\": {\n      \"search\": {\n        \"properties\": {\n          \"owner\": {\n            \"type\": \"string\"\n          },\n          \"repo\": {\n            \"type\": \"string\"\n          },\n          \"tags\": {\n            \"type\": \"string\"\n          },\n          \"url\": {\n            \"type\": \"string\"\n          },\n          \"stars\": {\n            \"type\": \"integer\"\n          },\n          \"language\": {\n            \"type\": \"string\"\n          },\n          \"created-on\": {\n            \"type\": \"date\"\n          }\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":57,"column":1,"offset":2693},"end":{"line":89,"column":4,"offset":3286},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Elasticsearch created these mappings dynamically based on our indexed data.","position":{"start":{"line":91,"column":1,"offset":3290},"end":{"line":91,"column":76,"offset":3365},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":3290},"end":{"line":91,"column":76,"offset":3365},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":93,"column":4,"offset":3372},"end":{"line":93,"column":21,"offset":3389},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":3369},"end":{"line":93,"column":21,"offset":3389},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser ","position":{"start":{"line":95,"column":1,"offset":3393},"end":{"line":95,"column":108,"offset":3500},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA","children":[{"type":"text","value":"here. ","position":{"start":{"line":95,"column":109,"offset":3501},"end":{"line":95,"column":115,"offset":3507},"indent":[]}},{"type":"image","title":null,"url":"http://i.imgur.com/x7nLB9s.png","alt":null,"position":{"start":{"line":95,"column":115,"offset":3507},"end":{"line":95,"column":150,"offset":3542},"indent":[]}}],"position":{"start":{"line":95,"column":108,"offset":3500},"end":{"line":95,"column":492,"offset":3884},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":3393},"end":{"line":95,"column":492,"offset":3884},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":97,"column":4,"offset":3891},"end":{"line":97,"column":9,"offset":3896},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":3888},"end":{"line":97,"column":9,"offset":3896},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Elasticsearch array supports ","position":{"start":{"line":99,"column":1,"offset":3900},"end":{"line":99,"column":30,"offset":3929},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"match","position":{"start":{"line":99,"column":32,"offset":3931},"end":{"line":99,"column":37,"offset":3936},"indent":[]}}],"position":{"start":{"line":99,"column":30,"offset":3929},"end":{"line":99,"column":39,"offset":3938},"indent":[]}},{"type":"text","value":" as well as ","position":{"start":{"line":99,"column":39,"offset":3938},"end":{"line":99,"column":51,"offset":3950},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"term","position":{"start":{"line":99,"column":53,"offset":3952},"end":{"line":99,"column":57,"offset":3956},"indent":[]}}],"position":{"start":{"line":99,"column":51,"offset":3950},"end":{"line":99,"column":59,"offset":3958},"indent":[]}},{"type":"text","value":" query. Let’s write our first search query for the arrays.","position":{"start":{"line":99,"column":59,"offset":3958},"end":{"line":99,"column":117,"offset":4016},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":3900},"end":{"line":99,"column":117,"offset":4016},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Syntax for ","position":{"start":{"line":101,"column":1,"offset":4020},"end":{"line":101,"column":12,"offset":4031},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"term","position":{"start":{"line":101,"column":14,"offset":4033},"end":{"line":101,"column":18,"offset":4037},"indent":[]}}],"position":{"start":{"line":101,"column":12,"offset":4031},"end":{"line":101,"column":20,"offset":4039},"indent":[]}},{"type":"text","value":" query -","position":{"start":{"line":101,"column":20,"offset":4039},"end":{"line":101,"column":28,"offset":4047},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":4020},"end":{"line":101,"column":28,"offset":4047},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n  \"query\": {\n    \"term\": {\n      \"tags\": \"reddit\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":103,"column":1,"offset":4051},"end":{"line":111,"column":4,"offset":4180},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Syntax for ","position":{"start":{"line":113,"column":1,"offset":4184},"end":{"line":113,"column":12,"offset":4195},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"match","position":{"start":{"line":113,"column":14,"offset":4197},"end":{"line":113,"column":19,"offset":4202},"indent":[]}}],"position":{"start":{"line":113,"column":12,"offset":4195},"end":{"line":113,"column":21,"offset":4204},"indent":[]}},{"type":"text","value":" query -","position":{"start":{"line":113,"column":21,"offset":4204},"end":{"line":113,"column":29,"offset":4212},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":4184},"end":{"line":113,"column":29,"offset":4212},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n  \"query\": {\n    \"match\": {\n      \"tags\": \"reddit\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":115,"column":1,"offset":4216},"end":{"line":123,"column":4,"offset":4346},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response:","position":{"start":{"line":125,"column":5,"offset":4354},"end":{"line":125,"column":14,"offset":4363},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":4350},"end":{"line":125,"column":14,"offset":4363},"indent":[]},"data":{"id":"response","htmlAttributes":{"id":"response"},"hProperties":{"id":"response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 14,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 6.1179934,\n    \"hits\" : [ {\n      \"_index\" : \"tagwise\",\n      \"_type\" : \"search\",\n      \"_id\" : \"AVvR1yM3gPzdwFFNDvs7\",\n      \"_score\" : 6.1179934,\n      \"_source\" : {\n        \"repo\" : \"reddit\",\n        \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n        \"owner\" : \"reddit\",\n        \"url\" : \"https://github.com/reddit/reddit\",\n        \"stars\" : 13053,\n        \"language\" : \"Python\",\n        \"created-on\" : \"2008-06-18T23:30:53Z\"\n      }\n    } ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":127,"column":1,"offset":4367},"end":{"line":156,"column":4,"offset":5026},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can also try out this query interactively  ","position":{"start":{"line":158,"column":1,"offset":5030},"end":{"line":158,"column":48,"offset":5077},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/mirage/#?input_state=XQAAAAIqBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmHCrDFs7iDKutPu_ClxcjCYOqUqELVPJ0G6sKj4u2r8c-T_5P6GlG49XYgfc2GYuMMRuSumifCxuSSCXtOAxs6Hde1p2VgSpnD3tfQtwbKtmlUV9FWFj1xXnSypOS15FxHENksJUxXCtYmd4iVjGL1bowAxrWfOuw1nuIcWHek4srAs1sTP0SOd6XPS6-blE0WjAQt4ce9B23dy_19xYCecMoWthMwrwWTFypBAO8Vcd9w4VuVo1KU8LBRzuRLhDL0KvF_VG62ehVISj4Ty-MiHt6Wpb2oKqBeU0_RAvNWfU1QZMs-TXvpXEXsEaIoh-foBQR6mza5cKEG3-8vZnMLBXW2J5sjEUeM7tqfjdgcDJCjC3ICatsg2wVEme8RVF3cFkkDDX0MTi9_t1eIrq8yU3AHAMZqvAUb5mkmRVWPKetqsE-i4GQyerYVnSY-EJXAPnnip8IXLbYRM8d4ocCXD3R20C7ZwGFGG0MuPIwmzwrf6hStk8ddjvTn81vDwIPDnr91ov42AvY0-7Kb5CpGG6dF2kFR7xcKxyVCxYfbE8Wl2f0RTH6jk-GS7HuqFdz4MEIWS63yeqQ-jajHPetrQP81BisYnXF281pV7ajxzqx8kkTagiyRT9mQsOR_oMVCT63LKNBeCSnffodl6mf_7Qo1M","children":[{"type":"text","value":"here. ","position":{"start":{"line":158,"column":49,"offset":5078},"end":{"line":158,"column":55,"offset":5084},"indent":[]}},{"type":"image","title":null,"url":"http://i.imgur.com/9bg2TMJ.png","alt":null,"position":{"start":{"line":158,"column":55,"offset":5084},"end":{"line":158,"column":90,"offset":5119},"indent":[]}}],"position":{"start":{"line":158,"column":48,"offset":5077},"end":{"line":158,"column":864,"offset":5893},"indent":[]}}],"position":{"start":{"line":158,"column":1,"offset":5030},"end":{"line":158,"column":864,"offset":5893},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You should next read about ","position":{"start":{"line":160,"column":1,"offset":5897},"end":{"line":160,"column":28,"offset":5924},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/tagwise-search/exact-match.html","children":[{"type":"strong","children":[{"type":"text","value":"exact match","position":{"start":{"line":160,"column":31,"offset":5927},"end":{"line":160,"column":42,"offset":5938},"indent":[]}}],"position":{"start":{"line":160,"column":29,"offset":5925},"end":{"line":160,"column":44,"offset":5940},"indent":[]}}],"position":{"start":{"line":160,"column":28,"offset":5924},"end":{"line":160,"column":120,"offset":6016},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":160,"column":120,"offset":6016},"end":{"line":160,"column":121,"offset":6017},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":5897},"end":{"line":160,"column":121,"offset":6017},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":161,"column":1,"offset":6019}}}},{"id":"transformer-remark-markdown-ast-8662744ad1a3738273b6babede46e7db-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: searchbar\ntitle: \"Searchbar\"\nlayout: tutorial\nsectionid: searchbar\npermalink: searchbar/searchbar.html\nprev: suggestions.html\nprevTitle: \"Suggestions\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":9,"column":4,"offset":170},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":11,"column":1,"offset":174},"end":{"line":11,"column":41,"offset":214},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"how to build a search bar","position":{"start":{"line":11,"column":44,"offset":217},"end":{"line":11,"column":69,"offset":242},"indent":[]}}],"position":{"start":{"line":11,"column":42,"offset":215},"end":{"line":11,"column":71,"offset":244},"indent":[]}}],"position":{"start":{"line":11,"column":41,"offset":214},"end":{"line":11,"column":143,"offset":316},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":11,"column":143,"offset":316},"end":{"line":11,"column":144,"offset":317},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":174},"end":{"line":11,"column":144,"offset":317},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#how-to-make-a-normal-search-bar","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to make a normal search bar","position":{"start":{"line":13,"column":4,"offset":324},"end":{"line":13,"column":35,"offset":355},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":321},"end":{"line":13,"column":35,"offset":355},"indent":[]},"data":{"id":"how-to-make-a-normal-search-bar","htmlAttributes":{"id":"how-to-make-a-normal-search-bar"},"hProperties":{"id":"how-to-make-a-normal-search-bar"}}},{"type":"paragraph","children":[{"type":"text","value":"This chapter compiles what we learnt so far in the series to implement a searchbar query and UI using Elasticsearch.","position":{"start":{"line":15,"column":1,"offset":359},"end":{"line":15,"column":117,"offset":475},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":359},"end":{"line":15,"column":117,"offset":475},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The main functionalities that we will need for doing this are:","position":{"start":{"line":17,"column":1,"offset":479},"end":{"line":17,"column":63,"offset":541},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":479},"end":{"line":17,"column":63,"offset":541},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Auto complete","position":{"start":{"line":19,"column":6,"offset":550},"end":{"line":19,"column":19,"offset":563},"indent":[]}}],"position":{"start":{"line":19,"column":4,"offset":548},"end":{"line":19,"column":21,"offset":565},"indent":[]}},{"type":"text","value":" - While user types, we need to provide auto-completion for the input queries. Auto-complete functionality should be as fast as a user types to provide instant feedback relevant to what a user has already typed in.  Elasticsearch provides a convenient way to get autocomplete up and running quickly with its completion suggester feature.","position":{"start":{"line":19,"column":21,"offset":565},"end":{"line":19,"column":358,"offset":902},"indent":[]}}],"position":{"start":{"line":19,"column":4,"offset":548},"end":{"line":19,"column":358,"offset":902},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":545},"end":{"line":19,"column":358,"offset":902},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Suggestions","position":{"start":{"line":20,"column":6,"offset":909},"end":{"line":20,"column":17,"offset":920},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":907},"end":{"line":20,"column":19,"offset":922},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":20,"column":19,"offset":922},"end":{"line":20,"column":21,"offset":924},"indent":[]}},{"type":"text","value":"or full text search","position":{"start":{"line":20,"column":21,"offset":924},"end":{"line":20,"column":40,"offset":943},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":20,"column":40,"offset":943},"end":{"line":20,"column":42,"offset":945},"indent":[]}},{"type":"text","value":" - Use quick suggestions to help users save time, iterate on their searches, and get the results they want. It helps to show the relevant data to user inputs.","position":{"start":{"line":20,"column":42,"offset":945},"end":{"line":20,"column":200,"offset":1103},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":907},"end":{"line":20,"column":200,"offset":1103},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":904},"end":{"line":20,"column":200,"offset":1103},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"UI","position":{"start":{"line":21,"column":6,"offset":1110},"end":{"line":21,"column":8,"offset":1112},"indent":[]}}],"position":{"start":{"line":21,"column":4,"offset":1108},"end":{"line":21,"column":10,"offset":1114},"indent":[]}},{"type":"text","value":" - For building the UI, we will use a React components library that provides us the scaffolding for the UI where we can inject the Elasticsearch query.","position":{"start":{"line":21,"column":10,"offset":1114},"end":{"line":21,"column":161,"offset":1265},"indent":[]}}],"position":{"start":{"line":21,"column":4,"offset":1108},"end":{"line":21,"column":161,"offset":1265},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1105},"end":{"line":21,"column":161,"offset":1265},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":545},"end":{"line":21,"column":161,"offset":1265},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Note:","position":{"start":{"line":23,"column":1,"offset":1269},"end":{"line":23,"column":8,"offset":1276},"indent":[]}},{"type":"text","value":" You can deep dive into the implementation details of the above two functionalities through these chapters - ","position":{"start":{"line":23,"column":8,"offset":1276},"end":{"line":23,"column":117,"offset":1385},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/appbaseio/esc/blob/master/searchbar/auto-complete.md","children":[{"type":"text","value":"Auto Completion","position":{"start":{"line":23,"column":118,"offset":1386},"end":{"line":23,"column":133,"offset":1401},"indent":[]}}],"position":{"start":{"line":23,"column":117,"offset":1385},"end":{"line":23,"column":207,"offset":1475},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":23,"column":207,"offset":1475},"end":{"line":23,"column":212,"offset":1480},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/appbaseio/esc/blob/master/searchbar/suggestions.md","children":[{"type":"text","value":"Suggestions","position":{"start":{"line":23,"column":213,"offset":1481},"end":{"line":23,"column":224,"offset":1492},"indent":[]}}],"position":{"start":{"line":23,"column":212,"offset":1480},"end":{"line":23,"column":296,"offset":1564},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":23,"column":296,"offset":1564},"end":{"line":23,"column":297,"offset":1565},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1269},"end":{"line":23,"column":297,"offset":1565},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":25,"column":4,"offset":1572},"end":{"line":25,"column":21,"offset":1589},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1569},"end":{"line":25,"column":21,"offset":1589},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":27,"column":1,"offset":1593},"end":{"line":27,"column":171,"offset":1763},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1593},"end":{"line":27,"column":171,"offset":1763},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this section, we will specify the mappings for our two fields: city and country, with the necessary settings to enable auto-complete and suggestion functionalities.","position":{"start":{"line":29,"column":1,"offset":1767},"end":{"line":29,"column":168,"offset":1934},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1767},"end":{"line":29,"column":168,"offset":1934},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"auto-suggest","position":{"start":{"line":31,"column":1,"offset":1938},"end":{"line":31,"column":15,"offset":1952},"indent":[]}},{"type":"text","value":" analyzer will be useful to get the suggestions. For the auto completion we will use the ","position":{"start":{"line":31,"column":15,"offset":1952},"end":{"line":31,"column":104,"offset":2041},"indent":[]}},{"type":"inlineCode","value":"simple","position":{"start":{"line":31,"column":104,"offset":2041},"end":{"line":31,"column":112,"offset":2049},"indent":[]}},{"type":"text","value":" analyzer that tokenizes the text as is ","position":{"start":{"line":31,"column":112,"offset":2049},"end":{"line":31,"column":152,"offset":2089},"indent":[]}},{"type":"text","value":"(","position":{"start":{"line":31,"column":152,"offset":2089},"end":{"line":31,"column":154,"offset":2091},"indent":[]}},{"type":"text","value":"i.e. no white space splitting","position":{"start":{"line":31,"column":154,"offset":2091},"end":{"line":31,"column":183,"offset":2120},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":31,"column":183,"offset":2120},"end":{"line":31,"column":185,"offset":2122},"indent":[]}},{"type":"text","value":" and applies a lowercase filter.","position":{"start":{"line":31,"column":185,"offset":2122},"end":{"line":31,"column":217,"offset":2154},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1938},"end":{"line":31,"column":217,"offset":2154},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/_settings?pretty -d '{\n  \"analysis\": {\n    \"tokenizer\": {\n      \"ngramizer\": {\n        \"type\": \"ngram\",\n        \"min_gram\": 1,\n        \"max_gram\": 10,\n        \"token_chars\": [\n          \"letter\",\n          \"digit\",\n          \"punctuation\",\n          \"symbol\"\n        ]\n      }\n  },\n    \"analyzer\": {\n      \"auto-suggest\": {\n        \"type\": \"custom\",\n        \"tokenizer\": \"ngramizer\",\n        \"filter\": [\n          \"lowercase\",\n          \"asciifolding\"\n        ]\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":33,"column":1,"offset":2158},"end":{"line":61,"column":4,"offset":2714},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We just added a custom analyzers. The ","position":{"start":{"line":63,"column":1,"offset":2718},"end":{"line":63,"column":39,"offset":2756},"indent":[]}},{"type":"inlineCode","value":"_settings","position":{"start":{"line":63,"column":39,"offset":2756},"end":{"line":63,"column":50,"offset":2767},"indent":[]}},{"type":"text","value":" endpoint can be used for adding one or more custom analyzers.","position":{"start":{"line":63,"column":50,"offset":2767},"end":{"line":63,"column":112,"offset":2829},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2718},"end":{"line":63,"column":112,"offset":2829},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings-1","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":65,"column":4,"offset":2836},"end":{"line":65,"column":21,"offset":2853},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2833},"end":{"line":65,"column":21,"offset":2853},"indent":[]},"data":{"id":"defining-mappings-1","htmlAttributes":{"id":"defining-mappings-1"},"hProperties":{"id":"defining-mappings-1"}}},{"type":"paragraph","children":[{"type":"text","value":"Here we will use two fields and two subfields each of these fields. These subfields are useful to store the same data in a different manner. ","position":{"start":{"line":67,"column":1,"offset":2857},"end":{"line":67,"column":142,"offset":2998},"indent":[]}},{"type":"inlineCode","value":"city","position":{"start":{"line":67,"column":142,"offset":2998},"end":{"line":67,"column":148,"offset":3004},"indent":[]}},{"type":"text","value":" field is useful to index the cities with the default analyzer of Elasticsearch.","position":{"start":{"line":67,"column":148,"offset":3004},"end":{"line":67,"column":228,"offset":3084},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":2857},"end":{"line":67,"column":228,"offset":3084},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"city_autocomplete","position":{"start":{"line":69,"column":1,"offset":3088},"end":{"line":69,"column":20,"offset":3107},"indent":[]}},{"type":"text","value":" subfield is useful for the auto-completion feature. It indexes and searches the data using ","position":{"start":{"line":69,"column":20,"offset":3107},"end":{"line":69,"column":112,"offset":3199},"indent":[]}},{"type":"inlineCode","value":"simple","position":{"start":{"line":69,"column":112,"offset":3199},"end":{"line":69,"column":120,"offset":3207},"indent":[]}},{"type":"text","value":" analyzer and with type ","position":{"start":{"line":69,"column":120,"offset":3207},"end":{"line":69,"column":144,"offset":3231},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"completion","position":{"start":{"line":69,"column":146,"offset":3233},"end":{"line":69,"column":156,"offset":3243},"indent":[]}}],"position":{"start":{"line":69,"column":144,"offset":3231},"end":{"line":69,"column":158,"offset":3245},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":69,"column":158,"offset":3245},"end":{"line":69,"column":159,"offset":3246},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":3088},"end":{"line":69,"column":159,"offset":3246},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"city_autocomplete","position":{"start":{"line":71,"column":1,"offset":3250},"end":{"line":71,"column":20,"offset":3269},"indent":[]}},{"type":"text","value":" subfield is useful for the auto-suggestion feature. It indexes the data using ","position":{"start":{"line":71,"column":20,"offset":3269},"end":{"line":71,"column":99,"offset":3348},"indent":[]}},{"type":"inlineCode","value":"auto-suggest","position":{"start":{"line":71,"column":99,"offset":3348},"end":{"line":71,"column":113,"offset":3362},"indent":[]}},{"type":"text","value":" analyzer, searches the data using ","position":{"start":{"line":71,"column":113,"offset":3362},"end":{"line":71,"column":148,"offset":3397},"indent":[]}},{"type":"inlineCode","value":"simple","position":{"start":{"line":71,"column":148,"offset":3397},"end":{"line":71,"column":156,"offset":3405},"indent":[]}},{"type":"text","value":" analyzer and is of type ","position":{"start":{"line":71,"column":156,"offset":3405},"end":{"line":71,"column":181,"offset":3430},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"text","position":{"start":{"line":71,"column":183,"offset":3432},"end":{"line":71,"column":187,"offset":3436},"indent":[]}}],"position":{"start":{"line":71,"column":181,"offset":3430},"end":{"line":71,"column":189,"offset":3438},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":71,"column":189,"offset":3438},"end":{"line":71,"column":190,"offset":3439},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":3250},"end":{"line":71,"column":190,"offset":3439},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Similar sub-field structure will also hold true for the country field.","position":{"start":{"line":73,"column":1,"offset":3443},"end":{"line":73,"column":71,"offset":3513},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":3443},"end":{"line":73,"column":71,"offset":3513},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/_mapping/searchbar -d '{\n  \"searchbar\": {\n    \"properties\": {\n      \"city\": {\n        \"type\": \"text\",\n        \"fields\": {\n          \"city_autocomplete\": {\n            \"type\": \"completion\",\n            \"analyzer\": \"simple\",\n            \"search_analyzer\": \"simple\"\n          },\n          \"city_autosuggest\": {\n            \"type\": \"text\",\n            \"analyzer\": \"auto-suggest\",\n            \"search_analyzer\": \"simple\"\n          }\n        }\n      },\n      \"country\": {\n        \"type\": \"text\",\n        \"fields\": {\n          \"country_autocomplete\": {\n            \"type\": \"completion\",\n            \"analyzer\": \"simple\",\n            \"search_analyzer\": \"simple\"\n          },\n          \"country_autosuggest\": {\n            \"type\": \"text\",\n            \"analyzer\": \"auto-suggest\",\n            \"search_analyzer\": \"simple\"\n          }\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":75,"column":1,"offset":3517},"end":{"line":112,"column":4,"offset":4452},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#data-indexing","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Indexing","position":{"start":{"line":114,"column":5,"offset":4460},"end":{"line":114,"column":18,"offset":4473},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":4456},"end":{"line":114,"column":18,"offset":4473},"indent":[]},"data":{"id":"data-indexing","htmlAttributes":{"id":"data-indexing"},"hProperties":{"id":"data-indexing"}}},{"type":"paragraph","children":[{"type":"text","value":"As you can see, while indexing the data, we only need to insert the city and country fields.","position":{"start":{"line":116,"column":1,"offset":4477},"end":{"line":116,"column":93,"offset":4569},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":4477},"end":{"line":116,"column":93,"offset":4569},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>","position":{"start":{"line":118,"column":1,"offset":4573},"end":{"line":123,"column":4,"offset":4695},"indent":[1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":125,"column":5,"offset":4703},"end":{"line":125,"column":22,"offset":4720},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":4699},"end":{"line":125,"column":22,"offset":4720},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For accessibility, we have indexed ~15,000 data points that can be viewed in the data browser ","position":{"start":{"line":127,"column":1,"offset":4724},"end":{"line":127,"column":95,"offset":4818},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&editable=false","children":[{"type":"text","value":"here. ","position":{"start":{"line":127,"column":96,"offset":4819},"end":{"line":127,"column":102,"offset":4825},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/rHOEixS.png","alt":null,"position":{"start":{"line":127,"column":102,"offset":4825},"end":{"line":127,"column":138,"offset":4861},"indent":[]}}],"position":{"start":{"line":127,"column":95,"offset":4818},"end":{"line":127,"column":491,"offset":5214},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":127,"column":491,"offset":5214},"end":{"line":127,"column":492,"offset":5215},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":4724},"end":{"line":127,"column":492,"offset":5215},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":129,"column":5,"offset":5223},"end":{"line":129,"column":10,"offset":5228},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":5219},"end":{"line":129,"column":10,"offset":5228},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Next, we will move to the queries section. Here, we will be using the match query for getting the dropdown suggestions and will be using the ","position":{"start":{"line":131,"column":1,"offset":5232},"end":{"line":131,"column":142,"offset":5373},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"completion","position":{"start":{"line":131,"column":144,"offset":5375},"end":{"line":131,"column":154,"offset":5385},"indent":[]}}],"position":{"start":{"line":131,"column":142,"offset":5373},"end":{"line":131,"column":156,"offset":5387},"indent":[]}},{"type":"text","value":" suggester query for getting the autocomplete suggestions. Let’s first query on the ","position":{"start":{"line":131,"column":156,"offset":5387},"end":{"line":131,"column":240,"offset":5471},"indent":[]}},{"type":"inlineCode","value":"city","position":{"start":{"line":131,"column":240,"offset":5471},"end":{"line":131,"column":246,"offset":5477},"indent":[]}},{"type":"text","value":" field.","position":{"start":{"line":131,"column":246,"offset":5477},"end":{"line":131,"column":253,"offset":5484},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":5232},"end":{"line":131,"column":253,"offset":5484},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?pretty\" -d '{\n  \"query\": {\n    \"match\": {\n      \"city.city_autosuggest\": \"New\"\n    }\n  },\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"New\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":133,"column":1,"offset":5488},"end":{"line":149,"column":4,"offset":5795},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response","position":{"start":{"line":151,"column":7,"offset":5805},"end":{"line":151,"column":15,"offset":5813},"indent":[]}}],"position":{"start":{"line":151,"column":1,"offset":5799},"end":{"line":151,"column":15,"offset":5813},"indent":[]},"data":{"id":"response","htmlAttributes":{"id":"response"},"hProperties":{"id":"response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 18,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 2.6197505,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 2.6197505,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYTTkhvsk2FETcNLo\",\n      \"_score\" : 2.6197505,\n      \"_source\" : {\n        \"city\" : \"New Farm\",\n        \"country\" : \"Australia\"\n      }\n    }]\n  },\n  \"suggest\" : {\n    \"city-suggest\" : [ {\n      \"text\" : \"New\",\n      \"offset\" : 0,\n      \"length\" : 3,\n      \"options\" : [ {\n        \"text\" : \"Newport\",\n        \"score\" : 5.0\n      }, {\n        \"text\" : \"Newmarket\",\n        \"score\" : 2.0\n      } ]\n    } ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":153,"column":1,"offset":5817},"end":{"line":200,"column":4,"offset":6797},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":6,"children":[{"type":"link","url":"#note-there-is-some-overlap-between-the-autocompletion-and-autosuggestion-feature-heres-why-we-make-two-separate-queries","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Note: There is some overlap between the autocompletion and autosuggestion feature, here’s why we make two separate queries.","position":{"start":{"line":202,"column":8,"offset":6808},"end":{"line":202,"column":131,"offset":6931},"indent":[]}}],"position":{"start":{"line":202,"column":1,"offset":6801},"end":{"line":202,"column":131,"offset":6931},"indent":[]},"data":{"id":"note-there-is-some-overlap-between-the-autocompletion-and-autosuggestion-feature-heres-why-we-make-two-separate-queries","htmlAttributes":{"id":"note-there-is-some-overlap-between-the-autocompletion-and-autosuggestion-feature-heres-why-we-make-two-separate-queries"},"hProperties":{"id":"note-there-is-some-overlap-between-the-autocompletion-and-autosuggestion-feature-heres-why-we-make-two-separate-queries"}}},{"type":"table","align":["left","left"],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Autocompletion","position":{"start":{"line":204,"column":3,"offset":6937},"end":{"line":204,"column":17,"offset":6951},"indent":[]}}],"position":{"start":{"line":204,"column":3,"offset":6937},"end":{"line":204,"column":17,"offset":6951},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Autosuggestion","position":{"start":{"line":204,"column":20,"offset":6954},"end":{"line":204,"column":34,"offset":6968},"indent":[]}}],"position":{"start":{"line":204,"column":20,"offset":6954},"end":{"line":204,"column":34,"offset":6968},"indent":[]}}],"position":{"start":{"line":204,"column":1,"offset":6935},"end":{"line":204,"column":36,"offset":6970},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Uses the suggest query and completion mapping type.","position":{"start":{"line":206,"column":3,"offset":6991},"end":{"line":206,"column":54,"offset":7042},"indent":[]}}],"position":{"start":{"line":206,"column":3,"offset":6991},"end":{"line":206,"column":54,"offset":7042},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Uses the match query with a n-gram based indexing analyzer.","position":{"start":{"line":206,"column":57,"offset":7045},"end":{"line":206,"column":116,"offset":7104},"indent":[]}}],"position":{"start":{"line":206,"column":57,"offset":7045},"end":{"line":206,"column":116,"offset":7104},"indent":[]}}],"position":{"start":{"line":206,"column":1,"offset":6989},"end":{"line":206,"column":118,"offset":7106},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Only offers suggestions that match from the beginning of the search query, e.g. “Yor” will return “York” but now “New York”.","position":{"start":{"line":207,"column":3,"offset":7110},"end":{"line":207,"column":127,"offset":7234},"indent":[]}}],"position":{"start":{"line":207,"column":3,"offset":7110},"end":{"line":207,"column":127,"offset":7234},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Offers hits that contains the search query, it doesn’t necessarily need to start with the query. e.g. “Yor” may also return “New York” in the matching result.","position":{"start":{"line":207,"column":130,"offset":7237},"end":{"line":207,"column":288,"offset":7395},"indent":[]}}],"position":{"start":{"line":207,"column":130,"offset":7237},"end":{"line":207,"column":288,"offset":7395},"indent":[]}}],"position":{"start":{"line":207,"column":1,"offset":7108},"end":{"line":207,"column":290,"offset":7397},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Since autocompletion doesn’t tokenize the word, the suggest query here works on words of most practical lengths.","position":{"start":{"line":208,"column":3,"offset":7401},"end":{"line":208,"column":115,"offset":7513},"indent":[]}}],"position":{"start":{"line":208,"column":3,"offset":7401},"end":{"line":208,"column":115,"offset":7513},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Since we rely on n-grams here, the search’s usability is limited to the max token length - 10 in our example.","position":{"start":{"line":208,"column":118,"offset":7516},"end":{"line":208,"column":227,"offset":7625},"indent":[]}}],"position":{"start":{"line":208,"column":118,"offset":7516},"end":{"line":208,"column":227,"offset":7625},"indent":[]}}],"position":{"start":{"line":208,"column":1,"offset":7399},"end":{"line":208,"column":229,"offset":7627},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Autocompletion’s storage is more efficient because it doesn’t breakdown the words into overlapping tokens.","position":{"start":{"line":209,"column":3,"offset":7631},"end":{"line":209,"column":109,"offset":7737},"indent":[]}}],"position":{"start":{"line":209,"column":3,"offset":7631},"end":{"line":209,"column":109,"offset":7737},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"The longer the n-gram token length, the storage requirements increase quadratically.","position":{"start":{"line":209,"column":112,"offset":7740},"end":{"line":209,"column":196,"offset":7824},"indent":[]}}],"position":{"start":{"line":209,"column":112,"offset":7740},"end":{"line":209,"column":196,"offset":7824},"indent":[]}}],"position":{"start":{"line":209,"column":1,"offset":7629},"end":{"line":209,"column":198,"offset":7826},"indent":[]}}],"position":{"start":{"line":204,"column":1,"offset":6935},"end":{"line":209,"column":198,"offset":7826},"indent":[1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#query-on-both-city-and-country","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query on both City and Country","position":{"start":{"line":211,"column":6,"offset":7835},"end":{"line":211,"column":36,"offset":7865},"indent":[]}}],"position":{"start":{"line":211,"column":1,"offset":7830},"end":{"line":211,"column":36,"offset":7865},"indent":[]},"data":{"id":"query-on-both-city-and-country","htmlAttributes":{"id":"query-on-both-city-and-country"},"hProperties":{"id":"query-on-both-city-and-country"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?pretty\" -d '{\n  \"query\": {\n     \"multi_match\": {\n        \"query\": \"New\",\n        \"fields\": [\"city.city_autosuggest\", \"country.country_autosuggest\"]\n    }\n  },\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"New\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    },\n    \"country-suggest\": {\n      \"text\": \"New\",\n      \"completion\": {\n        \"field\": \"country.country_autocomplete\"\n      }\n    }\n  }       \n}'</code></pre>\n      </div>","position":{"start":{"line":213,"column":1,"offset":7869},"end":{"line":236,"column":4,"offset":8390},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#query-response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query Response","position":{"start":{"line":238,"column":5,"offset":8398},"end":{"line":238,"column":19,"offset":8412},"indent":[]}}],"position":{"start":{"line":238,"column":1,"offset":8394},"end":{"line":238,"column":19,"offset":8412},"indent":[]},"data":{"id":"query-response","htmlAttributes":{"id":"query-response"},"hProperties":{"id":"query-response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 15,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 1.7185925,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 1.7185925,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYTTkhvsk2FETcNLo\",\n      \"_score\" : 1.7185925,\n      \"_source\" : {\n        \"city\" : \"New Farm\",\n        \"country\" : \"Australia\"\n      }\n    } ]\n  },\n  \"suggest\" : {\n    \"country-suggest\" : [ {\n      \"text\" : \"New\",\n      \"offset\" : 0,\n      \"length\" : 3,\n      \"options\" : [ ]\n    } ],\n    \"city-suggest\" : [ {\n      \"text\" : \"New\",\n      \"offset\" : 0,\n      \"length\" : 3,\n      \"options\" : [ {\n        \"text\" : \"Newport\",\n        \"score\" : 5.0\n      }, {\n        \"text\" : \"Newmarket\",\n        \"score\" : 2.0\n      } ]\n    } ]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":240,"column":1,"offset":8416},"end":{"line":293,"column":4,"offset":9524},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#implementing-the-searchbar-with-a-ui","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Implementing the searchbar with a UI","position":{"start":{"line":295,"column":5,"offset":9532},"end":{"line":295,"column":41,"offset":9568},"indent":[]}}],"position":{"start":{"line":295,"column":1,"offset":9528},"end":{"line":295,"column":41,"offset":9568},"indent":[]},"data":{"id":"implementing-the-searchbar-with-a-ui","htmlAttributes":{"id":"implementing-the-searchbar-with-a-ui"},"hProperties":{"id":"implementing-the-searchbar-with-a-ui"}}},{"type":"paragraph","children":[{"type":"text","value":"// TODO","position":{"start":{"line":297,"column":1,"offset":9572},"end":{"line":297,"column":8,"offset":9579},"indent":[]}}],"position":{"start":{"line":297,"column":1,"offset":9572},"end":{"line":297,"column":8,"offset":9579},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":298,"column":1,"offset":9581}}}},{"id":"transformer-remark-markdown-ast-9865f99b9ec8671cd4b937f6f40493e2-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":{"type":"root","children":[{"type":"yaml","value":"id: suggestions\ntitle: \"Suggestions\"\nlayout: tutorial\nsectionid: suggestions\npermalink: searchbar/suggestions.html\nnext: searchbar.html\nnextTitle: \"Searchbar\"\nprev: auto-complete.html\nprevTitle: \"Auto Complete\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":11,"column":4,"offset":228},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This article is a part of the series on ","position":{"start":{"line":13,"column":1,"offset":232},"end":{"line":13,"column":41,"offset":272},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html","children":[{"type":"strong","children":[{"type":"text","value":"how to build a search bar","position":{"start":{"line":13,"column":44,"offset":275},"end":{"line":13,"column":69,"offset":300},"indent":[]}}],"position":{"start":{"line":13,"column":42,"offset":273},"end":{"line":13,"column":71,"offset":302},"indent":[]}}],"position":{"start":{"line":13,"column":41,"offset":272},"end":{"line":13,"column":143,"offset":374},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":13,"column":143,"offset":374},"end":{"line":13,"column":144,"offset":375},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":232},"end":{"line":13,"column":144,"offset":375},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#how-to-build-an-as-you-type-suggestions-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"How to build an as-you-type suggestions view","position":{"start":{"line":15,"column":5,"offset":383},"end":{"line":15,"column":49,"offset":427},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":379},"end":{"line":15,"column":49,"offset":427},"indent":[]},"data":{"id":"how-to-build-an-as-you-type-suggestions-view","htmlAttributes":{"id":"how-to-build-an-as-you-type-suggestions-view"},"hProperties":{"id":"how-to-build-an-as-you-type-suggestions-view"}}},{"type":"paragraph","children":[{"type":"text","value":"In this post, we will implement a search-as-you-type suggestions feature to help users save time, iterate on their searches, and get the results they want. It can also help with showing the relevant data to user’s inputs. We will be using a dataset containing a list of cities and countries and we will be building this feature using a custom n-gram analyzer.","position":{"start":{"line":17,"column":1,"offset":431},"end":{"line":17,"column":360,"offset":790},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":431},"end":{"line":17,"column":360,"offset":790},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To implement this functionality, we will use a n-gram tokenizer with a custom type analyzer. A custom analyzer allows to combine character filters, tokenizer, and token filters all at once. In this case we have used a self defined ","position":{"start":{"line":19,"column":1,"offset":794},"end":{"line":19,"column":232,"offset":1025},"indent":[]}},{"type":"inlineCode","value":"tokenizer","position":{"start":{"line":19,"column":232,"offset":1025},"end":{"line":19,"column":243,"offset":1036},"indent":[]}},{"type":"text","value":" called ","position":{"start":{"line":19,"column":243,"offset":1036},"end":{"line":19,"column":251,"offset":1044},"indent":[]}},{"type":"inlineCode","value":"ngramizer","position":{"start":{"line":19,"column":251,"offset":1044},"end":{"line":19,"column":262,"offset":1055},"indent":[]}},{"type":"text","value":" which will split on characters that don’t belong to the classes specified in ","position":{"start":{"line":19,"column":262,"offset":1055},"end":{"line":19,"column":340,"offset":1133},"indent":[]}},{"type":"inlineCode","value":"token_chars","position":{"start":{"line":19,"column":340,"offset":1133},"end":{"line":19,"column":353,"offset":1146},"indent":[]}},{"type":"text","value":" field.","position":{"start":{"line":19,"column":353,"offset":1146},"end":{"line":19,"column":360,"offset":1153},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":794},"end":{"line":19,"column":360,"offset":1153},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Note:","position":{"start":{"line":21,"column":1,"offset":1157},"end":{"line":21,"column":8,"offset":1164},"indent":[]}},{"type":"text","value":" An alternate approach can be implemented using Elasticsearch’s ","position":{"start":{"line":21,"column":8,"offset":1164},"end":{"line":21,"column":72,"offset":1228},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"completion","position":{"start":{"line":21,"column":74,"offset":1230},"end":{"line":21,"column":84,"offset":1240},"indent":[]}}],"position":{"start":{"line":21,"column":72,"offset":1228},"end":{"line":21,"column":86,"offset":1242},"indent":[]}},{"type":"text","value":" type and queried using a  ","position":{"start":{"line":21,"column":86,"offset":1242},"end":{"line":21,"column":113,"offset":1269},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"suggester","position":{"start":{"line":21,"column":115,"offset":1271},"end":{"line":21,"column":124,"offset":1280},"indent":[]}}],"position":{"start":{"line":21,"column":113,"offset":1269},"end":{"line":21,"column":126,"offset":1282},"indent":[]}},{"type":"text","value":" type query. You can read more about it in our building a search-as-you-type auto-completion feature post ","position":{"start":{"line":21,"column":126,"offset":1282},"end":{"line":21,"column":232,"offset":1388},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/appbaseio/esc/blob/master/searchbar/auto-complete.md","children":[{"type":"text","value":"here","position":{"start":{"line":21,"column":233,"offset":1389},"end":{"line":21,"column":237,"offset":1393},"indent":[]}}],"position":{"start":{"line":21,"column":232,"offset":1388},"end":{"line":21,"column":311,"offset":1467},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":21,"column":311,"offset":1467},"end":{"line":21,"column":312,"offset":1468},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1157},"end":{"line":21,"column":312,"offset":1468},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#defining-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Defining Mappings","position":{"start":{"line":23,"column":4,"offset":1475},"end":{"line":23,"column":21,"offset":1492},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1472},"end":{"line":23,"column":21,"offset":1492},"indent":[]},"data":{"id":"defining-mappings","htmlAttributes":{"id":"defining-mappings"},"hProperties":{"id":"defining-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.","position":{"start":{"line":25,"column":1,"offset":1496},"end":{"line":25,"column":171,"offset":1666},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1496},"end":{"line":25,"column":171,"offset":1666},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this section, we will specify the mappings for our two fields: city and country, with the necessary settings to enable suggestions functionality.","position":{"start":{"line":27,"column":1,"offset":1670},"end":{"line":27,"column":149,"offset":1818},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1670},"end":{"line":27,"column":149,"offset":1818},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#transforming-data-to-n-gram-tokens-before-indexing","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Transforming data to n-gram tokens before indexing","position":{"start":{"line":29,"column":5,"offset":1826},"end":{"line":29,"column":55,"offset":1876},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1822},"end":{"line":29,"column":55,"offset":1876},"indent":[]},"data":{"id":"transforming-data-to-n-gram-tokens-before-indexing","htmlAttributes":{"id":"transforming-data-to-n-gram-tokens-before-indexing"},"hProperties":{"id":"transforming-data-to-n-gram-tokens-before-indexing"}}},{"type":"paragraph","children":[{"type":"text","value":"We would ideally want the auto-suggestion to work on a text phrase in a way that even if the user types a word that is not at the start of the phrase, we can match it correctly. This is where n-grams come in handy. 3-grams for the phrase “New York” will be ","position":{"start":{"line":31,"column":1,"offset":1880},"end":{"line":31,"column":258,"offset":2137},"indent":[]}},{"type":"text","value":"[","position":{"start":{"line":31,"column":258,"offset":2137},"end":{"line":31,"column":260,"offset":2139},"indent":[]}},{"type":"text","value":"“new”, “yor”, “ork”, “rky”, “kyo”","position":{"start":{"line":31,"column":260,"offset":2139},"end":{"line":31,"column":293,"offset":2172},"indent":[]}},{"type":"text","value":"]","position":{"start":{"line":31,"column":293,"offset":2172},"end":{"line":31,"column":295,"offset":2174},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":31,"column":295,"offset":2174},"end":{"line":31,"column":296,"offset":2175},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1880},"end":{"line":31,"column":296,"offset":2175},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will set our tokenizer to create all ","position":{"start":{"line":33,"column":1,"offset":2179},"end":{"line":33,"column":41,"offset":2219},"indent":[]}},{"type":"text","value":"[","position":{"start":{"line":33,"column":41,"offset":2219},"end":{"line":33,"column":43,"offset":2221},"indent":[]}},{"type":"text","value":"1-10","position":{"start":{"line":33,"column":43,"offset":2221},"end":{"line":33,"column":47,"offset":2225},"indent":[]}},{"type":"text","value":"]","position":{"start":{"line":33,"column":47,"offset":2225},"end":{"line":33,"column":49,"offset":2227},"indent":[]}},{"type":"text","value":" grams of a token. You can read more about ngrams over ","position":{"start":{"line":33,"column":49,"offset":2227},"end":{"line":33,"column":104,"offset":2282},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-ngram-tokenizer.html","children":[{"type":"text","value":"here","position":{"start":{"line":33,"column":105,"offset":2283},"end":{"line":33,"column":109,"offset":2287},"indent":[]}}],"position":{"start":{"line":33,"column":104,"offset":2282},"end":{"line":33,"column":205,"offset":2383},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":33,"column":205,"offset":2383},"end":{"line":33,"column":206,"offset":2384},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2179},"end":{"line":33,"column":206,"offset":2384},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT \"$host/normal_searchbar/_settings?pretty\" -d '{\n  \"analysis\": {\n    \"tokenizer\": {\n      \"ngramizer\": {\n        \"type\": \"ngram\",\n        \"min_gram\": 1,\n        \"max_gram\": 10,\n        \"token_chars\": [\n          \"letter\",\n          \"digit\",\n          \"punctuation\",\n          \"symbol\"\n        ]\n      }\n    },\n    \"analyzer\": {\n      \"auto-suggest\": {\n        \"type\": \"custom\",\n        \"tokenizer\": \"ngramizer\",\n        \"filter\": [\n          \"lowercase\",\n          \"asciifolding\"\n        ]\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":35,"column":1,"offset":2388},"end":{"line":63,"column":4,"offset":2948},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We just added a custom analyzer called ","position":{"start":{"line":65,"column":1,"offset":2952},"end":{"line":65,"column":40,"offset":2991},"indent":[]}},{"type":"inlineCode","value":"auto-suggest","position":{"start":{"line":65,"column":40,"offset":2991},"end":{"line":65,"column":54,"offset":3005},"indent":[]}},{"type":"text","value":" which uses a custom tokenizer ","position":{"start":{"line":65,"column":54,"offset":3005},"end":{"line":65,"column":85,"offset":3036},"indent":[]}},{"type":"inlineCode","value":"ngramizer","position":{"start":{"line":65,"column":85,"offset":3036},"end":{"line":65,"column":96,"offset":3047},"indent":[]}},{"type":"text","value":" for creating ","position":{"start":{"line":65,"column":96,"offset":3047},"end":{"line":65,"column":110,"offset":3061},"indent":[]}},{"type":"text","value":"[","position":{"start":{"line":65,"column":110,"offset":3061},"end":{"line":65,"column":112,"offset":3063},"indent":[]}},{"type":"text","value":"1-10","position":{"start":{"line":65,"column":112,"offset":3063},"end":{"line":65,"column":116,"offset":3067},"indent":[]}},{"type":"text","value":"]","position":{"start":{"line":65,"column":116,"offset":3067},"end":{"line":65,"column":118,"offset":3069},"indent":[]}},{"type":"text","value":"grams for each token.","position":{"start":{"line":65,"column":118,"offset":3069},"end":{"line":65,"column":139,"offset":3090},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2952},"end":{"line":65,"column":139,"offset":3090},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Note:","position":{"start":{"line":67,"column":1,"offset":3094},"end":{"line":67,"column":8,"offset":3101},"indent":[]}},{"type":"text","value":" Where we use type as ","position":{"start":{"line":67,"column":8,"offset":3101},"end":{"line":67,"column":30,"offset":3123},"indent":[]}},{"type":"inlineCode","value":"ngram","position":{"start":{"line":67,"column":30,"offset":3123},"end":{"line":67,"column":37,"offset":3130},"indent":[]}},{"type":"text","value":" in the above snippet, you can also instead set type as ","position":{"start":{"line":67,"column":37,"offset":3130},"end":{"line":67,"column":93,"offset":3186},"indent":[]}},{"type":"inlineCode","value":"edge_ngram","position":{"start":{"line":67,"column":93,"offset":3186},"end":{"line":67,"column":105,"offset":3198},"indent":[]}},{"type":"text","value":". It is like n-gram except filtered by the beginning character of the n-gram. ","position":{"start":{"line":67,"column":105,"offset":3198},"end":{"line":67,"column":183,"offset":3276},"indent":[]}},{"type":"text","value":"[","position":{"start":{"line":67,"column":183,"offset":3276},"end":{"line":67,"column":185,"offset":3278},"indent":[]}},{"type":"text","value":"1-3","position":{"start":{"line":67,"column":185,"offset":3278},"end":{"line":67,"column":188,"offset":3281},"indent":[]}},{"type":"text","value":"]","position":{"start":{"line":67,"column":188,"offset":3281},"end":{"line":67,"column":190,"offset":3283},"indent":[]}},{"type":"text","value":" edge-grams for the phrase “New York” will be ","position":{"start":{"line":67,"column":190,"offset":3283},"end":{"line":67,"column":236,"offset":3329},"indent":[]}},{"type":"text","value":"[","position":{"start":{"line":67,"column":236,"offset":3329},"end":{"line":67,"column":238,"offset":3331},"indent":[]}},{"type":"text","value":"“n”, “ne”, “new”, “y”, “yo”, “yor”","position":{"start":{"line":67,"column":238,"offset":3331},"end":{"line":67,"column":272,"offset":3365},"indent":[]}},{"type":"text","value":"]","position":{"start":{"line":67,"column":272,"offset":3365},"end":{"line":67,"column":274,"offset":3367},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":67,"column":274,"offset":3367},"end":{"line":67,"column":275,"offset":3368},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":3094},"end":{"line":67,"column":275,"offset":3368},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Note:","position":{"start":{"line":69,"column":1,"offset":3372},"end":{"line":69,"column":8,"offset":3379},"indent":[]}},{"type":"text","value":" The ","position":{"start":{"line":69,"column":8,"offset":3379},"end":{"line":69,"column":13,"offset":3384},"indent":[]}},{"type":"inlineCode","value":"_settings","position":{"start":{"line":69,"column":13,"offset":3384},"end":{"line":69,"column":24,"offset":3395},"indent":[]}},{"type":"text","value":" endpoint can be used for adding one or more custom analyzers.","position":{"start":{"line":69,"column":24,"offset":3395},"end":{"line":69,"column":86,"offset":3457},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":3372},"end":{"line":69,"column":86,"offset":3457},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#updating-mappings","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Updating Mappings","position":{"start":{"line":71,"column":5,"offset":3465},"end":{"line":71,"column":22,"offset":3482},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":3461},"end":{"line":71,"column":22,"offset":3482},"indent":[]},"data":{"id":"updating-mappings","htmlAttributes":{"id":"updating-mappings"},"hProperties":{"id":"updating-mappings"}}},{"type":"paragraph","children":[{"type":"text","value":"Next, we will update the mapping for the ","position":{"start":{"line":73,"column":1,"offset":3486},"end":{"line":73,"column":42,"offset":3527},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"city","position":{"start":{"line":73,"column":44,"offset":3529},"end":{"line":73,"column":48,"offset":3533},"indent":[]}}],"position":{"start":{"line":73,"column":42,"offset":3527},"end":{"line":73,"column":50,"offset":3535},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":73,"column":50,"offset":3535},"end":{"line":73,"column":55,"offset":3540},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"country","position":{"start":{"line":73,"column":57,"offset":3542},"end":{"line":73,"column":64,"offset":3549},"indent":[]}}],"position":{"start":{"line":73,"column":55,"offset":3540},"end":{"line":73,"column":66,"offset":3551},"indent":[]}},{"type":"text","value":" fields. We will exploit a very cool feature of Elasticsearch called ","position":{"start":{"line":73,"column":66,"offset":3551},"end":{"line":73,"column":135,"offset":3620},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/multi-fields.html","children":[{"type":"strong","children":[{"type":"text","value":"multi-fields","position":{"start":{"line":73,"column":138,"offset":3623},"end":{"line":73,"column":150,"offset":3635},"indent":[]}}],"position":{"start":{"line":73,"column":136,"offset":3621},"end":{"line":73,"column":152,"offset":3637},"indent":[]}}],"position":{"start":{"line":73,"column":135,"offset":3620},"end":{"line":73,"column":236,"offset":3721},"indent":[]}},{"type":"text","value":" in doing so. Multi-fields enable indexing the same field in different ways, thus allowing for multiple ways of querying without requiring any additional effort in indexing of the data.","position":{"start":{"line":73,"column":236,"offset":3721},"end":{"line":73,"column":421,"offset":3906},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":3486},"end":{"line":73,"column":421,"offset":3906},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT \"$host/normal_searchbar/_mapping/searchbar\" -d '{\n  \"properties\": {\n    \"city\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"city_autosuggest\": {\n          \"type\": \"text\",\n          \"analyzer\": \"auto-suggest\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    },\n    \"country\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"country_autosuggest\": {\n          \"type\": \"text\",\n          \"analyzer\": \"auto-suggest\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":75,"column":1,"offset":3910},"end":{"line":100,"column":4,"offset":4459},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that we are only analyzing the data into n-grams at index time. At search time, creating n-grams from the search text would be redundant and hence, we will use a ","position":{"start":{"line":102,"column":1,"offset":4463},"end":{"line":102,"column":168,"offset":4630},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"simple","position":{"start":{"line":102,"column":170,"offset":4632},"end":{"line":102,"column":176,"offset":4638},"indent":[]}}],"position":{"start":{"line":102,"column":168,"offset":4630},"end":{"line":102,"column":178,"offset":4640},"indent":[]}},{"type":"text","value":" analyzer over there. A ","position":{"start":{"line":102,"column":178,"offset":4640},"end":{"line":102,"column":202,"offset":4664},"indent":[]}},{"type":"link","title":null,"url":"https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-simple-analyzer.html","children":[{"type":"text","value":"simple analyzer","position":{"start":{"line":102,"column":203,"offset":4665},"end":{"line":102,"column":218,"offset":4680},"indent":[]}}],"position":{"start":{"line":102,"column":202,"offset":4664},"end":{"line":102,"column":310,"offset":4772},"indent":[]}},{"type":"text","value":" only applies a lowercase tokenizer.","position":{"start":{"line":102,"column":310,"offset":4772},"end":{"line":102,"column":346,"offset":4808},"indent":[]}}],"position":{"start":{"line":102,"column":1,"offset":4463},"end":{"line":102,"column":346,"offset":4808},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#data-indexing","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Indexing","position":{"start":{"line":104,"column":5,"offset":4816},"end":{"line":104,"column":18,"offset":4829},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":4812},"end":{"line":104,"column":18,"offset":4829},"indent":[]},"data":{"id":"data-indexing","htmlAttributes":{"id":"data-indexing"},"hProperties":{"id":"data-indexing"}}},{"type":"paragraph","children":[{"type":"text","value":"As you can see, while indexing the data, we only need to insert the ","position":{"start":{"line":106,"column":1,"offset":4833},"end":{"line":106,"column":69,"offset":4901},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"city","position":{"start":{"line":106,"column":71,"offset":4903},"end":{"line":106,"column":75,"offset":4907},"indent":[]}}],"position":{"start":{"line":106,"column":69,"offset":4901},"end":{"line":106,"column":77,"offset":4909},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":106,"column":77,"offset":4909},"end":{"line":106,"column":82,"offset":4914},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"country","position":{"start":{"line":106,"column":84,"offset":4916},"end":{"line":106,"column":91,"offset":4923},"indent":[]}}],"position":{"start":{"line":106,"column":82,"offset":4914},"end":{"line":106,"column":93,"offset":4925},"indent":[]}},{"type":"text","value":" fields.","position":{"start":{"line":106,"column":93,"offset":4925},"end":{"line":106,"column":101,"offset":4933},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":4833},"end":{"line":106,"column":101,"offset":4933},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>","position":{"start":{"line":108,"column":1,"offset":4937},"end":{"line":113,"column":4,"offset":5059},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#data-browser-view","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Data Browser View","position":{"start":{"line":115,"column":4,"offset":5066},"end":{"line":115,"column":21,"offset":5083},"indent":[]}}],"position":{"start":{"line":115,"column":1,"offset":5063},"end":{"line":115,"column":21,"offset":5083},"indent":[]},"data":{"id":"data-browser-view","htmlAttributes":{"id":"data-browser-view"},"hProperties":{"id":"data-browser-view"}}},{"type":"paragraph","children":[{"type":"text","value":"For better accessibility, we have indexed ~15,000 data points that can be viewed in the data browser ","position":{"start":{"line":117,"column":1,"offset":5087},"end":{"line":117,"column":102,"offset":5188},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&editable=false","children":[{"type":"text","value":"here. ","position":{"start":{"line":117,"column":103,"offset":5189},"end":{"line":117,"column":109,"offset":5195},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/rHOEixS.png","alt":null,"position":{"start":{"line":117,"column":109,"offset":5195},"end":{"line":117,"column":145,"offset":5231},"indent":[]}}],"position":{"start":{"line":117,"column":102,"offset":5188},"end":{"line":117,"column":498,"offset":5584},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":5087},"end":{"line":117,"column":498,"offset":5584},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#query","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query","position":{"start":{"line":119,"column":5,"offset":5592},"end":{"line":119,"column":10,"offset":5597},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":5588},"end":{"line":119,"column":10,"offset":5597},"indent":[]},"data":{"id":"query","htmlAttributes":{"id":"query"},"hProperties":{"id":"query"}}},{"type":"paragraph","children":[{"type":"text","value":"Next, we will move to the queries section. Here, we will be using the match query for getting the suggestions. Let’s first query on ","position":{"start":{"line":121,"column":1,"offset":5601},"end":{"line":121,"column":133,"offset":5733},"indent":[]}},{"type":"inlineCode","value":"city","position":{"start":{"line":121,"column":133,"offset":5733},"end":{"line":121,"column":139,"offset":5739},"indent":[]}},{"type":"text","value":" field.","position":{"start":{"line":121,"column":139,"offset":5739},"end":{"line":121,"column":146,"offset":5746},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":5601},"end":{"line":121,"column":146,"offset":5746},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/searchbar/_search?pretty -d '{\n  \"query\": {\n    \"match\": {\n      \"city.city_autosuggest\": \"York\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":123,"column":1,"offset":5750},"end":{"line":131,"column":4,"offset":5907},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Here user inputs are passed as a value of ","position":{"start":{"line":133,"column":1,"offset":5911},"end":{"line":133,"column":43,"offset":5953},"indent":[]}},{"type":"inlineCode","value":"city.city_autosuggest","position":{"start":{"line":133,"column":43,"offset":5953},"end":{"line":133,"column":66,"offset":5976},"indent":[]}},{"type":"text","value":" field.","position":{"start":{"line":133,"column":66,"offset":5976},"end":{"line":133,"column":73,"offset":5983},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":5911},"end":{"line":133,"column":73,"offset":5983},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"link","url":"#response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Response","position":{"start":{"line":135,"column":7,"offset":5993},"end":{"line":135,"column":15,"offset":6001},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":5987},"end":{"line":135,"column":15,"offset":6001},"indent":[]},"data":{"id":"response","htmlAttributes":{"id":"response"},"hProperties":{"id":"response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 4.4288692,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYWRohvsk2FETcOKG\",\n      \"_score\" : 4.4288692,\n      \"_source\" : {\n        \"city\" : \"York\",\n        \"country\" : \"United Kingdom\"\n      }\n    }, {\n      \"_index\" : \"searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 3.321652,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":137,"column":1,"offset":6005},"end":{"line":170,"column":4,"offset":6702},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In the response, you can see Elasticsearch has returned two documents which have matched with the ","position":{"start":{"line":172,"column":1,"offset":6706},"end":{"line":172,"column":99,"offset":6804},"indent":[]}},{"type":"inlineCode","value":"York","position":{"start":{"line":172,"column":99,"offset":6804},"end":{"line":172,"column":105,"offset":6810},"indent":[]}},{"type":"text","value":" query. Match query also provides ","position":{"start":{"line":172,"column":105,"offset":6810},"end":{"line":172,"column":139,"offset":6844},"indent":[]}},{"type":"inlineCode","value":"_score","position":{"start":{"line":172,"column":139,"offset":6844},"end":{"line":172,"column":147,"offset":6852},"indent":[]}},{"type":"text","value":" field to get the similarity ratio between user inputs and indexed documents.","position":{"start":{"line":172,"column":147,"offset":6852},"end":{"line":172,"column":224,"offset":6929},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":6706},"end":{"line":172,"column":224,"offset":6929},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#query-on-country","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query on Country","position":{"start":{"line":174,"column":6,"offset":6938},"end":{"line":174,"column":22,"offset":6954},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":6933},"end":{"line":174,"column":22,"offset":6954},"indent":[]},"data":{"id":"query-on-country","htmlAttributes":{"id":"query-on-country"},"hProperties":{"id":"query-on-country"}}},{"type":"paragraph","children":[{"type":"text","value":"A similar query for suggestions on the ","position":{"start":{"line":176,"column":1,"offset":6958},"end":{"line":176,"column":40,"offset":6997},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"country","position":{"start":{"line":176,"column":42,"offset":6999},"end":{"line":176,"column":49,"offset":7006},"indent":[]}}],"position":{"start":{"line":176,"column":40,"offset":6997},"end":{"line":176,"column":51,"offset":7008},"indent":[]}},{"type":"text","value":" field would look like this:","position":{"start":{"line":176,"column":51,"offset":7008},"end":{"line":176,"column":79,"offset":7036},"indent":[]}}],"position":{"start":{"line":176,"column":1,"offset":6958},"end":{"line":176,"column":79,"offset":7036},"indent":[]}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/searchbar/_search?pretty -d '{\n  \"query\": {\n    \"match\": {\n      \"country.country_autosuggest\": \"States\"\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":178,"column":1,"offset":7040},"end":{"line":186,"column":4,"offset":7205},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#query-on-both-city-and-country","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query on both City and Country","position":{"start":{"line":188,"column":6,"offset":7214},"end":{"line":188,"column":36,"offset":7244},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":7209},"end":{"line":188,"column":36,"offset":7244},"indent":[]},"data":{"id":"query-on-both-city-and-country","htmlAttributes":{"id":"query-on-both-city-and-country"},"hProperties":{"id":"query-on-both-city-and-country"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/searchbar/_search?pretty -d '{\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"New York\",\n      \"fields\": [\"city.city_autosuggest\", \"country.country_autosuggest\"]\n    }\n  }\n}'</code></pre>\n      </div>","position":{"start":{"line":190,"column":1,"offset":7248},"end":{"line":199,"column":4,"offset":7474},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#query-response","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Query Response","position":{"start":{"line":201,"column":5,"offset":7482},"end":{"line":201,"column":19,"offset":7496},"indent":[]}}],"position":{"start":{"line":201,"column":1,"offset":7478},"end":{"line":201,"column":19,"offset":7496},"indent":[]},"data":{"id":"query-response","htmlAttributes":{"id":"query-response"},"hProperties":{"id":"query-response"}}},{"type":"html","lang":"jsxon","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 17,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 3.1685972,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 3.1685972,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYWRohvsk2FETcOKG\",\n      \"_score\" : 1.3023362,\n      \"_source\" : {\n        \"city\" : \"York\",\n        \"country\" : \"United Kingdom\"\n      }\n    }]\n  }\n}</code></pre>\n      </div>","position":{"start":{"line":203,"column":1,"offset":7500},"end":{"line":236,"column":4,"offset":8206},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can also try out this query interactively ","position":{"start":{"line":238,"column":1,"offset":8210},"end":{"line":238,"column":47,"offset":8256},"indent":[]}},{"type":"link","title":null,"url":"https://opensource.appbase.io/mirage/#?input_state=XQAAAAISBgAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmIMRwpW8tLJEeyKCwoHzPOkL9M0KdbHLZtMVPxIPMlh7YYAQinNjBTPX006UGzGERYNqNYjacxklVFkEoKyx2zaubRUqhqxScMG9gD-h7bDyj7ZQ6VU2Kj2rkJ1mds7BRVYkDfAHTEbtNa5GW20cp1fus1prbJbNXISvUEQNnPsDOsiH93N8mrqk4ZUuFt9U-a6lycH_ep550RD_dqNp8O-_A9qC47n_yrU_BAyybWtYEqbqRubgwH5baTC-QUPkZhVv-NTguSpvY87WPm9DYiLbJIjGia60W7q-RJW_8qOldSdcuXZuaV-oe_SSrUY6SdSRnGUasF9jyyODzAvfMcKpMSaTmK2W9N2p9c-TjmKn0qNpP8rb_94BIPECIrPMS2bpz4FxVM4auqLxGt8ytJTGmaKWfXmxwlAKO5AZgEJNkz43JbjaPFoWka-u-2ZIYI3-aKmUOgeRoAQ9KuWN1P0Rx-Y3EoXZs3_Iodp48WS8L8kreylBybw8CiRF4K3xl8P0HMKBF0-Pk1p8N0mYLM6HEvjqseDb2elEtSWW8WrYoXyWb6AIIF9EkVvrCGbUYUeY6PcCg8O3Wv9vTP2h4sdg6o2CZb4kdrWmfDRACzWA1mdJXttyT4v-P24C9pE5NI7QALLlAkSPaURi91BbCgbH7yXgjG7_DYbag","children":[{"type":"text","value":"here. ","position":{"start":{"line":238,"column":48,"offset":8257},"end":{"line":238,"column":54,"offset":8263},"indent":[]}},{"type":"image","title":null,"url":"https://i.imgur.com/nC3g4LR.png","alt":null,"position":{"start":{"line":238,"column":54,"offset":8263},"end":{"line":238,"column":90,"offset":8299},"indent":[]}}],"position":{"start":{"line":238,"column":47,"offset":8256},"end":{"line":238,"column":874,"offset":9083},"indent":[]}}],"position":{"start":{"line":238,"column":1,"offset":8210},"end":{"line":238,"column":874,"offset":9083},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Benefits and Drawbacks v/s auto-complete.","position":{"start":{"line":240,"column":1,"offset":9087},"end":{"line":240,"column":42,"offset":9128},"indent":[]}}],"position":{"start":{"line":240,"column":1,"offset":9087},"end":{"line":240,"column":42,"offset":9128},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Highlight the trade-off of increased index size because of space requirements of ngram.","position":{"start":{"line":242,"column":4,"offset":9135},"end":{"line":242,"column":91,"offset":9222},"indent":[]}}],"position":{"start":{"line":242,"column":4,"offset":9135},"end":{"line":242,"column":91,"offset":9222},"indent":[]}}],"position":{"start":{"line":242,"column":1,"offset":9132},"end":{"line":242,"column":91,"offset":9222},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Sometimes, you really don’t want to match incomplete words, auto-complete is better in such a scenario.","position":{"start":{"line":243,"column":4,"offset":9227},"end":{"line":243,"column":107,"offset":9330},"indent":[]}}],"position":{"start":{"line":243,"column":4,"offset":9227},"end":{"line":243,"column":107,"offset":9330},"indent":[]}}],"position":{"start":{"line":243,"column":1,"offset":9224},"end":{"line":243,"column":107,"offset":9330},"indent":[]}}],"position":{"start":{"line":242,"column":1,"offset":9132},"end":{"line":243,"column":107,"offset":9330},"indent":[1]}},{"type":"thematicBreak","position":{"start":{"line":245,"column":1,"offset":9334},"end":{"line":245,"column":4,"offset":9337},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Next, you should read about ","position":{"start":{"line":247,"column":1,"offset":9341},"end":{"line":247,"column":29,"offset":9369},"indent":[]}},{"type":"link","title":null,"url":"https://appbaseio.gitbooks.io/esc/content/searchbar/searchbar.html","children":[{"type":"strong","children":[{"type":"text","value":"Searchbar","position":{"start":{"line":247,"column":32,"offset":9372},"end":{"line":247,"column":41,"offset":9381},"indent":[]}}],"position":{"start":{"line":247,"column":30,"offset":9370},"end":{"line":247,"column":43,"offset":9383},"indent":[]}}],"position":{"start":{"line":247,"column":29,"offset":9369},"end":{"line":247,"column":112,"offset":9452},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":247,"column":112,"offset":9452},"end":{"line":247,"column":113,"offset":9453},"indent":[]}}],"position":{"start":{"line":247,"column":1,"offset":9341},"end":{"line":247,"column":113,"offset":9453},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":248,"column":1,"offset":9455}}}},{"id":"transformer-remark-markdown-toc-62f4cf02d1bf243899519ae1b5b3c728-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":""},{"id":"transformer-remark-markdown-headings-62f4cf02d1bf243899519ae1b5b3c728-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[]},{"id":"transformer-remark-markdown-toc-ec720f820046df4580b11a1d8faa0f1f-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":""},{"id":"transformer-remark-markdown-headings-ec720f820046df4580b11a1d8faa0f1f-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[]},{"id":"transformer-remark-markdown-toc-1998c614db255f0fe5b37efa24198822-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":""},{"id":"transformer-remark-markdown-headings-1998c614db255f0fe5b37efa24198822-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[]},{"id":"transformer-remark-markdown-toc-92bf4ddd3513c61504f61961769ebaa6-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li>\n<p><a href=\"/esc/docs/phrase-search/introduction.html/#building-a-search-engine-introduction\">Building a Search Engine: Introduction</a></p>\n<ul>\n<li><a href=\"/esc/docs/phrase-search/introduction.html/#how-to-build-phrase-search-engine-using-elasticsearch\">How to build phrase search engine using Elasticsearch?</a></li>\n<li><a href=\"/esc/docs/phrase-search/introduction.html/#table-of-contents\">Table of Contents</a></li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-92bf4ddd3513c61504f61961769ebaa6-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"Building a Search Engine: Introduction","depth":2},{"value":"How to build phrase search engine using Elasticsearch?","depth":3},{"value":"Table of Contents","depth":3}]},{"id":"transformer-remark-markdown-toc-ce12cf0cf7706bd2fed6c602e17590c0-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li>\n<p><a href=\"/esc/tagwise-search/multiple-tag-match.html/#how-to-find-multiple-exact-values\">How to find multiple exact values</a></p>\n<ul>\n<li><a href=\"/esc/tagwise-search/multiple-tag-match.html/#how-to-store-data-using-elasticsearch-arrays\">How to store data using Elasticsearch arrays</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/esc/tagwise-search/multiple-tag-match.html/#defining-mappings\">Defining Mappings</a></p>\n<ul>\n<li><a href=\"/esc/tagwise-search/multiple-tag-match.html/#disable-analyzers-on-tags-field\">Disable analyzers on tags field</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/tagwise-search/multiple-tag-match.html/#indexing-data\">Indexing Data</a></li>\n<li><a href=\"/esc/tagwise-search/multiple-tag-match.html/#data-browser-view\">Data Browser View</a></li>\n<li>\n<p><a href=\"/esc/tagwise-search/multiple-tag-match.html/#query\">Query</a></p>\n<ul>\n<li><a href=\"/esc/tagwise-search/multiple-tag-match.html/#bool-query\">Bool Query</a></li>\n<li>\n<p><a href=\"/esc/tagwise-search/multiple-tag-match.html/#must-query\">Must Query</a></p>\n<ul>\n<li><a href=\"/esc/tagwise-search/multiple-tag-match.html/#response\">Response</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/esc/tagwise-search/multiple-tag-match.html/#should-query\">Should Query</a></p>\n<ul>\n<li><a href=\"/esc/tagwise-search/multiple-tag-match.html/#response-1\">Response:</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-ce12cf0cf7706bd2fed6c602e17590c0-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to find multiple exact values","depth":2},{"value":"How to store data using Elasticsearch arrays","depth":3},{"value":"Defining Mappings","depth":2},{"value":"Disable analyzers on ","depth":3},{"value":"Indexing Data","depth":2},{"value":"Data Browser View","depth":2},{"value":"Query","depth":2},{"value":"Bool Query","depth":3},{"value":"Must Query","depth":3},{"value":"Response","depth":4},{"value":"Should Query","depth":3},{"value":"Response:","depth":4}]},{"id":"transformer-remark-markdown-toc-c2fba23ef833908338da8c003d1c10dd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li><a href=\"/esc/tagwise-search/introduction.html/#how-to-build-tag-wise-search-with-elasticsearch\">How to build tag wise search with Elasticsearch?</a></li>\n<li><a href=\"/esc/tagwise-search/introduction.html/#table-of-contents\">Table of Contents</a></li>\n<li><a href=\"/esc/tagwise-search/introduction.html/#live-demo\">Live Demo</a></li>\n</ul>"},{"id":"transformer-remark-markdown-headings-c2fba23ef833908338da8c003d1c10dd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to build tag wise search with Elasticsearch?","depth":3},{"value":"Table of Contents","depth":3},{"value":"Live Demo","depth":3}]},{"id":"transformer-remark-markdown-toc-9dd5164528026bdddfb9b384a6b02626-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li>\n<ul>\n<li><a href=\"/esc/searchbar/auto-complete.html/#how-to-build-a-search-as-you-type-autocompletion-view\">How to build a search-as-you-type autocompletion view</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/esc/searchbar/auto-complete.html/#defining-mappings\">Defining Mappings</a></p>\n<ul>\n<li><a href=\"/esc/searchbar/auto-complete.html/#updating-mappings\">Updating Mappings</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/searchbar/auto-complete.html/#data-indexing\">Data Indexing</a></li>\n<li><a href=\"/esc/searchbar/auto-complete.html/#data-browser-view\">Data Browser View</a></li>\n<li>\n<p><a href=\"/esc/searchbar/auto-complete.html/#query\">Query</a></p>\n<ul>\n<li>\n<ul>\n<li>\n<ul>\n<li><a href=\"/esc/searchbar/auto-complete.html/#response\">Response</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/searchbar/auto-complete.html/#query-on-country\">Query on Country</a></li>\n<li>\n<p><a href=\"/esc/searchbar/auto-complete.html/#query-on-both-city-and-country\">Query on both City and Country</a></p>\n<ul>\n<li><a href=\"/esc/searchbar/auto-complete.html/#response-1\">Response</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-9dd5164528026bdddfb9b384a6b02626-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to build a search-as-you-type autocompletion view","depth":3},{"value":"Defining Mappings","depth":2},{"value":"Updating Mappings","depth":3},{"value":"Data Indexing","depth":2},{"value":"Data Browser View","depth":2},{"value":"Query","depth":2},{"value":"Response","depth":5},{"value":"Query on Country","depth":4},{"value":"Query on both City and Country","depth":4},{"value":"Response","depth":5}]},{"id":"transformer-remark-markdown-toc-b0fa67b023409f6f52a954cbb77abdb9-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li><a href=\"/esc/searchbar/introduction.html/#how-to-build-a-search-bar-with-elasticsearch\">How to build a search bar with Elasticsearch?</a></li>\n<li><a href=\"/esc/searchbar/introduction.html/#table-of-contents\">Table of Contents</a></li>\n<li><a href=\"/esc/searchbar/introduction.html/#live-demo\">Live Demo</a></li>\n</ul>"},{"id":"transformer-remark-markdown-headings-b0fa67b023409f6f52a954cbb77abdb9-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to build a search bar with Elasticsearch?","depth":3},{"value":"Table of Contents","depth":3},{"value":"Live Demo","depth":3}]},{"id":"transformer-remark-markdown-toc-cc730ce79af2ec4a4c92eefbb267d6cd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li>\n<ul>\n<li><a href=\"/esc/tagwise-search/exact-match.html/#how-to-do-a-tag-wise-search\">How to do a tag wise search</a></li>\n<li><a href=\"/esc/tagwise-search/exact-match.html/#defining-mappings\">Defining Mappings</a></li>\n<li><a href=\"/esc/tagwise-search/exact-match.html/#disable-analyzers-on-tags-field\">Disable analyzers on tags field</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/tagwise-search/exact-match.html/#data-indexing\">Data Indexing</a></li>\n<li><a href=\"/esc/tagwise-search/exact-match.html/#data-browser-view\">Data Browser View</a></li>\n<li>\n<p><a href=\"/esc/tagwise-search/exact-match.html/#query\">Query</a></p>\n<ul>\n<li><a href=\"/esc/tagwise-search/exact-match.html/#response\">Response</a></li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-cc730ce79af2ec4a4c92eefbb267d6cd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to do a tag wise search","depth":3},{"value":"Defining Mappings","depth":3},{"value":"Disable analyzers on ","depth":3},{"value":"Data Indexing","depth":2},{"value":"Data Browser View","depth":2},{"value":"Query","depth":2},{"value":"Response","depth":3}]},{"id":"transformer-remark-markdown-toc-c210ec55fcf2bf48cc13510a7d2c4c2b-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li>\n<p><a href=\"/esc/docs/phrase-search/phrase_match.html/#phrase-search\">Phrase Search</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"/esc/docs/phrase-search/phrase_match.html/#how-to-do-phrase-search\">How to do phrase search</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/esc/docs/phrase-search/phrase_match.html/#defining-mappings\">Defining Mappings</a></p>\n<ul>\n<li><a href=\"/esc/docs/phrase-search/phrase_match.html/#english-analyzer\">English Analyzer</a></li>\n<li><a href=\"/esc/docs/phrase-search/phrase_match.html/#put-mappings\">Put Mappings</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/docs/phrase-search/phrase_match.html/#data-indexing\">Data Indexing</a></li>\n<li><a href=\"/esc/docs/phrase-search/phrase_match.html/#data-browser-view\">Data Browser View</a></li>\n<li>\n<p><a href=\"/esc/docs/phrase-search/phrase_match.html/#query\">Query</a></p>\n<ul>\n<li><a href=\"/esc/docs/phrase-search/phrase_match.html/#exact-phrase-match\">Exact-phrase match</a></li>\n<li>\n<p><a href=\"/esc/docs/phrase-search/phrase_match.html/#mix-search\">Mix Search</a></p>\n<ul>\n<li><a href=\"/esc/docs/phrase-search/phrase_match.html/#response\">Response</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-c210ec55fcf2bf48cc13510a7d2c4c2b-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"Phrase Search","depth":1},{"value":"How to do phrase search","depth":3},{"value":"Defining Mappings","depth":2},{"value":"English Analyzer","depth":3},{"value":"Put Mappings","depth":3},{"value":"Data Indexing","depth":2},{"value":"Data Browser View","depth":2},{"value":"Query","depth":2},{"value":"Exact-phrase match","depth":3},{"value":"Mix Search","depth":3},{"value":"Response","depth":4}]},{"id":"transformer-remark-markdown-toc-b8d10660f78f9d110b691144220e54ea-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li><a href=\"/esc/searchbar/multi-match.html/#how-to-build-a-multi-match-search\">How To Build A Multi Match Search</a></li>\n<li><a href=\"/esc/searchbar/multi-match.html/#defining-mappings\">Defining Mappings</a></li>\n<li><a href=\"/esc/searchbar/multi-match.html/#indexing-data\">Indexing Data</a></li>\n<li><a href=\"/esc/searchbar/multi-match.html/#data-browser-view\">Data Browser View</a></li>\n<li><a href=\"/esc/searchbar/multi-match.html/#query\">Query</a></li>\n</ul>"},{"id":"transformer-remark-markdown-headings-b8d10660f78f9d110b691144220e54ea-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How To Build A Multi Match Search","depth":2},{"value":"Defining Mappings","depth":2},{"value":"Indexing Data","depth":2},{"value":"Data Browser View","depth":2},{"value":"Query","depth":2}]},{"id":"transformer-remark-markdown-toc-1cc76fcc4c0de6ca6f91a6b743d0b2a8-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li><a href=\"/esc/searchbar/simple-match.html/#how-to-build-a-simple-match-search\">How To Build A Simple Match Search</a></li>\n<li><a href=\"/esc/searchbar/simple-match.html/#defining-mappings\">Defining Mappings</a></li>\n<li><a href=\"/esc/searchbar/simple-match.html/#indexing-data\">Indexing Data</a></li>\n<li><a href=\"/esc/searchbar/simple-match.html/#data-browser-view\">Data Browser View</a></li>\n<li><a href=\"/esc/searchbar/simple-match.html/#query\">Query</a></li>\n</ul>"},{"id":"transformer-remark-markdown-headings-1cc76fcc4c0de6ca6f91a6b743d0b2a8-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How To Build A Simple Match Search","depth":2},{"value":"Defining Mappings","depth":2},{"value":"Indexing Data","depth":2},{"value":"Data Browser View","depth":2},{"value":"Query","depth":2}]},{"id":"transformer-remark-markdown-toc-9ff00e8d02edc8d003f68d9e06304236-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li><a href=\"/esc/tagwise-search/arrays.html/#how-to-store-data-using-elasticsearch-arrays\">How to store data using Elasticsearch arrays</a></li>\n<li><a href=\"/esc/tagwise-search/arrays.html/#defining-mappings\">Defining Mappings</a></li>\n<li><a href=\"/esc/tagwise-search/arrays.html/#indexing-data\">Indexing Data</a></li>\n<li><a href=\"/esc/tagwise-search/arrays.html/#data-browser-view\">Data Browser View</a></li>\n<li>\n<p><a href=\"/esc/tagwise-search/arrays.html/#query\">Query</a></p>\n<ul>\n<li><a href=\"/esc/tagwise-search/arrays.html/#response\">Response:</a></li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-9ff00e8d02edc8d003f68d9e06304236-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to store data using Elasticsearch arrays","depth":2},{"value":"Defining Mappings","depth":2},{"value":"Indexing Data","depth":2},{"value":"Data Browser View","depth":2},{"value":"Query","depth":2},{"value":"Response:","depth":3}]},{"id":"transformer-remark-markdown-toc-8662744ad1a3738273b6babede46e7db-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li><a href=\"/esc/searchbar/searchbar.html/#how-to-make-a-normal-search-bar\">How to make a normal search bar</a></li>\n<li><a href=\"/esc/searchbar/searchbar.html/#defining-mappings\">Defining Mappings</a></li>\n<li>\n<p><a href=\"/esc/searchbar/searchbar.html/#defining-mappings-1\">Defining Mappings</a></p>\n<ul>\n<li><a href=\"/esc/searchbar/searchbar.html/#data-indexing\">Data Indexing</a></li>\n<li><a href=\"/esc/searchbar/searchbar.html/#data-browser-view\">Data Browser View</a></li>\n<li>\n<p><a href=\"/esc/searchbar/searchbar.html/#query\">Query</a></p>\n<ul>\n<li>\n<ul>\n<li>\n<p><a href=\"/esc/searchbar/searchbar.html/#response\">Response</a></p>\n<ul>\n<li><a href=\"/esc/searchbar/searchbar.html/#note-there-is-some-overlap-between-the-autocompletion-and-autosuggestion-feature-heres-why-we-make-two-separate-queries\">Note: There is some overlap between the autocompletion and autosuggestion feature, here’s why we make two separate queries.</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/esc/searchbar/searchbar.html/#query-on-both-city-and-country\">Query on both City and Country</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/searchbar/searchbar.html/#query-response\">Query Response</a></li>\n<li><a href=\"/esc/searchbar/searchbar.html/#implementing-the-searchbar-with-a-ui\">Implementing the searchbar with a UI</a></li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-8662744ad1a3738273b6babede46e7db-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to make a normal search bar","depth":2},{"value":"Defining Mappings","depth":2},{"value":"Defining Mappings","depth":2},{"value":"Data Indexing","depth":3},{"value":"Data Browser View","depth":3},{"value":"Query","depth":3},{"value":"Response","depth":5},{"value":"Note: There is some overlap between the autocompletion and autosuggestion feature, here’s why we make two separate queries.","depth":6},{"value":"Query on both City and Country","depth":4},{"value":"Query Response","depth":3},{"value":"Implementing the searchbar with a UI","depth":3}]},{"id":"transformer-remark-markdown-toc-9865f99b9ec8671cd4b937f6f40493e2-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<ul>\n<li>\n<ul>\n<li><a href=\"/esc/searchbar/suggestions.html/#how-to-build-an-as-you-type-suggestions-view\">How to build an as-you-type suggestions view</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/esc/searchbar/suggestions.html/#defining-mappings\">Defining Mappings</a></p>\n<ul>\n<li><a href=\"/esc/searchbar/suggestions.html/#transforming-data-to-n-gram-tokens-before-indexing\">Transforming data to n-gram tokens before indexing</a></li>\n<li><a href=\"/esc/searchbar/suggestions.html/#updating-mappings\">Updating Mappings</a></li>\n<li><a href=\"/esc/searchbar/suggestions.html/#data-indexing\">Data Indexing</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/esc/searchbar/suggestions.html/#data-browser-view\">Data Browser View</a></p>\n<ul>\n<li>\n<p><a href=\"/esc/searchbar/suggestions.html/#query\">Query</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"/esc/searchbar/suggestions.html/#response\">Response</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/searchbar/suggestions.html/#query-on-country\">Query on Country</a></li>\n<li><a href=\"/esc/searchbar/suggestions.html/#query-on-both-city-and-country\">Query on both City and Country</a></li>\n</ul>\n</li>\n<li><a href=\"/esc/searchbar/suggestions.html/#query-response\">Query Response</a></li>\n</ul>\n</li>\n</ul>"},{"id":"transformer-remark-markdown-headings-9865f99b9ec8671cd4b937f6f40493e2-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":[{"value":"How to build an as-you-type suggestions view","depth":3},{"value":"Defining Mappings","depth":2},{"value":"Transforming data to n-gram tokens before indexing","depth":3},{"value":"Updating Mappings","depth":3},{"value":"Data Indexing","depth":3},{"value":"Data Browser View","depth":2},{"value":"Query","depth":3},{"value":"Response","depth":5},{"value":"Query on Country","depth":4},{"value":"Query on both City and Country","depth":4},{"value":"Query Response","depth":3}]},{"id":"transformer-remark-markdown-html-62f4cf02d1bf243899519ae1b5b3c728-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":""},{"id":"transformer-remark-markdown-html-ec720f820046df4580b11a1d8faa0f1f-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<section class=\"light home-section\">\n  <div class=\"marketing-row\">\n    <div class=\"marketing-col\">\n      <h3>Javascript Quick Start</h3>\n      <p><a href=\"/javascript/quickstart.html\">Quick start with the Javascript APIs</a> for indexing, querying and streaming data.</p>\n    </div>\n    <div class=\"marketing-col\">\n      <h3>REST API Quick Start</h3>\n      <p><a href=\"/rest/getting-started.html\">Get started with the REST APIs</a> for indexing, querying and streaming data.</p>\n    </div>\n    <div class=\"marketing-col\">\n      <h3>REST API Reference</h3>\n      <p>Read the <a href=\"https://rest.appbase.io\">complete API reference</a>.</p>\n    </div>\n  </div>\n  <div class=\"marketing-row\">\n    <div class=\"marketing-col\">\n      <h3>Concepts</h3>\n      <p>Learn about <a href=\"/concepts/datamodel.html\">organizing data with appbase.io</a>.</p>\n    </div>\n    <div class=\"marketing-col\">\n      <h3>UI Components</h3>\n      <p>Build data-driven UI components with our <a href=\"https://opensource.appbase.io/reactive-manual\">Reactive UI Libraries</a> <i class=\"fa fa-external-link\"></i>.</p>\n    </div>\n  </div>\n</section>"},{"id":"transformer-remark-markdown-html-1998c614db255f0fe5b37efa24198822-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>We couldn’t find what you were looking for.</p>"},{"id":"transformer-remark-markdown-html-92bf4ddd3513c61504f61961769ebaa6-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<h2 id=\"building-a-search-engine-introduction\"><a href=\"#building-a-search-engine-introduction\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building a Search Engine: Introduction</h2>\n<h3 id=\"how-to-build-phrase-search-engine-using-elasticsearch\"><a href=\"#how-to-build-phrase-search-engine-using-elasticsearch\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to build phrase search engine using Elasticsearch?</h3>\n<p>While building a search engine for your e-commerce app, user data, or any structured data set many times you need to match all the query terms in their relative position. This is the case where entities like “quick brown dog”, where the three terms individually don’t convey the same meaning as the three of them concatenated in this order.</p>\n<p>In this chapter we’re going to build phrase search engine using Hackernews dataset.</p>\n<p>We will use <a href=\"https://www.elastic.co/products/elasticsearch\">Elasticsearch</a> as our search engine and the index (and dataset) is hosted on an <a href=\"https://appbase.io\">appbase.io</a> app.</p>\n<h3 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h3>\n<table>\n<thead>\n<tr>\n<th>Index</th>\n<th>Title</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/phrase-search/phrase_match.html\">Phrase Search</a></td>\n<td>How to use Elasticsearch phrase_match query.</td>\n</tr>\n</tbody>\n</table>"},{"id":"transformer-remark-markdown-html-ce12cf0cf7706bd2fed6c602e17590c0-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html\"><strong>How to build tag wise search with Elasticsearch</strong></a>.</p>\n<h2 id=\"how-to-find-multiple-exact-values\"><a href=\"#how-to-find-multiple-exact-values\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to find multiple exact values</h2>\n<p>A major use-case of tags in apps is to associate a content with one or more labels, it is then but natural that a tagwise search feature should be able to retrieve the matching content by user specifying either just one or more than one tag labels in union or intersection output modes.</p>\n<p>In this chapter, we will be using an Array data structure to store more than one label with a content document. For making the exact lookups for multiple tagwise, we will be applying a term query along with boolean clause on the dataset.</p>\n<h3 id=\"how-to-store-data-using-elasticsearch-arrays\"><a href=\"#how-to-store-data-using-elasticsearch-arrays\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to store data using Elasticsearch arrays</h3>\n<p>For one or more then one inputs elasticsearch by default considers that field as an array type. However, all values in the array must be of the same datatype. If you create a new field by indexing an array, Elasticsearch will use the datatype of the first value in the array to determine the type of the new field. We can create array of strings, integers, objects or array of arrays to store the data.</p>\n<p>Default array does not support querying each object independently of the other objects in the array. To distinguish objects stored in array from each other we need to use <strong>Nested datatype</strong>.</p>\n<p><code>Note:</code> You can read more about nested datatype over <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html\">here</a>.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>By default Elasticsearch analyzes the data before storing it on disk. However, since we require an exact match of the data for repository tags, we will apply a <code>index: not_analyzed</code> setting to prevent the tag field from being analyzed.</p>\n<p>We will only specify the mapping for the tags field. Elasticsearch will create mappings dynamically for the rest of the fields.</p>\n<h3 id=\"disable-analyzers-on-tags-field\"><a href=\"#disable-analyzers-on-tags-field\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disable analyzers on <code>tags</code> field</h3>\n<p>To store the data without analyzing it, we have to make <code>tags</code> field <strong>not_analyzed</strong>. By doing this Elasticsearch will store the data as usual without any modifications.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/_mapping/search -d '{\n  \"properties\": {\n    \"tags\": {\n      \"type\": \"keyword\"\n    }\n  }\n}'</code></pre>\n      </div>\n<p>We just put <strong>mapping</strong> on <code>search</code> type of <code>tagwise</code> index. Now, let’s index some data.</p>\n<h2 id=\"indexing-data\"><a href=\"#indexing-data\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Indexing Data</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/search/1 -d '{\n  \"repo\" : \"reddit\",\n  \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n  \"owner\" : \"reddit\",\n  \"url\" : \"https://github.com/reddit/reddit\",\n  \"stars\" : 13053,\n  \"language\" : \"Python\",\n  \"created-on\" : \"2008-06-18T23:30:53Z\"\n}'</code></pre>\n      </div>\n<p>If we look back at our data mappings, they should now look like as follows</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/_mapping?pretty</code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"tagwise\": {\n    \"mappings\": {\n      \"search\": {\n        \"properties\": {\n          \"owner\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"repo\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"tags\": {\n            \"type\": \"keyword\"\n          },\n          \"url\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"stars\": {\n            \"type\": \"long\"\n          },\n          \"language\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n              \"keyword\" : {\n                \"type\" : \"keyword\",\n                \"ignore_above\" : 256\n              }\n            }\n          },\n          \"created-on\": {\n            \"type\": \"date\"\n          }\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>\n<p>We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.</p>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA\">here. <img src=\"http://i.imgur.com/x7nLB9s.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>Elasticsearch provides a way through bool query to combine the multiple query types into a single query with <code>and</code>, <code>or</code>, and <code>not</code> logic.</p>\n<h3 id=\"bool-query\"><a href=\"#bool-query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bool Query</h3>\n<p>The bool query is composed of four clauses(query).</p>\n<ul>\n<li><code>must</code>: All of these clauses must match. The equivalent of <strong>AND</strong>.</li>\n<li><code>must_not</code>: All of these clauses must not match. The equivalent of <strong>NOT</strong>.</li>\n<li><code>should</code>: At least one of these clauses must match. The equivalent of <strong>OR</strong>.</li>\n<li><code>filter</code>: The query must appear in matching documents. This query ignores the score and executes it in filter context.</li>\n</ul>\n<p>We will execute bool queries in non-scoring mode since we have disabled analyzer on <code>tags</code> field. We will use <code>constant_score</code> query to wrap everything with its filter clause.</p>\n<p>So our basic query json structure looks like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n   \"query\" : {\n      \"constant_score\" : {\n         \"filter\" : {\n            \"bool\" : {\n              \"should\" : [...],\n              \"must_not\" : [...],\n              \"must\": [...],\n              \"filter\": [...]\n           }\n         }\n      }\n   }\n}</code></pre>\n      </div>\n<p>We will use <code>must</code> and <code>should</code> clauses to filter the data. Through <code>must</code> clause we can get the results which contain all the mentioned tags and through <code>should</code> clause we can get the results which contain either of the mentioned tags.</p>\n<h3 id=\"must-query\"><a href=\"#must-query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Must Query</h3>\n<p>We will use <code>term</code> query inside <code>must</code> clause. The <code>term</code> query finds documents that contain the exact term specified at the index time and <code>must</code> query take <strong>AND</strong> of all the results.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n   \"query\" : {\n      \"constant_score\" : {\n         \"filter\" : {\n            \"bool\" : {\n              \"must\": [\n                {\n                  \"term\": {\n                    \"tags\": \"reddit\"\n                  }\n                },\n                {\n                  \"term\": {\n                    \"tags\": \"python\"\n                  }\n                }\n              ]\n           }\n         }\n      }\n   }\n}'</code></pre>\n      </div>\n<h4 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h4>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\": 20,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 1,\n    \"max_score\": 1,\n    \"hits\": [\n      {\n        \"_index\": \"tagwise\",\n        \"_type\": \"search\",\n        \"_id\": \"AVvR1yM3gPzdwFFNDvs7\",\n        \"_score\": 1,\n        \"_source\": {\n          \"repo\": \"reddit\",\n          \"tags\": [\n            \"javascript\",\n            \"python\",\n            \"reddit\"\n          ],\n          \"owner\": \"reddit\",\n          \"url\": \"https://github.com/reddit/reddit\",\n          \"stars\": 13053,\n          \"language\": \"Python\",\n          \"created-on\": \"2008-06-18T23:30:53Z\"\n        }\n      }\n    ]\n  }\n}</code></pre>\n      </div>\n<h3 id=\"should-query\"><a href=\"#should-query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Should Query</h3>\n<p>The <code>should</code> query in filter context fetches documents which match with at least one of the mentioned should queries.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n   \"query\" : {\n      \"constant_score\" : {\n         \"filter\" : {\n            \"bool\" : {\n              \"should\": [\n                {\n                  \"term\": {\n                    \"tags\": \"reddit\"\n                  }\n                },\n                {\n                  \"term\": {\n                    \"tags\": \"python\"\n                  }\n                }\n              ]\n           }\n         }\n      }\n   }\n}'</code></pre>\n      </div>\n<h4 id=\"response-1\"><a href=\"#response-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response:</h4>\n<p>As you can see in the response the first result contains only one of the mentioned tag - <code>python</code>.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\": 28,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 51,\n    \"max_score\": 1,\n    \"hits\": [\n      {\n        \"_index\": \"tagwise\",\n        \"_type\": \"search\",\n        \"_id\": \"AVvR1yI5hvsk2FETc3bb\",\n        \"_score\": 1,\n        \"_source\": {\n          \"repo\": \"awesome-python\",\n          \"tags\": [\n            \"awesome\",\n            \"collections\",\n            \"python\"\n          ],\n          \"owner\": \"vinta\",\n          \"url\": \"https://github.com/vinta/awesome-python\",\n          \"stars\": 33500,\n          \"language\": \"Python\",\n          \"created-on\": \"2014-06-27T21:00:06Z\"\n        }\n      }\n    ]\n  }\n}</code></pre>\n      </div>\n<p>You can also try out this query interactively  <a href=\"https://opensource.appbase.io/mirage/#?input_state=XQAAAAIqBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmHCrDFs7iDKutPu_ClxcjCYOqUqELVPJ0G6sKj4u2r8c-T_5P6GlG49XYgfc2GYuMMRuSumifCxuSSCXtOAxs6Hde1p2VgSpnD3tfQtwbKtmlUV9FWFj1xXnSypOS15FxHENksJUxXCtYmd4iVjGL1bowAxrWfOuw1nuIcWHek4srAs1sTP0SOd6XPS6-blE0WjAQt4ce9B23dy_19xYCecMoWthMwrwWTFypBAO8Vcd9w4VuVo1KU8LBRzuRLhDL0KvF_VG62ehVISj4Ty-MiHt6Wpb2oKqBeU0_RAvNWfU1QZMs-TXvpXEXsEaIoh-foBQR6mza5cKEG3-8vZnMLBXW2J5sjEUeM7tqfjdgcDJCjC3ICatsg2wVEme8RVF3cFkkDDX0MTi9_t1eIrq8yU3AHAMZqvAUb5mkmRVWPKetqsE-i4GQyerYVnSY-EJXAPnnip8IXLbYRM8d4ocCXD3R20C7ZwGFGG0MuPIwmzwrf6hStk8ddjvTn81vDwIPDnr91ov42AvY0-7Kb5CpGG6dF2kFR7xcKxyVCxYfbE8Wl2f0RTH6jk-GS7HuqFdz4MEIWS63yeqQ-jajHPetrQP81BisYnXF281pV7ajxzqx8kkTagiyRT9mQsOR_oMVCT63LKNBeCSnffodl6mf_7Qo1M\">here. <img src=\"http://i.imgur.com/9bg2TMJ.png\"></a></p>\n<hr>\n<p>You should next read about <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/partial-tag-match-tbd.html\"><strong>partial tag match</strong></a>.</p>"},{"id":"transformer-remark-markdown-html-c2fba23ef833908338da8c003d1c10dd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<h3 id=\"how-to-build-tag-wise-search-with-elasticsearch\"><a href=\"#how-to-build-tag-wise-search-with-elasticsearch\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to build tag wise search with Elasticsearch?</h3>\n<p>A tag is a label or metadata used on social networks and blogging services which makes it easier for users to find the data with a specific theme or content. Also, it can be useful to filter data according to single or multiple categories.</p>\n<p>In this chapter, we’re going to build tag wise search very similar to Github’s. We will also show you how to do multiple tag searching and partial tag match.</p>\n<p>We will use <a href=\"https://www.elastic.co/products/elasticsearch\">Elasticsearch</a> as our search engine and the index (and dataset) is hosted on an <a href=\"https://appbase.io\">appbase.io</a> app.</p>\n<h3 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h3>\n<table>\n<thead>\n<tr>\n<th>Index</th>\n<th>Title</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/exact-match.html\">Exact Match</a></td>\n<td>How to build a tag wise search similar to Github’s.</td>\n</tr>\n<tr>\n<td>2</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/exact-match.html\">Multiple Tag Match</a></td>\n<td>How to find multiple exact values.</td>\n</tr>\n<tr>\n<td>3</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/partial-tag-match-tbh.html\">Partial Tag Match</a></td>\n<td>How to provide tag suggestions based on prefix.</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"live-demo\"><a href=\"#live-demo\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Live Demo</h3>\n<script async src=\"//jsfiddle.net/1b8tcxs4/3/embed/\"></script>\n<p><a href=\"https://jsfiddle.net/1b8tcxs4/3/\">code</a>\n<strong>TODO:</strong> Embed JSFiddle demo</p>"},{"id":"transformer-remark-markdown-html-9dd5164528026bdddfb9b384a6b02626-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html\"><strong>how to build a search bar</strong></a>.</p>\n<h3 id=\"how-to-build-a-search-as-you-type-autocompletion-view\"><a href=\"#how-to-build-a-search-as-you-type-autocompletion-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to build a search-as-you-type autocompletion view</h3>\n<p>In this post, we will show how to provide an auto-completion of the inputs <strong>as the user types</strong> in a searchbar. We will be using a dataset containing a list of cities and countries and we will be building this feature using Elasticsearch’s <strong>completion</strong> type <code>field</code>.</p>\n<p><code>Note:</code> Alternate approaches can be implemented using n-grams and prefix suggester algorithms. But speed is the most important aspect for this feature. We’re making suggestions while the user types, so results need to be shown to the user within milliseconds. When using the completion type, Elasticsearch indexes data into a trie like data structure (called FST) which is optimized for fast retrieval and memory usage.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>In this section, we will specify the mappings for our two fields: city and country, with the necessary settings to enable auto-complete functionality.</p>\n<h3 id=\"updating-mappings\"><a href=\"#updating-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Updating Mappings</h3>\n<p>Next, we will update the mapping for the <strong>city</strong> and <strong>country</strong> fields. We will exploit a very cool feature of Elasticsearch called <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/multi-fields.html\"><strong>multi-fields</strong></a> in doing so. Multi-fields enable indexing the same field in different ways, thus allowing for multiple ways of querying without requiring any additional effort in indexing of the data.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/_mapping/searchbar -d '{\n  \"properties\": {\n    \"city\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"city_autocomplete\": {\n          \"type\": \"completion\",\n          \"analyzer\": \"simple\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    },\n    \"country\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"country_autocomplete\": {\n          \"type\": \"completion\",\n          \"analyzer\": \"simple\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Here, we have defined a multi-field for both <code>city</code> and <code>country</code> fields. The <code>city_autocomplete</code> field (inner field) has a type <strong>completion</strong> while the <code>city</code> field (outer field) has a type <strong>text</strong> and both are indexed simultaneously. We also use the <code>simple</code> analyzer that tokenizes the text as is (i.e. no white space splitting) and applies a lowercase filter for both indexing and searching on the *_autocomplete inner fields.</p>\n<h2 id=\"data-indexing\"><a href=\"#data-indexing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Indexing</h2>\n<p>As you can see, while indexing the data, we only need to insert the <strong>city</strong> and <strong>country</strong> fields.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For better accessibility, we have indexed ~15,000 data points that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&#x26;editable=false\">here. <img src=\"https://i.imgur.com/rHOEixS.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>Next, we will move to the queries section. Here, we will be using the <strong>completion</strong> suggestor query for getting the autocomplete suggestions. You can read more about it <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters-completion.html\">here</a>.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?size=0&pretty\" -d '{\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"new y\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Here, <code>text</code> is the actual text that the user has typed so far and <code>completion</code> contains the field in which Elasticsearch will look for completion suggestions.</p>\n<h5 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h5>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 20,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 15506,\n    \"max_score\" : 0.0,\n    \"hits\" : [ ]\n  },\n  \"suggest\" : {\n    \"city-suggest\" : [ {\n      \"text\" : \"new y\",\n      \"offset\" : 0,\n      \"length\" : 5,\n      \"options\" : [ {\n        \"text\" : \"New York\",\n        \"score\" : 1.0\n      } ]\n    } ]\n  }\n}</code></pre>\n      </div>\n<p>Voila! We can see “New York” as the suggestion which we can now display in the search box.</p>\n<h4 id=\"query-on-country\"><a href=\"#query-on-country\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query on Country</h4>\n<p>A similar query for suggestions on the <strong>country</strong> field would look like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?size=0&pretty\" -d '{\n  \"suggest\": {\n    \"country-suggest\": {\n      \"text\": \"united st\",\n      \"completion\": {\n        \"field\": \"country.country_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<h4 id=\"query-on-both-city-and-country\"><a href=\"#query-on-both-city-and-country\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query on both City and Country</h4>\n<p>What if we wanted to provide autocompletion on both <strong>city</strong> and <strong>country</strong> fields at the same time?</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?size=0&pretty\" -d '{\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"Chi\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    },\n    \"country-suggest\": {\n      \"text\": \"Chi\",\n      \"completion\": {\n        \"field\": \"country.country_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<h5 id=\"response-1\"><a href=\"#response-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h5>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 49,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 2,\n    \"successful\" : 2,\n    \"skipped\" : 0,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 0,\n    \"max_score\" : 0.0,\n    \"hits\" : [ ]\n  },\n  \"suggest\" : {\n    \"city-suggest\" : [\n      {\n        \"text\" : \"Chi\",\n        \"offset\" : 0,\n        \"length\" : 3,\n        \"options\" : [\n          {\n            \"text\" : \"Chiajna\",\n            \"_index\" : \"normal_searchbar\",\n            \"_type\" : \"searchbar\",\n            \"_id\" : \"AWDMLdpE5Q83Zq9GY7SX\",\n            \"_score\" : 1.0,\n            \"_source\" : {\n              \"city\" : \"Chiajna\",\n              \"country\" : \"Romania\"\n            }\n          }\n        ]\n      }\n    ],\n    \"country-suggest\" : [\n      {\n        \"text\" : \"Chi\",\n        \"offset\" : 0,\n        \"length\" : 3,\n        \"options\" : [\n          {\n            \"text\" : \"Chile\",\n            \"_index\" : \"normal_searchbar\",\n            \"_type\" : \"searchbar\",\n            \"_id\" : \"AWDMLep65Q83Zq9GY7hi\",\n            \"_score\" : 1.0,\n            \"_source\" : {\n              \"city\" : \"ViÃÂÃÂ±a del Mar\",\n              \"country\" : \"Chile\"\n            }\n          }\n        ]\n      }\n    ]\n  }\n}</code></pre>\n      </div>\n<p>We can then pick the item with the highest score value: “China” in this case, and display it in the searchbox’s input section.</p>\n<p>We can also use the suggest query for building a search as-you-type suggestions feature by arranging the other items in a dropdown list. However, doing so has some limitations.</p>\n<ol>\n<li>We can’t detect suggestions on a full-text phrase if the user starts typing from the middle of the phrase or even the middle of the word.</li>\n<li>Prior to v5 of Elasticsearch, we couldn’t show additional fields of the document as a part of the suggestion UI (like images) since the <strong>completion suggest</strong> query only returns the field in question.</li>\n</ol>\n<hr>\n<p>Next, we talk about building a <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/suggestions.html\"><strong>search as-you-type suggestions</strong></a> feature using n-grams.</p>"},{"id":"transformer-remark-markdown-html-b0fa67b023409f6f52a954cbb77abdb9-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<h3 id=\"how-to-build-a-search-bar-with-elasticsearch\"><a href=\"#how-to-build-a-search-bar-with-elasticsearch\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to build a search bar with Elasticsearch?</h3>\n<p>This chapter provides a simple introduction and guide to building a search bar for your e-commerce app, user data, or any structured data set that is meant for keyword based queries.</p>\n<p>We will use <a href=\"https://www.elastic.co/products/elasticsearch\">Elasticsearch</a> as our search engine and the index (and dataset) is hosted on an <a href=\"https://appbase.io\">appbase.io</a> app.</p>\n<p><img src=\"https://i.imgur.com/UNkzVkU.jpg\"><br>\n<strong>Image:</strong> Search bars from popular websites</p>\n<h3 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h3>\n<table>\n<thead>\n<tr>\n<th>Index</th>\n<th>Title</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/simple-match.html\">Simple Match</a></td>\n<td>How to build a simple match based search.</td>\n</tr>\n<tr>\n<td>2</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/multi-match.html\">Multi Match</a></td>\n<td>How to search on multiple fields.</td>\n</tr>\n<tr>\n<td>3</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/auto-complete.html\">Auto Completion</a></td>\n<td>How to add a search-as-you-type autocompletion view.</td>\n</tr>\n<tr>\n<td>4</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/suggestions.html\">Suggestions</a></td>\n<td>How to add a search-as-you-type suggestions view.</td>\n</tr>\n<tr>\n<td>5</td>\n<td><a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/searchbar.html\">Searchbar</a></td>\n<td>Combining all the above steps to build the search bar functionality.</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"live-demo\"><a href=\"#live-demo\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Live Demo</h3>\n<script async src=\"//jsfiddle.net/1b8tcxs4/3/embed/\"></script>\n<p><a href=\"https://jsfiddle.net/1b8tcxs4/3/\">code</a>\n<strong>TODO:</strong> Embed JSFiddle demo</p>"},{"id":"transformer-remark-markdown-html-cc730ce79af2ec4a4c92eefbb267d6cd-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html\"><strong>How to build tag wise search engine with Elasticsearch?</strong></a></p>\n<h3 id=\"how-to-do-a-tag-wise-search\"><a href=\"#how-to-do-a-tag-wise-search\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to do a tag wise search</h3>\n<p>Elasticsearch supports queries and filters. Queries are useful within full-text search, where results depend on a relevance score. In general, filters are used for binary yes/no searches or within queries for exact value match. Think of filters as an equivalent to the WHERE clause in SQL. Filters are faster than queries because they do not calculate the relevance score and can be easily cached.</p>\n<p>We will be using a sample dataset containing the Github repository info, and we will be using a <strong>term</strong> query to perform a tag wise search.</p>\n<h3 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h3>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>By default Elasticsearch analyzes the data before storing it on disk. However, since we require an exact match of the data for repository tags, we will apply a <code>index: not_analyzed</code> setting to prevent the tag field from being analyzed.</p>\n<p>We will only specify the mapping for the <code>tags</code> field. Elasticsearch will create mappings dynamically for the rest of the fields.</p>\n<h3 id=\"disable-analyzers-on-tags-field\"><a href=\"#disable-analyzers-on-tags-field\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disable analyzers on <code>tags</code> field</h3>\n<p>// TODO: Use Keyword and also explain the difference wrt Text.</p>\n<p>To store the data without analyzing it, we have to make <code>tags</code> field <strong>not_analyzed</strong>. By doing this, Elasticsearch will store the data as usual without any modifications.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/_mapping/tagwise -d '{\n  \"properties\": {\n    \"tags\": {\n      \"type\": \"keyword\",\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Now, let’s index some data.</p>\n<h2 id=\"data-indexing\"><a href=\"#data-indexing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Indexing</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/tagwise/1 -d '{\n  \"repo\" : \"reddit\",\n  \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n  \"owner\" : \"reddit\",\n  \"url\" : \"https://github.com/reddit/reddit\",\n  \"stars\" : 13053,\n  \"language\" : \"Python\",\n  \"created-on\" : \"2008-06-18T23:30:53Z\"\n}'</code></pre>\n      </div>\n<p>Voila! We indexed our first document with id <code>1</code>. We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.</p>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA\">here. <img src=\"http://i.imgur.com/x7nLB9s.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>The <code>term</code> query will look for the exact value that we specify. By itself, a <code>term</code> query is simple. It accepts a field name and the value that we wish to find. Usually, when looking for an exact value, we don’t want to score the query. We just want to include/exclude documents, so we will use a <code>constant_score</code> query to execute the term query in a non-scoring mode and apply a uniform score of one.</p>\n<p>The final combination of a <code>constant_score</code> query which contains a <code>term</code> query will look like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/tagwise/_search?pretty -d '{\n  \"query\": {\n    \"constant_score\" : {\n      \"filter\" : {\n        \"term\" : {\n          \"tags\" : \"reddit\"\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>We used a <code>constant_score</code> to use the <code>term</code> query with a filter context. We could also have written the same query as below:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/tagwise/_search?pretty -d '{\n  \"query\": {\n    \"term\": {\n      \"tags\": \"reddit\"\n    }\n  }\n}'</code></pre>\n      </div>\n<p>While the latter query looks much simpler, the above query is marked by Elasticsearch for caching because of the filter context. This helps speed up subsequent searches of the same request type.</p>\n<h3 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 8,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"tagwise\",\n      \"_type\" : \"search\",\n      \"_id\" : \"AVvR1yM3gPzdwFFNDvs7\",\n      \"_score\" : 1.0,\n      \"_source\" : {\n        \"repo\" : \"reddit\",\n        \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n        \"owner\" : \"reddit\",\n        \"url\" : \"https://github.com/reddit/reddit\",\n        \"stars\" : 13053,\n        \"language\" : \"Python\",\n        \"created-on\" : \"2008-06-18T23:30:53Z\"\n      }\n    } ]\n  }\n}</code></pre>\n      </div>\n<p>As we can see in the above response object, we found a hit containing the “reddit” tag.</p>\n<p>However, we might often want to either index multiple tags with a document or search documents by more than one tags. We talk about this in the next article on <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/multiple-tag-match.html\">multiple tag match</a>.</p>"},{"id":"transformer-remark-markdown-html-c210ec55fcf2bf48cc13510a7d2c4c2b-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<h1 id=\"phrase-search\"><a href=\"#phrase-search\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Phrase Search</h1>\n<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/phrase-search/introduction.html\"><strong>How to build phrase search engine using Elasticsearch?</strong></a></p>\n<p>Phrase search is useful when the order of the keywords in our query matter. Using <code>match_phrase</code> query of Elasticsearch users can easily provide the list of keywords in some specific order to search for documents containing an exact sentence or phrase which contains those keywords in the same order rather than comparing a set of keywords in random order.</p>\n<h3 id=\"how-to-do-phrase-search\"><a href=\"#how-to-do-phrase-search\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to do phrase search</h3>\n<p>Like the <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/simple-match.html\">match query</a>, the <code>match_phrase</code> query first analyzes the query string according to the defined analyzer to produce a list of terms. It then searches for all the terms, but keeps only documents that contain all of the search terms, in the same positions relative to each other. Our sample dataset contains comments, posts etc. Elasticsearch provides special analyzers to deal with language specific texts.</p>\n<p>In the following sections, we will go through the process of building a very simple phrase search for the Hackernews dataset.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>By default, Elasticsearch analyzes the data before storing it on disk. It has different tokenizer, analyzer and filters to modify the data. Mappings are useful to attach these analyzers with specific fields. At index time, by default Elasticsearch uses the standard analyzer. Standard analyzer tokenizes the strings and converts it to the lower case tokens.</p>\n<p>We will use default English analyzer at the index time which can apply stemming, remove stop words, add synonyms to give us better results.</p>\n<h3 id=\"english-analyzer\"><a href=\"#english-analyzer\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>English Analyzer</h3>\n<p>The default analyzer of Elasticsearch contains following components:</p>\n<ul>\n<li><strong>Tokenizer</strong>: Splits the text into individual words by space or defined grammar.</li>\n<li><strong>TokenFilters</strong>: Filters the tokenized words. It lowercases all tokens, removes stop words, removes redundant tokens etc.</li>\n</ul>\n<p>English analyzer analyzes the text in the following way. Example text - “I’m not happy about the foxes\n“.</p>\n<ul>\n<li>First it tokenizes the text into words - [I’m, not, happy, about, the, foxes]</li>\n<li>Lowercases tokens: [i’m, not, happy, about, the, foxes]</li>\n<li>Removes stopwords: [i’m, happy, about, foxes]</li>\n<li>Stems tokens to their root form: [i’m, happi, about, fox]</li>\n</ul>\n<p>By using the english analyzer, we can match text more loosely. By default Elasticsearch uses same analyzer at index time and search time to ensure that the terms in the query are in the same format as the terms in the index.</p>\n<p>Now, we will specify the mappings for our <code>text</code> field. Elasticsearch will create mappings dynamically for the rest of the fields.</p>\n<h3 id=\"put-mappings\"><a href=\"#put-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Put Mappings</h3>\n<p>Define the English analyzer on the <code>text</code> field to analyze it at index time.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/hackernews/_mapping/post -d '{\n  \"properties\": {\n    \"text\": {\n      \"type\": \"string\",\n      \"analyzer\": \"english\"\n    }\n  }\n}'</code></pre>\n      </div>\n<p>We just put <strong>mapping</strong> on <code>post</code> type of <code>hackernews</code> index. Now, let’s index some data.</p>\n<h2 id=\"data-indexing\"><a href=\"#data-indexing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Indexing</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/hackernews/_mapping/post -d '{\n  \"by\": \"dmihal\",\n  \"id\": 13102152,\n  \"parent\": 13101870,\n  \"text\": \"Cool library! I&#x27;m a huge fan of Meteor.js, which provides a similar isomorphic database. Cool to see this implemented in such a lightweight package!\",\n  \"time\": 1480890919,\n  \"p_type\": \"comment\",\n  \"score\": 0\n}'</code></pre>\n      </div>\n<p>We just indexed our first document. We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.</p>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~6000 data points of Github repos that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALxAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsyS2qaEZIwD-J9none24PyYH8yBXUWZ1fjjzdmdQqiDSYIwX4TuBH3IQtfCk1YLwT0kR9-r0YWMhn1GxDTldPTCD836HnpPYGINlfz27teRoEy1L78YMlLzUoLIYWjaUV04UwEet4YmZw_ADbiLDT1RhM_1XOaFqFsgEhHTBnHFMCY5VI4poDJz0BABqDSKR5qF76qvBs6Smde9lws1D6g_epJiEVMK0611dw8BoWkl1yP-N1SAA\">here. <img src=\"http://i.imgur.com/x7nLB9s.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>Next, we will move to the queries section. Here, we will be using <code>match_phrase</code> query to match the phrases. <code>match_phrase</code> query first analyze the provided text using the explicit defined analyzer, or using the default search analyzer and produces a list of terms.</p>\n<h3 id=\"exact-phrase-match\"><a href=\"#exact-phrase-match\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exact-phrase match</h3>\n<p>In order to match all the terms consecutively in the same order relative to each other use default <code>match_phrase</code> query.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/hackernews/post/_search?pretty -d '{\n  \"query\": {\n    \"match_phrase\" : {\n      \"text\": \"Cool library\"\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Here, <code>text</code> is the Elasticsearch field against which we performed the phrase match query.</p>\n<h3 id=\"mix-search\"><a href=\"#mix-search\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mix Search</h3>\n<p>Every time we can’t expect that users will provide the exact query terms with the proper order. Elasticsearch provides a way to match the documents even though the term’s positions aren’t exactly equivalent.</p>\n<p>We can pass the <code>slop</code> parameter in the following way to match the documents which contain all the query terms but in a different order or may be with the distance between them.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/hackernews/post/_search?pretty -d '{\n  \"query\": {\n    \"match_phrase\": {\n      \"text\": {\n        \"query\": \"Cool library Meteor.js\",\n        \"slop\": 7\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>You can run above query and can get the matched document. If you check out the inserted document, the difference between the position of <code>\"Cool library\"</code> and <code>\"Meteor.js\"</code> will be the 7 words.</p>\n<h4 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h4>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 21,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.5155549,\n    \"hits\" : [ {\n      \"_index\" : \"hackernews\",\n      \"_type\" : \"post\",\n      \"_id\" : \"AVtNnwdOtBk7_I4P_hnC\",\n      \"_score\" : 1.5155549,\n      \"_source\" : {\n        \"by\" : \"dmihal\",\n        \"id\" : 13102152,\n        \"parent\" : 13101870,\n        \"text\" : \"Cool library! I&#x27;m a huge fan of Meteor.js, which provides a similar isomorphic database. Cool to see this implemented in such a lightweight package!\",\n        \"time\" : 1480890919,\n        \"p_type\" : \"comment\",\n        \"score\" : 0\n      }\n    } ]\n  }\n}</code></pre>\n      </div>"},{"id":"transformer-remark-markdown-html-b8d10660f78f9d110b691144220e54ea-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html\"><strong>how to build a search bar</strong></a>.</p>\n<h2 id=\"how-to-build-a-multi-match-search\"><a href=\"#how-to-build-a-multi-match-search\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How To Build A Multi Match Search</h2>\n<p>It’s not uncommon to come across scenarios where we want to apply a search query across multiple fields. Take an e-commerce search experience for instance, here we would want to show our users results that match either the product name or its description.</p>\n<p>In this post, we will go through the process of building a multi match search experience (i.e. across multiple fields) using Elasticsearch.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>Being a NoSQL document store that works with JSON data, it comes with a convenient default for dynamic mappings. And we will exploit that to index our first data.</p>\n<h2 id=\"indexing-data\"><a href=\"#indexing-data\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Indexing Data</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>\n<p>If we look back at our data mappings, they should now look like as follows</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/_mapping?pretty</code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>\"normal_searchbar\" : {\n  \"mappings\" : {\n    \"searchbar\" : {\n      \"properties\" : {\n        \"city\" : {\n          \"type\" : \"text\",\n          \"fields\" : {\n            \"keyword\" : {\n              \"type\" : \"keyword\",\n              \"ignore_above\" : 256\n            }\n          }\n        },\n        \"country\" : {\n          \"type\" : \"text\",\n          \"fields\" : {\n            \"keyword\" : {\n              \"type\" : \"keyword\",\n              \"ignore_above\" : 256\n            }\n          }\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>\n<p>Elasticsearch created these mappings dynamically based on our indexed data.</p>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~15,000 data points that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAAKUAQAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdZF4_hjSV7EdPDTy97DMkG9PlZFBp_bLIhTq50OaXXwxPtBuMRIcPoLj3jT4xckRg5gb7pSiw9fFAJoH5HAeiXsya9za62wB2R_mv16L4HlA_xHvdGfdp0418nmqFUmW6PphBtnkRfvGlb2yeCvcT6ZS5VZTHbbm30EuT94MJLydUHyurtrtMNZaLDIZ8fEM2COgl1-0zP_-F7ACg&#x26;editable=false\">here. <img src=\"https://i.imgur.com/rHOEixS.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>Now we will write the search query for <strong>multi match</strong>.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?pretty\" -d '{\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"United States\",\n      \"fields\": [\"city\", \"country\"]\n    }\n  }\n}'</code></pre>\n      </div>\n<p>A <strong>multi_match</strong> query is very similar to a <strong>match</strong> query, except it has a convenient way of searching across multiple <code>fields</code>.</p>\n<p>Response:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 15,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 20,\n    \"max_score\" : 5.8896313,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"1\",\n      \"_score\" : 5.8896313,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, ... ]\n  }\n}</code></pre>\n      </div>\n<p>In the response, you will get the list of all the cities whos <code>country</code> field matches with <code>United States</code>.</p>\n<p>You can try out this query interactively <a href=\"https://opensource.appbase.io/mirage/#?input_state=XQAAAAK0BQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmIMRwpW8tLJEeyKCwoHzPOkL9M0KdbHLZtMVPxIPMlh7YYAQinNjBTPX006UGzGERYNqNYjacxklVFkEoKyx2zaubRUqhqxScMG9gD-h7bDyj7ZQ6VU2Kj2rkJ1mds7BRVYkDfAHTEbtNa5GW20cp1fus1prbJbNXISvUEQNnPsDOsiH93N8mrqk4ZUuFt9U-a6lycH_ep550RD_dqNp8O-_A9qC47n_yrU_BAyybWtYEqbqRubgwH5baTC-QSqOaNVNANksc4-2BgClNbtmRec6DIggUIQApnQW6Ka43GNQq1VJspFdL6BLifAI_I-zupa4IFDLS-eq3oykTMVHE9e6IrKvHb6vbhP8saKnhS2CQ_qXkx0ckZvsg4eCPzeCWx35T2MqDCqRc_8schvvRofTxHNCKHQ4ziO5mson_yplVSlGqxmKIc3ZjYBcBkOWNDwGomNYQzguPGCc0pV8IBHXRIUZBhplz_Fg146eLXsFr7__5mfaXglRnlw8k8SEgxCXeQRDByqHthvrhtqHBxwQLZcDckQuuwOc-DvMrqUauiIvXXmpg2s62fIQHu7PeB63NkcE_elwz5DoAqJwgtnm9GSN_cgn7UJLTscZO85i41qOLF0pCCCmeqp38E9Ich-tipAfgkk5wLmKaEuhNn_8PccSA\">here. <img src=\"https://i.imgur.com/Z4Vt76n.png\"></a></p>\n<hr>\n<p>Next, you should read about <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/auto-complete.html\"><strong>auto completion</strong></a>.</p>"},{"id":"transformer-remark-markdown-html-1cc76fcc4c0de6ca6f91a6b743d0b2a8-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html\"><strong>how to build a search bar</strong></a>.</p>\n<h2 id=\"how-to-build-a-simple-match-search\"><a href=\"#how-to-build-a-simple-match-search\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How To Build A Simple Match Search</h2>\n<p>Every complex search begins its journey with simplicity.</p>\n<p>In this post, we will go through the process of building a very simple search experience using Elasticsearch.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>Being a NoSQL document store that works with JSON data, it comes with a convenient default for dynamic mappings. And we will exploit that to index our first data.</p>\n<h2 id=\"indexing-data\"><a href=\"#indexing-data\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Indexing Data</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code>curl -XPUT <span class=\"token variable\">$host</span>/normal_searchbar/searchbar/1 -d <span class=\"token string\">'{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</span>\n</code></pre>\n      </div>\n<p>If we look back at our data mappings, they should now look like as follows</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code>curl <span class=\"token variable\">$host</span>/normal_searchbar/_mapping?pretty\n</code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsx\"><code><span class=\"token string\">\"normal_searchbar\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"mappings\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"searchbar\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"properties\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"city\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"fields\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"keyword\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"keyword\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"ignore_above\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">256</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"country\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"fields\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"keyword\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"keyword\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"ignore_above\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">256</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n      </div>\n<p>Elasticsearch created these mappings dynamically based on our indexed data.</p>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~15,000 data points that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&#x26;editable=false\">here. <img src=\"https://i.imgur.com/gCu8brp.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>Now we will write our first search query, <strong>match</strong>.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code>curl <span class=\"token string\">\"<span class=\"token variable\">$host</span>/normal_searchbar/searchbar/_search?pretty\"</span> -d <span class=\"token string\">'{\n  \"query\": {\n<span class=\"gatsby-highlight-code-line\">    \"match\": {\n</span><span class=\"gatsby-highlight-code-line\">      \"city\": \"New York\"\n</span><span class=\"gatsby-highlight-code-line\">    }\n</span>  }\n}'</span>\n</code></pre>\n      </div>\n<p>Response:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsx\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"took\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"timed_out\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"_shards\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"total\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"successful\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"failed\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"hits\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"total\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"max_score\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">7.445813</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"hits\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"_index\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"normal_searchbar\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_type\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"searchbar\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_id\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_score\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">7.445813</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"_source\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"city\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"New York\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"country\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"United States\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n      </div>\n<p>You can also try out this query interactively  <a href=\"https://opensource.appbase.io/mirage/#?input_state=XQAAAAJeBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmIMRwpW8tLJEeyKCwoHzPOkL9M0KdbHLZtMVPxIPMlh7YYAQinNjBTPX006UGzGERYNqNYjacxklVFkEoKyx2zaubRUqhqxScMG9gD-h7bDyj7ZQ6VU2Kj2rkJ1mds7BRVYkDfAHTEbtNa5GW20cp1fus1prbJbNXISvUEQNnPsDOsiH93N8mrqk4ZUuFt9U-a6lycH_ep550RD_dqNp8O-_A9qC47n_yrU_BAyybWtYEqbqRubgwH5baTC-QR8cqtVNANksc4-2BgClNbtmRec6DIggUIQApnQW6Ka43GNQq1VJspFdL6BLiepaIvHsDim4UET7rm6-S-XBuAgmxwXg3uRZWbHsh2dXJc7OFlkkJ5ya2vtztZPA8jbWub8fNumuGGaas26ulK15v1eC6OvUVIizE6-4gA5Hf2VtlzBtduJrH6OUSJpSwOEThH8-2BKVYsJC11RK1IZz_CfkD1pl9s6Krlk6IjK2dlIIoqFy3S5dN5Z77hoOOVGDCTlDFL450xutJaPdENBxXQP4p98KwkK4Ph6fLGgTL7c5MY7Oqgd9P-tqeiPkaYCzZ9h4OQUqcxCn6MrWlo-g3XhMAmDaXD1N8VLhNAic0F2XkN1MLisvMMdHftDHr6zn96c6i4T_5fw9rw\">here. <img src=\"https://i.imgur.com/Z4Vt76n.png\"></a></p>\n<hr>\n<p>You should next read about <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/multi-match.html\"><strong>multi match</strong></a>.</p>"},{"id":"transformer-remark-markdown-html-9ff00e8d02edc8d003f68d9e06304236-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html\"><strong>How to build tag wise search with Elasticsearch</strong></a>.</p>\n<h2 id=\"how-to-store-data-using-elasticsearch-arrays\"><a href=\"#how-to-store-data-using-elasticsearch-arrays\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to store data using Elasticsearch arrays</h2>\n<p>A major use-case of tags in apps is to associate a content with one or more labels, it is then but natural that a tagwise search feature should be able to retrieve the marching content by user specifying either just one or more than one tag labels. A tag wise search is also fundamentally different from a full-text search as here, we are finding an exact match of a tag with a content item.</p>\n<p>In this post, we will be using an Array datastructure to store labels with a content document. For making the exact lookups, we will be applying  a term query on the dataset.</p>\n<p>In Elasticsearch, there is no dedicated array type. Any field can contain zero or more values by default, however, all values in the array must be of the same datatype. If you create a new field by indexing an array, Elasticsearch will use the datatype of the first value in the array to determine the type of the new field. We can create array of strings, integers, objects or array of arrays to store the data.</p>\n<p>Elasticsearch can also supports empty array or null array values.</p>\n<p>Default array does not support quering each object independently of the other objects in the array. To distinguish objects stored in array from each other we need to use <strong>Nested datatype</strong>.</p>\n<p><code>Note:</code> Read more about nested datatype over <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html\">here</a>.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>There is no special mapping required for arrays. You can store multiple values with single field without predefining schema.</p>\n<h2 id=\"indexing-data\"><a href=\"#indexing-data\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Indexing Data</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/search/1 -d '{\n  \"repo\" : \"reddit\",\n  \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n  \"owner\" : \"reddit\",\n  \"url\" : \"https://github.com/reddit/reddit\",\n  \"stars\" : 13053,\n  \"language\" : \"Python\",\n  \"created-on\" : \"2008-06-18T23:30:53Z\"\n}'</code></pre>\n      </div>\n<p>Here document is indexed under the <code>tagwise</code> index and <code>search</code> type.</p>\n<p>If we look back at our data mappings, they should now look like as follows</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/_mapping?pretty</code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"tagwise\": {\n    \"mappings\": {\n      \"search\": {\n        \"properties\": {\n          \"owner\": {\n            \"type\": \"string\"\n          },\n          \"repo\": {\n            \"type\": \"string\"\n          },\n          \"tags\": {\n            \"type\": \"string\"\n          },\n          \"url\": {\n            \"type\": \"string\"\n          },\n          \"stars\": {\n            \"type\": \"integer\"\n          },\n          \"language\": {\n            \"type\": \"string\"\n          },\n          \"created-on\": {\n            \"type\": \"date\"\n          }\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>\n<p>Elasticsearch created these mappings dynamically based on our indexed data.</p>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA\">here. <img src=\"http://i.imgur.com/x7nLB9s.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>Elasticsearch array supports <strong>match</strong> as well as <strong>term</strong> query. Let’s write our first search query for the arrays.</p>\n<p>Syntax for <strong>term</strong> query -</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n  \"query\": {\n    \"term\": {\n      \"tags\": \"reddit\"\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Syntax for <strong>match</strong> query -</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/search/_search?pretty -d '{\n  \"query\": {\n    \"match\": {\n      \"tags\": \"reddit\"\n    }\n  }\n}'</code></pre>\n      </div>\n<h3 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response:</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 14,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 6.1179934,\n    \"hits\" : [ {\n      \"_index\" : \"tagwise\",\n      \"_type\" : \"search\",\n      \"_id\" : \"AVvR1yM3gPzdwFFNDvs7\",\n      \"_score\" : 6.1179934,\n      \"_source\" : {\n        \"repo\" : \"reddit\",\n        \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n        \"owner\" : \"reddit\",\n        \"url\" : \"https://github.com/reddit/reddit\",\n        \"stars\" : 13053,\n        \"language\" : \"Python\",\n        \"created-on\" : \"2008-06-18T23:30:53Z\"\n      }\n    } ]\n  }\n}</code></pre>\n      </div>\n<p>You can also try out this query interactively  <a href=\"https://opensource.appbase.io/mirage/#?input_state=XQAAAAIqBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmHCrDFs7iDKutPu_ClxcjCYOqUqELVPJ0G6sKj4u2r8c-T_5P6GlG49XYgfc2GYuMMRuSumifCxuSSCXtOAxs6Hde1p2VgSpnD3tfQtwbKtmlUV9FWFj1xXnSypOS15FxHENksJUxXCtYmd4iVjGL1bowAxrWfOuw1nuIcWHek4srAs1sTP0SOd6XPS6-blE0WjAQt4ce9B23dy_19xYCecMoWthMwrwWTFypBAO8Vcd9w4VuVo1KU8LBRzuRLhDL0KvF_VG62ehVISj4Ty-MiHt6Wpb2oKqBeU0_RAvNWfU1QZMs-TXvpXEXsEaIoh-foBQR6mza5cKEG3-8vZnMLBXW2J5sjEUeM7tqfjdgcDJCjC3ICatsg2wVEme8RVF3cFkkDDX0MTi9_t1eIrq8yU3AHAMZqvAUb5mkmRVWPKetqsE-i4GQyerYVnSY-EJXAPnnip8IXLbYRM8d4ocCXD3R20C7ZwGFGG0MuPIwmzwrf6hStk8ddjvTn81vDwIPDnr91ov42AvY0-7Kb5CpGG6dF2kFR7xcKxyVCxYfbE8Wl2f0RTH6jk-GS7HuqFdz4MEIWS63yeqQ-jajHPetrQP81BisYnXF281pV7ajxzqx8kkTagiyRT9mQsOR_oMVCT63LKNBeCSnffodl6mf_7Qo1M\">here. <img src=\"http://i.imgur.com/9bg2TMJ.png\"></a></p>\n<p>You should next read about <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/exact-match.html\"><strong>exact match</strong></a>.</p>"},{"id":"transformer-remark-markdown-html-8662744ad1a3738273b6babede46e7db-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html\"><strong>how to build a search bar</strong></a>.</p>\n<h2 id=\"how-to-make-a-normal-search-bar\"><a href=\"#how-to-make-a-normal-search-bar\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to make a normal search bar</h2>\n<p>This chapter compiles what we learnt so far in the series to implement a searchbar query and UI using Elasticsearch.</p>\n<p>The main functionalities that we will need for doing this are:</p>\n<ol>\n<li><strong>Auto complete</strong> - While user types, we need to provide auto-completion for the input queries. Auto-complete functionality should be as fast as a user types to provide instant feedback relevant to what a user has already typed in.  Elasticsearch provides a convenient way to get autocomplete up and running quickly with its completion suggester feature.</li>\n<li><strong>Suggestions</strong>(or full text search) - Use quick suggestions to help users save time, iterate on their searches, and get the results they want. It helps to show the relevant data to user inputs.</li>\n<li><strong>UI</strong> - For building the UI, we will use a React components library that provides us the scaffolding for the UI where we can inject the Elasticsearch query.</li>\n</ol>\n<p><code>Note:</code> You can deep dive into the implementation details of the above two functionalities through these chapters - <a href=\"https://github.com/appbaseio/esc/blob/master/searchbar/auto-complete.md\">Auto Completion</a> and <a href=\"https://github.com/appbaseio/esc/blob/master/searchbar/suggestions.md\">Suggestions</a>.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>In this section, we will specify the mappings for our two fields: city and country, with the necessary settings to enable auto-complete and suggestion functionalities.</p>\n<p><code>auto-suggest</code> analyzer will be useful to get the suggestions. For the auto completion we will use the <code>simple</code> analyzer that tokenizes the text as is (i.e. no white space splitting) and applies a lowercase filter.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/_settings?pretty -d '{\n  \"analysis\": {\n    \"tokenizer\": {\n      \"ngramizer\": {\n        \"type\": \"ngram\",\n        \"min_gram\": 1,\n        \"max_gram\": 10,\n        \"token_chars\": [\n          \"letter\",\n          \"digit\",\n          \"punctuation\",\n          \"symbol\"\n        ]\n      }\n  },\n    \"analyzer\": {\n      \"auto-suggest\": {\n        \"type\": \"custom\",\n        \"tokenizer\": \"ngramizer\",\n        \"filter\": [\n          \"lowercase\",\n          \"asciifolding\"\n        ]\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>We just added a custom analyzers. The <code>_settings</code> endpoint can be used for adding one or more custom analyzers.</p>\n<h2 id=\"defining-mappings-1\"><a href=\"#defining-mappings-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>Here we will use two fields and two subfields each of these fields. These subfields are useful to store the same data in a different manner. <code>city</code> field is useful to index the cities with the default analyzer of Elasticsearch.</p>\n<p><code>city_autocomplete</code> subfield is useful for the auto-completion feature. It indexes and searches the data using <code>simple</code> analyzer and with type <strong>completion</strong>.</p>\n<p><code>city_autocomplete</code> subfield is useful for the auto-suggestion feature. It indexes the data using <code>auto-suggest</code> analyzer, searches the data using <code>simple</code> analyzer and is of type <strong>text</strong>.</p>\n<p>Similar sub-field structure will also hold true for the country field.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/_mapping/searchbar -d '{\n  \"searchbar\": {\n    \"properties\": {\n      \"city\": {\n        \"type\": \"text\",\n        \"fields\": {\n          \"city_autocomplete\": {\n            \"type\": \"completion\",\n            \"analyzer\": \"simple\",\n            \"search_analyzer\": \"simple\"\n          },\n          \"city_autosuggest\": {\n            \"type\": \"text\",\n            \"analyzer\": \"auto-suggest\",\n            \"search_analyzer\": \"simple\"\n          }\n        }\n      },\n      \"country\": {\n        \"type\": \"text\",\n        \"fields\": {\n          \"country_autocomplete\": {\n            \"type\": \"completion\",\n            \"analyzer\": \"simple\",\n            \"search_analyzer\": \"simple\"\n          },\n          \"country_autosuggest\": {\n            \"type\": \"text\",\n            \"analyzer\": \"auto-suggest\",\n            \"search_analyzer\": \"simple\"\n          }\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<h3 id=\"data-indexing\"><a href=\"#data-indexing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Indexing</h3>\n<p>As you can see, while indexing the data, we only need to insert the city and country fields.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>\n<h3 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h3>\n<p>For accessibility, we have indexed ~15,000 data points that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&#x26;editable=false\">here. <img src=\"https://i.imgur.com/rHOEixS.png\"></a>.</p>\n<h3 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h3>\n<p>Next, we will move to the queries section. Here, we will be using the match query for getting the dropdown suggestions and will be using the <strong>completion</strong> suggester query for getting the autocomplete suggestions. Let’s first query on the <code>city</code> field.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?pretty\" -d '{\n  \"query\": {\n    \"match\": {\n      \"city.city_autosuggest\": \"New\"\n    }\n  },\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"New\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<h5 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h5>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 18,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 2.6197505,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 2.6197505,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYTTkhvsk2FETcNLo\",\n      \"_score\" : 2.6197505,\n      \"_source\" : {\n        \"city\" : \"New Farm\",\n        \"country\" : \"Australia\"\n      }\n    }]\n  },\n  \"suggest\" : {\n    \"city-suggest\" : [ {\n      \"text\" : \"New\",\n      \"offset\" : 0,\n      \"length\" : 3,\n      \"options\" : [ {\n        \"text\" : \"Newport\",\n        \"score\" : 5.0\n      }, {\n        \"text\" : \"Newmarket\",\n        \"score\" : 2.0\n      } ]\n    } ]\n  }\n}</code></pre>\n      </div>\n<h6 id=\"note-there-is-some-overlap-between-the-autocompletion-and-autosuggestion-feature-heres-why-we-make-two-separate-queries\"><a href=\"#note-there-is-some-overlap-between-the-autocompletion-and-autosuggestion-feature-heres-why-we-make-two-separate-queries\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Note: There is some overlap between the autocompletion and autosuggestion feature, here’s why we make two separate queries.</h6>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Autocompletion</th>\n<th align=\"left\">Autosuggestion</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">Uses the suggest query and completion mapping type.</td>\n<td align=\"left\">Uses the match query with a n-gram based indexing analyzer.</td>\n</tr>\n<tr>\n<td align=\"left\">Only offers suggestions that match from the beginning of the search query, e.g. “Yor” will return “York” but now “New York”.</td>\n<td align=\"left\">Offers hits that contains the search query, it doesn’t necessarily need to start with the query. e.g. “Yor” may also return “New York” in the matching result.</td>\n</tr>\n<tr>\n<td align=\"left\">Since autocompletion doesn’t tokenize the word, the suggest query here works on words of most practical lengths.</td>\n<td align=\"left\">Since we rely on n-grams here, the search’s usability is limited to the max token length - 10 in our example.</td>\n</tr>\n<tr>\n<td align=\"left\">Autocompletion’s storage is more efficient because it doesn’t breakdown the words into overlapping tokens.</td>\n<td align=\"left\">The longer the n-gram token length, the storage requirements increase quadratically.</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"query-on-both-city-and-country\"><a href=\"#query-on-both-city-and-country\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query on both City and Country</h4>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl \"$host/normal_searchbar/searchbar/_search?pretty\" -d '{\n  \"query\": {\n     \"multi_match\": {\n        \"query\": \"New\",\n        \"fields\": [\"city.city_autosuggest\", \"country.country_autosuggest\"]\n    }\n  },\n  \"suggest\": {\n    \"city-suggest\": {\n      \"text\": \"New\",\n      \"completion\": {\n        \"field\": \"city.city_autocomplete\"\n      }\n    },\n    \"country-suggest\": {\n      \"text\": \"New\",\n      \"completion\": {\n        \"field\": \"country.country_autocomplete\"\n      }\n    }\n  }       \n}'</code></pre>\n      </div>\n<h3 id=\"query-response\"><a href=\"#query-response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query Response</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 15,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 1.7185925,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 1.7185925,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYTTkhvsk2FETcNLo\",\n      \"_score\" : 1.7185925,\n      \"_source\" : {\n        \"city\" : \"New Farm\",\n        \"country\" : \"Australia\"\n      }\n    } ]\n  },\n  \"suggest\" : {\n    \"country-suggest\" : [ {\n      \"text\" : \"New\",\n      \"offset\" : 0,\n      \"length\" : 3,\n      \"options\" : [ ]\n    } ],\n    \"city-suggest\" : [ {\n      \"text\" : \"New\",\n      \"offset\" : 0,\n      \"length\" : 3,\n      \"options\" : [ {\n        \"text\" : \"Newport\",\n        \"score\" : 5.0\n      }, {\n        \"text\" : \"Newmarket\",\n        \"score\" : 2.0\n      } ]\n    } ]\n  }\n}</code></pre>\n      </div>\n<h3 id=\"implementing-the-searchbar-with-a-ui\"><a href=\"#implementing-the-searchbar-with-a-ui\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implementing the searchbar with a UI</h3>\n<p>// TODO</p>"},{"id":"transformer-remark-markdown-html-9865f99b9ec8671cd4b937f6f40493e2-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants","value":"<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/introduction.html\"><strong>how to build a search bar</strong></a>.</p>\n<h3 id=\"how-to-build-an-as-you-type-suggestions-view\"><a href=\"#how-to-build-an-as-you-type-suggestions-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to build an as-you-type suggestions view</h3>\n<p>In this post, we will implement a search-as-you-type suggestions feature to help users save time, iterate on their searches, and get the results they want. It can also help with showing the relevant data to user’s inputs. We will be using a dataset containing a list of cities and countries and we will be building this feature using a custom n-gram analyzer.</p>\n<p>To implement this functionality, we will use a n-gram tokenizer with a custom type analyzer. A custom analyzer allows to combine character filters, tokenizer, and token filters all at once. In this case we have used a self defined <code>tokenizer</code> called <code>ngramizer</code> which will split on characters that don’t belong to the classes specified in <code>token_chars</code> field.</p>\n<p><code>Note:</code> An alternate approach can be implemented using Elasticsearch’s <strong>completion</strong> type and queried using a  <strong>suggester</strong> type query. You can read more about it in our building a search-as-you-type auto-completion feature post <a href=\"https://github.com/appbaseio/esc/blob/master/searchbar/auto-complete.md\">here</a>.</p>\n<h2 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h2>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>In this section, we will specify the mappings for our two fields: city and country, with the necessary settings to enable suggestions functionality.</p>\n<h3 id=\"transforming-data-to-n-gram-tokens-before-indexing\"><a href=\"#transforming-data-to-n-gram-tokens-before-indexing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Transforming data to n-gram tokens before indexing</h3>\n<p>We would ideally want the auto-suggestion to work on a text phrase in a way that even if the user types a word that is not at the start of the phrase, we can match it correctly. This is where n-grams come in handy. 3-grams for the phrase “New York” will be [“new”, “yor”, “ork”, “rky”, “kyo”].</p>\n<p>We will set our tokenizer to create all [1-10] grams of a token. You can read more about ngrams over <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-ngram-tokenizer.html\">here</a>.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT \"$host/normal_searchbar/_settings?pretty\" -d '{\n  \"analysis\": {\n    \"tokenizer\": {\n      \"ngramizer\": {\n        \"type\": \"ngram\",\n        \"min_gram\": 1,\n        \"max_gram\": 10,\n        \"token_chars\": [\n          \"letter\",\n          \"digit\",\n          \"punctuation\",\n          \"symbol\"\n        ]\n      }\n    },\n    \"analyzer\": {\n      \"auto-suggest\": {\n        \"type\": \"custom\",\n        \"tokenizer\": \"ngramizer\",\n        \"filter\": [\n          \"lowercase\",\n          \"asciifolding\"\n        ]\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>We just added a custom analyzer called <code>auto-suggest</code> which uses a custom tokenizer <code>ngramizer</code> for creating [1-10]grams for each token.</p>\n<p><code>Note:</code> Where we use type as <code>ngram</code> in the above snippet, you can also instead set type as <code>edge_ngram</code>. It is like n-gram except filtered by the beginning character of the n-gram. [1-3] edge-grams for the phrase “New York” will be [“n”, “ne”, “new”, “y”, “yo”, “yor”].</p>\n<p><code>Note:</code> The <code>_settings</code> endpoint can be used for adding one or more custom analyzers.</p>\n<h3 id=\"updating-mappings\"><a href=\"#updating-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Updating Mappings</h3>\n<p>Next, we will update the mapping for the <strong>city</strong> and <strong>country</strong> fields. We will exploit a very cool feature of Elasticsearch called <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/multi-fields.html\"><strong>multi-fields</strong></a> in doing so. Multi-fields enable indexing the same field in different ways, thus allowing for multiple ways of querying without requiring any additional effort in indexing of the data.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT \"$host/normal_searchbar/_mapping/searchbar\" -d '{\n  \"properties\": {\n    \"city\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"city_autosuggest\": {\n          \"type\": \"text\",\n          \"analyzer\": \"auto-suggest\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    },\n    \"country\": {\n      \"type\": \"text\",\n      \"fields\": {\n        \"country_autosuggest\": {\n          \"type\": \"text\",\n          \"analyzer\": \"auto-suggest\",\n          \"search_analyzer\": \"simple\"\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Note that we are only analyzing the data into n-grams at index time. At search time, creating n-grams from the search text would be redundant and hence, we will use a <strong>simple</strong> analyzer over there. A <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-simple-analyzer.html\">simple analyzer</a> only applies a lowercase tokenizer.</p>\n<h3 id=\"data-indexing\"><a href=\"#data-indexing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Indexing</h3>\n<p>As you can see, while indexing the data, we only need to insert the <strong>city</strong> and <strong>country</strong> fields.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/normal_searchbar/searchbar/1 -d '{\n  \"city\": \"New York\",\n  \"country\": \"United States\"\n}'</code></pre>\n      </div>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For better accessibility, we have indexed ~15,000 data points that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALvAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFslF8ZMg7A6kGLFGPADbJVmb5ysVqinQQuiFLkb4deUgCDkj3Ca7c1o_y8XA0-MkniaJtriPLcO0sOs-he9RgZSsY1-Dj7M1oUHcSMXEdlL__k05smSCpzBnTIbIxXMyoFoHyy8Z_g-Ku8eQnTdtXdsrQgMg_wmz9OmY-26TdzjLWp-v2Wf1WiRDeMXYvBl1QvLH_j_iLGk7AkFU5rmsqyCR3BmLVt2baZT9KRDsA_8PvEAA&#x26;editable=false\">here. <img src=\"https://i.imgur.com/rHOEixS.png\"></a></p>\n<h3 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h3>\n<p>Next, we will move to the queries section. Here, we will be using the match query for getting the suggestions. Let’s first query on <code>city</code> field.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/searchbar/_search?pretty -d '{\n  \"query\": {\n    \"match\": {\n      \"city.city_autosuggest\": \"York\"\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Here user inputs are passed as a value of <code>city.city_autosuggest</code> field.</p>\n<h5 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h5>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 4.4288692,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYWRohvsk2FETcOKG\",\n      \"_score\" : 4.4288692,\n      \"_source\" : {\n        \"city\" : \"York\",\n        \"country\" : \"United Kingdom\"\n      }\n    }, {\n      \"_index\" : \"searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 3.321652,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }]\n  }\n}</code></pre>\n      </div>\n<p>In the response, you can see Elasticsearch has returned two documents which have matched with the <code>York</code> query. Match query also provides <code>_score</code> field to get the similarity ratio between user inputs and indexed documents.</p>\n<h4 id=\"query-on-country\"><a href=\"#query-on-country\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query on Country</h4>\n<p>A similar query for suggestions on the <strong>country</strong> field would look like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/searchbar/_search?pretty -d '{\n  \"query\": {\n    \"match\": {\n      \"country.country_autosuggest\": \"States\"\n    }\n  }\n}'</code></pre>\n      </div>\n<h4 id=\"query-on-both-city-and-country\"><a href=\"#query-on-both-city-and-country\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query on both City and Country</h4>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/normal_searchbar/searchbar/_search?pretty -d '{\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"New York\",\n      \"fields\": [\"city.city_autosuggest\", \"country.country_autosuggest\"]\n    }\n  }\n}'</code></pre>\n      </div>\n<h3 id=\"query-response\"><a href=\"#query-response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query Response</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 17,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 3.1685972,\n    \"hits\" : [ {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYRgYhvsk2FETcMug\",\n      \"_score\" : 3.1685972,\n      \"_source\" : {\n        \"city\" : \"New York\",\n        \"country\" : \"United States\"\n      }\n    }, {\n      \"_index\" : \"normal_searchbar\",\n      \"_type\" : \"searchbar\",\n      \"_id\" : \"AVsMYWRohvsk2FETcOKG\",\n      \"_score\" : 1.3023362,\n      \"_source\" : {\n        \"city\" : \"York\",\n        \"country\" : \"United Kingdom\"\n      }\n    }]\n  }\n}</code></pre>\n      </div>\n<p>You can also try out this query interactively <a href=\"https://opensource.appbase.io/mirage/#?input_state=XQAAAAISBgAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmIMRwpW8tLJEeyKCwoHzPOkL9M0KdbHLZtMVPxIPMlh7YYAQinNjBTPX006UGzGERYNqNYjacxklVFkEoKyx2zaubRUqhqxScMG9gD-h7bDyj7ZQ6VU2Kj2rkJ1mds7BRVYkDfAHTEbtNa5GW20cp1fus1prbJbNXISvUEQNnPsDOsiH93N8mrqk4ZUuFt9U-a6lycH_ep550RD_dqNp8O-_A9qC47n_yrU_BAyybWtYEqbqRubgwH5baTC-QUPkZhVv-NTguSpvY87WPm9DYiLbJIjGia60W7q-RJW_8qOldSdcuXZuaV-oe_SSrUY6SdSRnGUasF9jyyODzAvfMcKpMSaTmK2W9N2p9c-TjmKn0qNpP8rb_94BIPECIrPMS2bpz4FxVM4auqLxGt8ytJTGmaKWfXmxwlAKO5AZgEJNkz43JbjaPFoWka-u-2ZIYI3-aKmUOgeRoAQ9KuWN1P0Rx-Y3EoXZs3_Iodp48WS8L8kreylBybw8CiRF4K3xl8P0HMKBF0-Pk1p8N0mYLM6HEvjqseDb2elEtSWW8WrYoXyWb6AIIF9EkVvrCGbUYUeY6PcCg8O3Wv9vTP2h4sdg6o2CZb4kdrWmfDRACzWA1mdJXttyT4v-P24C9pE5NI7QALLlAkSPaURi91BbCgbH7yXgjG7_DYbag\">here. <img src=\"https://i.imgur.com/nC3g4LR.png\"></a></p>\n<p>Benefits and Drawbacks v/s auto-complete.</p>\n<ol>\n<li>Highlight the trade-off of increased index size because of space requirements of ngram.</li>\n<li>Sometimes, you really don’t want to match incomplete words, auto-complete is better in such a scenario.</li>\n</ol>\n<hr>\n<p>Next, you should read about <a href=\"https://appbaseio.gitbooks.io/esc/content/searchbar/searchbar.html\"><strong>Searchbar</strong></a>.</p>"}]}