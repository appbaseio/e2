{
    "data": {
        "markdownRemark": {
            "html": "<h1 id=\"exact-match\"><a href=\"#exact-match\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exact Match</h1>\n<p>This article is a part of the series on <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html\"><strong>How to build tag wise search engine with Elasticsearch?</strong></a></p>\n<h3 id=\"how-to-do-a-tag-wise-search\"><a href=\"#how-to-do-a-tag-wise-search\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to do a tag wise search</h3>\n<p>Elasticsearch supports queries and filters. Queries are useful within full-text search, where results depend on a relevance score. In general, filters are used for binary yes/no searches or within queries for exact value match. Think of filters as an equivalent to the WHERE clause in SQL. Filters are faster than queries because they do not calculate the relevance score and can be easily cached.</p>\n<p>We will be using a sample dataset containing the Github repository info, and we will be using a <strong>term</strong> query to perform a tag wise search.</p>\n<h3 id=\"defining-mappings\"><a href=\"#defining-mappings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining Mappings</h3>\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\n<p>By default Elasticsearch analyzes the data before storing it on disk. However, since we require an exact match of the data for repository tags, we will apply a <code>index: not_analyzed</code> setting to prevent the tag field from being analyzed.</p>\n<p>We will only specify the mapping for the <code>tags</code> field. Elasticsearch will create mappings dynamically for the rest of the fields.</p>\n<h3 id=\"disable-analyzers-on-tags-field\"><a href=\"#disable-analyzers-on-tags-field\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disable analyzers on <code>tags</code> field</h3>\n<p>// TODO: Use Keyword and also explain the difference wrt Text.</p>\n<p>To store the data without analyzing it, we have to make <code>tags</code> field <strong>not_analyzed</strong>. By doing this, Elasticsearch will store the data as usual without any modifications.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/_mapping/tagwise -d '{\n  \"properties\": {\n    \"tags\": {\n      \"type\": \"keyword\",\n    }\n  }\n}'</code></pre>\n      </div>\n<p>Now, let’s index some data.</p>\n<h2 id=\"data-indexing\"><a href=\"#data-indexing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Indexing</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl -XPUT $host/tagwise/tagwise/1 -d '{\n  \"repo\" : \"reddit\",\n  \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n  \"owner\" : \"reddit\",\n  \"url\" : \"https://github.com/reddit/reddit\",\n  \"stars\" : 13053,\n  \"language\" : \"Python\",\n  \"created-on\" : \"2008-06-18T23:30:53Z\"\n}'</code></pre>\n      </div>\n<p>Voila! We indexed our first document with id <code>1</code>. We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.</p>\n<h2 id=\"data-browser-view\"><a href=\"#data-browser-view\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Browser View</h2>\n<p>For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser <a href=\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA\">here. <img src=\"http://i.imgur.com/x7nLB9s.png\"></a></p>\n<h2 id=\"query\"><a href=\"#query\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query</h2>\n<p>The <code>term</code> query will look for the exact value that we specify. By itself, a <code>term</code> query is simple. It accepts a field name and the value that we wish to find. Usually, when looking for an exact value, we don’t want to score the query. We just want to include/exclude documents, so we will use a <code>constant_score</code> query to execute the term query in a non-scoring mode and apply a uniform score of one.</p>\n<p>The final combination of a <code>constant_score</code> query which contains a <code>term</code> query will look like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/tagwise/_search?pretty -d '{\n  \"query\": {\n    \"constant_score\" : {\n      \"filter\" : {\n        \"term\" : {\n          \"tags\" : \"reddit\"\n        }\n      }\n    }\n  }\n}'</code></pre>\n      </div>\n<p>We used a <code>constant_score</code> to use the <code>term</code> query with a filter context. We could also have written the same query as below:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>curl $host/tagwise/tagwise/_search?pretty -d '{\n  \"query\": {\n    \"term\": {\n      \"tags\": \"reddit\"\n    }\n  }\n}'</code></pre>\n      </div>\n<p>While the latter query looks much simpler, the above query is marked by Elasticsearch for caching because of the filter context. This helps speed up subsequent searches of the same request type.</p>\n<h3 id=\"response\"><a href=\"#response\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Response</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsxon\"><code>{\n  \"took\" : 8,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"tagwise\",\n      \"_type\" : \"search\",\n      \"_id\" : \"AVvR1yM3gPzdwFFNDvs7\",\n      \"_score\" : 1.0,\n      \"_source\" : {\n        \"repo\" : \"reddit\",\n        \"tags\" : [ \"javascript\", \"python\", \"reddit\" ],\n        \"owner\" : \"reddit\",\n        \"url\" : \"https://github.com/reddit/reddit\",\n        \"stars\" : 13053,\n        \"language\" : \"Python\",\n        \"created-on\" : \"2008-06-18T23:30:53Z\"\n      }\n    } ]\n  }\n}</code></pre>\n      </div>\n<p>As we can see in the above response object, we found a hit containing the “reddit” tag.</p>\n<p>However, we might often want to either index multiple tags with a document or search documents by more than one tags. We talk about this in the next article on <a href=\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/multiple-tag-match.html\">multiple tag match</a>.</p>",
            "frontmatter": {
                "title": "",
                "next": null,
                "prev": null,
                "nextTitle": null,
                "prevTitle": null
            },
            "fields": {
                "path": "docs/tagwise-search/exact-match.md",
                "slug": "/docs/tagwise-search/exact-match.html"
            }
        }
    },
    "pathContext": {
        "slug": "/docs/tagwise-search/exact-match.html"
    }
}