{"version":3,"sources":["webpack:///path---tagwise-search-multiple-tag-match-html-4e50031f42b7b0a73fd1.js","webpack:///./.cache/json/tagwise-search-multiple-tag-match-html.json"],"names":["webpackJsonp","445","module","exports","data","markdownRemark","html","frontmatter","title","next","prev","nextTitle","prevTitle","fields","path","slug","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SACAC,MACAC,gBACAC,KAAA,6wjBACAC,aACAC,MAAA,qBACAC,KAAA,KACAC,KAAA,cACAC,UAAA,KACAC,UAAA,kBAEAC,QACAC,KAAA,4CACAC,KAAA,4CAIAC,aACAD,KAAA","file":"path---tagwise-search-multiple-tag-match-html-4e50031f42b7b0a73fd1.js","sourcesContent":["webpackJsonp([43733725438942],{\n\n/***/ 445:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\n\t\t\"data\": {\n\t\t\t\"markdownRemark\": {\n\t\t\t\t\"html\": \"<p>This article is a part of the series on <a href=\\\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html\\\"><strong>How to build tag wise search with Elasticsearch</strong></a>.</p>\\n<h2 id=\\\"how-to-find-multiple-exact-values\\\"><a href=\\\"#how-to-find-multiple-exact-values\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>How to find multiple exact values</h2>\\n<p>A major use-case of tags in apps is to associate a content with one or more labels, it is then but natural that a tagwise search feature should be able to retrieve the matching content by user specifying either just one or more than one tag labels in union or intersection output modes.</p>\\n<p>In this chapter, we will be using an Array data structure to store more than one label with a content document. For making the exact lookups for multiple tagwise, we will be applying a term query along with boolean clause on the dataset.</p>\\n<h3 id=\\\"how-to-store-data-using-elasticsearch-arrays\\\"><a href=\\\"#how-to-store-data-using-elasticsearch-arrays\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>How to store data using Elasticsearch arrays</h3>\\n<p>For one or more then one inputs elasticsearch by default considers that field as an array type. However, all values in the array must be of the same datatype. If you create a new field by indexing an array, Elasticsearch will use the datatype of the first value in the array to determine the type of the new field. We can create array of strings, integers, objects or array of arrays to store the data.</p>\\n<p>Default array does not support querying each object independently of the other objects in the array. To distinguish objects stored in array from each other we need to use <strong>Nested datatype</strong>.</p>\\n<p><code>Note:</code> You can read more about nested datatype over <a href=\\\"https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html\\\">here</a>.</p>\\n<h2 id=\\\"defining-mappings\\\"><a href=\\\"#defining-mappings\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Defining Mappings</h2>\\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\\n<p>By default Elasticsearch analyzes the data before storing it on disk. However, since we require an exact match of the data for repository tags, we will apply a <code>index: not_analyzed</code> setting to prevent the tag field from being analyzed.</p>\\n<p>We will only specify the mapping for the tags field. Elasticsearch will create mappings dynamically for the rest of the fields.</p>\\n<h3 id=\\\"disable-analyzers-on-tags-field\\\"><a href=\\\"#disable-analyzers-on-tags-field\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Disable analyzers on <code>tags</code> field</h3>\\n<p>To store the data without analyzing it, we have to make <code>tags</code> field <strong>not_analyzed</strong>. By doing this Elasticsearch will store the data as usual without any modifications.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl -XPUT $host/tagwise/_mapping/search -d '{\\n  \\\"properties\\\": {\\n    \\\"tags\\\": {\\n      \\\"type\\\": \\\"keyword\\\"\\n    }\\n  }\\n}'</code></pre>\\n      </div>\\n<p>We just put <strong>mapping</strong> on <code>search</code> type of <code>tagwise</code> index. Now, let’s index some data.</p>\\n<h2 id=\\\"indexing-data\\\"><a href=\\\"#indexing-data\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Indexing Data</h2>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl -XPUT $host/tagwise/search/1 -d '{\\n  \\\"repo\\\" : \\\"reddit\\\",\\n  \\\"tags\\\" : [ \\\"javascript\\\", \\\"python\\\", \\\"reddit\\\" ],\\n  \\\"owner\\\" : \\\"reddit\\\",\\n  \\\"url\\\" : \\\"https://github.com/reddit/reddit\\\",\\n  \\\"stars\\\" : 13053,\\n  \\\"language\\\" : \\\"Python\\\",\\n  \\\"created-on\\\" : \\\"2008-06-18T23:30:53Z\\\"\\n}'</code></pre>\\n      </div>\\n<p>If we look back at our data mappings, they should now look like as follows</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl $host/tagwise/_mapping?pretty</code></pre>\\n      </div>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n  \\\"tagwise\\\": {\\n    \\\"mappings\\\": {\\n      \\\"search\\\": {\\n        \\\"properties\\\": {\\n          \\\"owner\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"repo\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"tags\\\": {\\n            \\\"type\\\": \\\"keyword\\\"\\n          },\\n          \\\"url\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"stars\\\": {\\n            \\\"type\\\": \\\"long\\\"\\n          },\\n          \\\"language\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"created-on\\\": {\\n            \\\"type\\\": \\\"date\\\"\\n          }\\n        }\\n      }\\n    }\\n  }\\n}</code></pre>\\n      </div>\\n<p>We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.</p>\\n<h2 id=\\\"data-browser-view\\\"><a href=\\\"#data-browser-view\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Data Browser View</h2>\\n<p>For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser <a href=\\\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA\\\">here. <img src=\\\"http://i.imgur.com/x7nLB9s.png\\\"></a></p>\\n<h2 id=\\\"query\\\"><a href=\\\"#query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Query</h2>\\n<p>Elasticsearch provides a way through bool query to combine the multiple query types into a single query with <code>and</code>, <code>or</code>, and <code>not</code> logic.</p>\\n<h3 id=\\\"bool-query\\\"><a href=\\\"#bool-query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Bool Query</h3>\\n<p>The bool query is composed of four clauses(query).</p>\\n<ul>\\n<li><code>must</code>: All of these clauses must match. The equivalent of <strong>AND</strong>.</li>\\n<li><code>must_not</code>: All of these clauses must not match. The equivalent of <strong>NOT</strong>.</li>\\n<li><code>should</code>: At least one of these clauses must match. The equivalent of <strong>OR</strong>.</li>\\n<li><code>filter</code>: The query must appear in matching documents. This query ignores the score and executes it in filter context.</li>\\n</ul>\\n<p>We will execute bool queries in non-scoring mode since we have disabled analyzer on <code>tags</code> field. We will use <code>constant_score</code> query to wrap everything with its filter clause.</p>\\n<p>So our basic query json structure looks like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n   \\\"query\\\" : {\\n      \\\"constant_score\\\" : {\\n         \\\"filter\\\" : {\\n            \\\"bool\\\" : {\\n              \\\"should\\\" : [...],\\n              \\\"must_not\\\" : [...],\\n              \\\"must\\\": [...],\\n              \\\"filter\\\": [...]\\n           }\\n         }\\n      }\\n   }\\n}</code></pre>\\n      </div>\\n<p>We will use <code>must</code> and <code>should</code> clauses to filter the data. Through <code>must</code> clause we can get the results which contain all the mentioned tags and through <code>should</code> clause we can get the results which contain either of the mentioned tags.</p>\\n<h3 id=\\\"must-query\\\"><a href=\\\"#must-query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Must Query</h3>\\n<p>We will use <code>term</code> query inside <code>must</code> clause. The <code>term</code> query finds documents that contain the exact term specified at the index time and <code>must</code> query take <strong>AND</strong> of all the results.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl $host/tagwise/search/_search?pretty -d '{\\n   \\\"query\\\" : {\\n      \\\"constant_score\\\" : {\\n         \\\"filter\\\" : {\\n            \\\"bool\\\" : {\\n              \\\"must\\\": [\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"reddit\\\"\\n                  }\\n                },\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"python\\\"\\n                  }\\n                }\\n              ]\\n           }\\n         }\\n      }\\n   }\\n}'</code></pre>\\n      </div>\\n<h4 id=\\\"response\\\"><a href=\\\"#response\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Response</h4>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n  \\\"took\\\": 20,\\n  \\\"timed_out\\\": false,\\n  \\\"_shards\\\": {\\n    \\\"total\\\": 1,\\n    \\\"successful\\\": 1,\\n    \\\"failed\\\": 0\\n  },\\n  \\\"hits\\\": {\\n    \\\"total\\\": 1,\\n    \\\"max_score\\\": 1,\\n    \\\"hits\\\": [\\n      {\\n        \\\"_index\\\": \\\"tagwise\\\",\\n        \\\"_type\\\": \\\"search\\\",\\n        \\\"_id\\\": \\\"AVvR1yM3gPzdwFFNDvs7\\\",\\n        \\\"_score\\\": 1,\\n        \\\"_source\\\": {\\n          \\\"repo\\\": \\\"reddit\\\",\\n          \\\"tags\\\": [\\n            \\\"javascript\\\",\\n            \\\"python\\\",\\n            \\\"reddit\\\"\\n          ],\\n          \\\"owner\\\": \\\"reddit\\\",\\n          \\\"url\\\": \\\"https://github.com/reddit/reddit\\\",\\n          \\\"stars\\\": 13053,\\n          \\\"language\\\": \\\"Python\\\",\\n          \\\"created-on\\\": \\\"2008-06-18T23:30:53Z\\\"\\n        }\\n      }\\n    ]\\n  }\\n}</code></pre>\\n      </div>\\n<h3 id=\\\"should-query\\\"><a href=\\\"#should-query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Should Query</h3>\\n<p>The <code>should</code> query in filter context fetches documents which match with at least one of the mentioned should queries.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl $host/tagwise/search/_search?pretty -d '{\\n   \\\"query\\\" : {\\n      \\\"constant_score\\\" : {\\n         \\\"filter\\\" : {\\n            \\\"bool\\\" : {\\n              \\\"should\\\": [\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"reddit\\\"\\n                  }\\n                },\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"python\\\"\\n                  }\\n                }\\n              ]\\n           }\\n         }\\n      }\\n   }\\n}'</code></pre>\\n      </div>\\n<h4 id=\\\"response-1\\\"><a href=\\\"#response-1\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Response:</h4>\\n<p>As you can see in the response the first result contains only one of the mentioned tag - <code>python</code>.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n  \\\"took\\\": 28,\\n  \\\"timed_out\\\": false,\\n  \\\"_shards\\\": {\\n    \\\"total\\\": 1,\\n    \\\"successful\\\": 1,\\n    \\\"failed\\\": 0\\n  },\\n  \\\"hits\\\": {\\n    \\\"total\\\": 51,\\n    \\\"max_score\\\": 1,\\n    \\\"hits\\\": [\\n      {\\n        \\\"_index\\\": \\\"tagwise\\\",\\n        \\\"_type\\\": \\\"search\\\",\\n        \\\"_id\\\": \\\"AVvR1yI5hvsk2FETc3bb\\\",\\n        \\\"_score\\\": 1,\\n        \\\"_source\\\": {\\n          \\\"repo\\\": \\\"awesome-python\\\",\\n          \\\"tags\\\": [\\n            \\\"awesome\\\",\\n            \\\"collections\\\",\\n            \\\"python\\\"\\n          ],\\n          \\\"owner\\\": \\\"vinta\\\",\\n          \\\"url\\\": \\\"https://github.com/vinta/awesome-python\\\",\\n          \\\"stars\\\": 33500,\\n          \\\"language\\\": \\\"Python\\\",\\n          \\\"created-on\\\": \\\"2014-06-27T21:00:06Z\\\"\\n        }\\n      }\\n    ]\\n  }\\n}</code></pre>\\n      </div>\\n<p>You can also try out this query interactively  <a href=\\\"https://opensource.appbase.io/mirage/#?input_state=XQAAAAIqBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmHCrDFs7iDKutPu_ClxcjCYOqUqELVPJ0G6sKj4u2r8c-T_5P6GlG49XYgfc2GYuMMRuSumifCxuSSCXtOAxs6Hde1p2VgSpnD3tfQtwbKtmlUV9FWFj1xXnSypOS15FxHENksJUxXCtYmd4iVjGL1bowAxrWfOuw1nuIcWHek4srAs1sTP0SOd6XPS6-blE0WjAQt4ce9B23dy_19xYCecMoWthMwrwWTFypBAO8Vcd9w4VuVo1KU8LBRzuRLhDL0KvF_VG62ehVISj4Ty-MiHt6Wpb2oKqBeU0_RAvNWfU1QZMs-TXvpXEXsEaIoh-foBQR6mza5cKEG3-8vZnMLBXW2J5sjEUeM7tqfjdgcDJCjC3ICatsg2wVEme8RVF3cFkkDDX0MTi9_t1eIrq8yU3AHAMZqvAUb5mkmRVWPKetqsE-i4GQyerYVnSY-EJXAPnnip8IXLbYRM8d4ocCXD3R20C7ZwGFGG0MuPIwmzwrf6hStk8ddjvTn81vDwIPDnr91ov42AvY0-7Kb5CpGG6dF2kFR7xcKxyVCxYfbE8Wl2f0RTH6jk-GS7HuqFdz4MEIWS63yeqQ-jajHPetrQP81BisYnXF281pV7ajxzqx8kkTagiyRT9mQsOR_oMVCT63LKNBeCSnffodl6mf_7Qo1M\\\">here. <img src=\\\"http://i.imgur.com/9bg2TMJ.png\\\"></a></p>\\n<hr>\\n<p>You should next read about <a href=\\\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/partial-tag-match-tbd.html\\\"><strong>partial tag match</strong></a>.</p>\",\n\t\t\t\t\"frontmatter\": {\n\t\t\t\t\t\"title\": \"Multiple Tag Match\",\n\t\t\t\t\t\"next\": null,\n\t\t\t\t\t\"prev\": \"arrays.html\",\n\t\t\t\t\t\"nextTitle\": null,\n\t\t\t\t\t\"prevTitle\": \"Array Datatype\"\n\t\t\t\t},\n\t\t\t\t\"fields\": {\n\t\t\t\t\t\"path\": \"docs/tagwise-search/multiple-tag-match.md\",\n\t\t\t\t\t\"slug\": \"tagwise-search/multiple-tag-match.html\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"pathContext\": {\n\t\t\t\"slug\": \"tagwise-search/multiple-tag-match.html\"\n\t\t}\n\t};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---tagwise-search-multiple-tag-match-html-4e50031f42b7b0a73fd1.js","module.exports = {\n\t\"data\": {\n\t\t\"markdownRemark\": {\n\t\t\t\"html\": \"<p>This article is a part of the series on <a href=\\\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/introduction.html\\\"><strong>How to build tag wise search with Elasticsearch</strong></a>.</p>\\n<h2 id=\\\"how-to-find-multiple-exact-values\\\"><a href=\\\"#how-to-find-multiple-exact-values\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>How to find multiple exact values</h2>\\n<p>A major use-case of tags in apps is to associate a content with one or more labels, it is then but natural that a tagwise search feature should be able to retrieve the matching content by user specifying either just one or more than one tag labels in union or intersection output modes.</p>\\n<p>In this chapter, we will be using an Array data structure to store more than one label with a content document. For making the exact lookups for multiple tagwise, we will be applying a term query along with boolean clause on the dataset.</p>\\n<h3 id=\\\"how-to-store-data-using-elasticsearch-arrays\\\"><a href=\\\"#how-to-store-data-using-elasticsearch-arrays\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>How to store data using Elasticsearch arrays</h3>\\n<p>For one or more then one inputs elasticsearch by default considers that field as an array type. However, all values in the array must be of the same datatype. If you create a new field by indexing an array, Elasticsearch will use the datatype of the first value in the array to determine the type of the new field. We can create array of strings, integers, objects or array of arrays to store the data.</p>\\n<p>Default array does not support querying each object independently of the other objects in the array. To distinguish objects stored in array from each other we need to use <strong>Nested datatype</strong>.</p>\\n<p><code>Note:</code> You can read more about nested datatype over <a href=\\\"https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html\\\">here</a>.</p>\\n<h2 id=\\\"defining-mappings\\\"><a href=\\\"#defining-mappings\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Defining Mappings</h2>\\n<p>If you have worked with a SQL database system before, you are probably familiar with the idea of a schema. Elasticsearch’s equivalent of a schema definition is a mapping.</p>\\n<p>By default Elasticsearch analyzes the data before storing it on disk. However, since we require an exact match of the data for repository tags, we will apply a <code>index: not_analyzed</code> setting to prevent the tag field from being analyzed.</p>\\n<p>We will only specify the mapping for the tags field. Elasticsearch will create mappings dynamically for the rest of the fields.</p>\\n<h3 id=\\\"disable-analyzers-on-tags-field\\\"><a href=\\\"#disable-analyzers-on-tags-field\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Disable analyzers on <code>tags</code> field</h3>\\n<p>To store the data without analyzing it, we have to make <code>tags</code> field <strong>not_analyzed</strong>. By doing this Elasticsearch will store the data as usual without any modifications.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl -XPUT $host/tagwise/_mapping/search -d '{\\n  \\\"properties\\\": {\\n    \\\"tags\\\": {\\n      \\\"type\\\": \\\"keyword\\\"\\n    }\\n  }\\n}'</code></pre>\\n      </div>\\n<p>We just put <strong>mapping</strong> on <code>search</code> type of <code>tagwise</code> index. Now, let’s index some data.</p>\\n<h2 id=\\\"indexing-data\\\"><a href=\\\"#indexing-data\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Indexing Data</h2>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl -XPUT $host/tagwise/search/1 -d '{\\n  \\\"repo\\\" : \\\"reddit\\\",\\n  \\\"tags\\\" : [ \\\"javascript\\\", \\\"python\\\", \\\"reddit\\\" ],\\n  \\\"owner\\\" : \\\"reddit\\\",\\n  \\\"url\\\" : \\\"https://github.com/reddit/reddit\\\",\\n  \\\"stars\\\" : 13053,\\n  \\\"language\\\" : \\\"Python\\\",\\n  \\\"created-on\\\" : \\\"2008-06-18T23:30:53Z\\\"\\n}'</code></pre>\\n      </div>\\n<p>If we look back at our data mappings, they should now look like as follows</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl $host/tagwise/_mapping?pretty</code></pre>\\n      </div>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n  \\\"tagwise\\\": {\\n    \\\"mappings\\\": {\\n      \\\"search\\\": {\\n        \\\"properties\\\": {\\n          \\\"owner\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"repo\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"tags\\\": {\\n            \\\"type\\\": \\\"keyword\\\"\\n          },\\n          \\\"url\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"stars\\\": {\\n            \\\"type\\\": \\\"long\\\"\\n          },\\n          \\\"language\\\" : {\\n            \\\"type\\\" : \\\"text\\\",\\n            \\\"fields\\\" : {\\n              \\\"keyword\\\" : {\\n                \\\"type\\\" : \\\"keyword\\\",\\n                \\\"ignore_above\\\" : 256\\n              }\\n            }\\n          },\\n          \\\"created-on\\\": {\\n            \\\"type\\\": \\\"date\\\"\\n          }\\n        }\\n      }\\n    }\\n  }\\n}</code></pre>\\n      </div>\\n<p>We already created sample database. You can tryout your own queries against it. Checkout our next section to play with it.</p>\\n<h2 id=\\\"data-browser-view\\\"><a href=\\\"#data-browser-view\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Data Browser View</h2>\\n<p>For accessibility, we have indexed ~300 data points of Github repos that can be viewed in the data browser <a href=\\\"https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAALsAAAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsfg8zEltX1Bae4VtdAEIGYBD3zva4XDAUUA9VTrYdZNLQd5JP0mLm4u5-Ie7D8qYvlBkqiI3yZnvcuRZPoM5wmYJTyyh-A3d-80gPrA7-YAOP1CjsElJ1Awvm7iOoQzYFWoNbFMzMRnLSrmyJf08HGhNiv-TDi-0N2SLrJ-iOAm2-0MLNsYdDFMc7va07VB2QiT6uDBzg3MVoV7a7L6bsXj06jwjF8DI8BFy4lYZ1Rkf_9VL4AA\\\">here. <img src=\\\"http://i.imgur.com/x7nLB9s.png\\\"></a></p>\\n<h2 id=\\\"query\\\"><a href=\\\"#query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Query</h2>\\n<p>Elasticsearch provides a way through bool query to combine the multiple query types into a single query with <code>and</code>, <code>or</code>, and <code>not</code> logic.</p>\\n<h3 id=\\\"bool-query\\\"><a href=\\\"#bool-query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Bool Query</h3>\\n<p>The bool query is composed of four clauses(query).</p>\\n<ul>\\n<li><code>must</code>: All of these clauses must match. The equivalent of <strong>AND</strong>.</li>\\n<li><code>must_not</code>: All of these clauses must not match. The equivalent of <strong>NOT</strong>.</li>\\n<li><code>should</code>: At least one of these clauses must match. The equivalent of <strong>OR</strong>.</li>\\n<li><code>filter</code>: The query must appear in matching documents. This query ignores the score and executes it in filter context.</li>\\n</ul>\\n<p>We will execute bool queries in non-scoring mode since we have disabled analyzer on <code>tags</code> field. We will use <code>constant_score</code> query to wrap everything with its filter clause.</p>\\n<p>So our basic query json structure looks like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n   \\\"query\\\" : {\\n      \\\"constant_score\\\" : {\\n         \\\"filter\\\" : {\\n            \\\"bool\\\" : {\\n              \\\"should\\\" : [...],\\n              \\\"must_not\\\" : [...],\\n              \\\"must\\\": [...],\\n              \\\"filter\\\": [...]\\n           }\\n         }\\n      }\\n   }\\n}</code></pre>\\n      </div>\\n<p>We will use <code>must</code> and <code>should</code> clauses to filter the data. Through <code>must</code> clause we can get the results which contain all the mentioned tags and through <code>should</code> clause we can get the results which contain either of the mentioned tags.</p>\\n<h3 id=\\\"must-query\\\"><a href=\\\"#must-query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Must Query</h3>\\n<p>We will use <code>term</code> query inside <code>must</code> clause. The <code>term</code> query finds documents that contain the exact term specified at the index time and <code>must</code> query take <strong>AND</strong> of all the results.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl $host/tagwise/search/_search?pretty -d '{\\n   \\\"query\\\" : {\\n      \\\"constant_score\\\" : {\\n         \\\"filter\\\" : {\\n            \\\"bool\\\" : {\\n              \\\"must\\\": [\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"reddit\\\"\\n                  }\\n                },\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"python\\\"\\n                  }\\n                }\\n              ]\\n           }\\n         }\\n      }\\n   }\\n}'</code></pre>\\n      </div>\\n<h4 id=\\\"response\\\"><a href=\\\"#response\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Response</h4>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n  \\\"took\\\": 20,\\n  \\\"timed_out\\\": false,\\n  \\\"_shards\\\": {\\n    \\\"total\\\": 1,\\n    \\\"successful\\\": 1,\\n    \\\"failed\\\": 0\\n  },\\n  \\\"hits\\\": {\\n    \\\"total\\\": 1,\\n    \\\"max_score\\\": 1,\\n    \\\"hits\\\": [\\n      {\\n        \\\"_index\\\": \\\"tagwise\\\",\\n        \\\"_type\\\": \\\"search\\\",\\n        \\\"_id\\\": \\\"AVvR1yM3gPzdwFFNDvs7\\\",\\n        \\\"_score\\\": 1,\\n        \\\"_source\\\": {\\n          \\\"repo\\\": \\\"reddit\\\",\\n          \\\"tags\\\": [\\n            \\\"javascript\\\",\\n            \\\"python\\\",\\n            \\\"reddit\\\"\\n          ],\\n          \\\"owner\\\": \\\"reddit\\\",\\n          \\\"url\\\": \\\"https://github.com/reddit/reddit\\\",\\n          \\\"stars\\\": 13053,\\n          \\\"language\\\": \\\"Python\\\",\\n          \\\"created-on\\\": \\\"2008-06-18T23:30:53Z\\\"\\n        }\\n      }\\n    ]\\n  }\\n}</code></pre>\\n      </div>\\n<h3 id=\\\"should-query\\\"><a href=\\\"#should-query\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Should Query</h3>\\n<p>The <code>should</code> query in filter context fetches documents which match with at least one of the mentioned should queries.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>curl $host/tagwise/search/_search?pretty -d '{\\n   \\\"query\\\" : {\\n      \\\"constant_score\\\" : {\\n         \\\"filter\\\" : {\\n            \\\"bool\\\" : {\\n              \\\"should\\\": [\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"reddit\\\"\\n                  }\\n                },\\n                {\\n                  \\\"term\\\": {\\n                    \\\"tags\\\": \\\"python\\\"\\n                  }\\n                }\\n              ]\\n           }\\n         }\\n      }\\n   }\\n}'</code></pre>\\n      </div>\\n<h4 id=\\\"response-1\\\"><a href=\\\"#response-1\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Response:</h4>\\n<p>As you can see in the response the first result contains only one of the mentioned tag - <code>python</code>.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsxon\\\"><code>{\\n  \\\"took\\\": 28,\\n  \\\"timed_out\\\": false,\\n  \\\"_shards\\\": {\\n    \\\"total\\\": 1,\\n    \\\"successful\\\": 1,\\n    \\\"failed\\\": 0\\n  },\\n  \\\"hits\\\": {\\n    \\\"total\\\": 51,\\n    \\\"max_score\\\": 1,\\n    \\\"hits\\\": [\\n      {\\n        \\\"_index\\\": \\\"tagwise\\\",\\n        \\\"_type\\\": \\\"search\\\",\\n        \\\"_id\\\": \\\"AVvR1yI5hvsk2FETc3bb\\\",\\n        \\\"_score\\\": 1,\\n        \\\"_source\\\": {\\n          \\\"repo\\\": \\\"awesome-python\\\",\\n          \\\"tags\\\": [\\n            \\\"awesome\\\",\\n            \\\"collections\\\",\\n            \\\"python\\\"\\n          ],\\n          \\\"owner\\\": \\\"vinta\\\",\\n          \\\"url\\\": \\\"https://github.com/vinta/awesome-python\\\",\\n          \\\"stars\\\": 33500,\\n          \\\"language\\\": \\\"Python\\\",\\n          \\\"created-on\\\": \\\"2014-06-27T21:00:06Z\\\"\\n        }\\n      }\\n    ]\\n  }\\n}</code></pre>\\n      </div>\\n<p>You can also try out this query interactively  <a href=\\\"https://opensource.appbase.io/mirage/#?input_state=XQAAAAIqBQAAAAAAAAA9iIhnNAWbsswtYjeQNZkpzQK4_mOzUeDpWmHCrDFs7iDKutPu_ClxcjCYOqUqELVPJ0G6sKj4u2r8c-T_5P6GlG49XYgfc2GYuMMRuSumifCxuSSCXtOAxs6Hde1p2VgSpnD3tfQtwbKtmlUV9FWFj1xXnSypOS15FxHENksJUxXCtYmd4iVjGL1bowAxrWfOuw1nuIcWHek4srAs1sTP0SOd6XPS6-blE0WjAQt4ce9B23dy_19xYCecMoWthMwrwWTFypBAO8Vcd9w4VuVo1KU8LBRzuRLhDL0KvF_VG62ehVISj4Ty-MiHt6Wpb2oKqBeU0_RAvNWfU1QZMs-TXvpXEXsEaIoh-foBQR6mza5cKEG3-8vZnMLBXW2J5sjEUeM7tqfjdgcDJCjC3ICatsg2wVEme8RVF3cFkkDDX0MTi9_t1eIrq8yU3AHAMZqvAUb5mkmRVWPKetqsE-i4GQyerYVnSY-EJXAPnnip8IXLbYRM8d4ocCXD3R20C7ZwGFGG0MuPIwmzwrf6hStk8ddjvTn81vDwIPDnr91ov42AvY0-7Kb5CpGG6dF2kFR7xcKxyVCxYfbE8Wl2f0RTH6jk-GS7HuqFdz4MEIWS63yeqQ-jajHPetrQP81BisYnXF281pV7ajxzqx8kkTagiyRT9mQsOR_oMVCT63LKNBeCSnffodl6mf_7Qo1M\\\">here. <img src=\\\"http://i.imgur.com/9bg2TMJ.png\\\"></a></p>\\n<hr>\\n<p>You should next read about <a href=\\\"https://appbaseio.gitbooks.io/esc/content/tagwise-search/partial-tag-match-tbd.html\\\"><strong>partial tag match</strong></a>.</p>\",\n\t\t\t\"frontmatter\": {\n\t\t\t\t\"title\": \"Multiple Tag Match\",\n\t\t\t\t\"next\": null,\n\t\t\t\t\"prev\": \"arrays.html\",\n\t\t\t\t\"nextTitle\": null,\n\t\t\t\t\"prevTitle\": \"Array Datatype\"\n\t\t\t},\n\t\t\t\"fields\": {\n\t\t\t\t\"path\": \"docs/tagwise-search/multiple-tag-match.md\",\n\t\t\t\t\"slug\": \"tagwise-search/multiple-tag-match.html\"\n\t\t\t}\n\t\t}\n\t},\n\t\"pathContext\": {\n\t\t\"slug\": \"tagwise-search/multiple-tag-match.html\"\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/tagwise-search-multiple-tag-match-html.json\n// module id = 445\n// module chunks = 43733725438942"],"sourceRoot":""}